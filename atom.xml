<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Achuan-2</title>
  
  <subtitle>一条没有故事的巛 | 闪闪发亮，闪闪发亮</subtitle>
  <link href="http://achuan-2.top/atom.xml" rel="self"/>
  
  <link href="http://achuan-2.top/"/>
  <updated>2024-09-21T06:43:33.000Z</updated>
  <id>http://achuan-2.top/</id>
  
  <author>
    <name>Achuan-2</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>生活窍门丨为什么油性笔可以写在塑料上</title>
    <link href="http://achuan-2.top/post/life-tips-gun-why-can-oily-pen-can-be-written-on-plastic-1ruwyi.html"/>
    <id>http://achuan-2.top/post/life-tips-gun-why-can-oily-pen-can-be-written-on-plastic-1ruwyi.html</id>
    <published>2024-09-21T06:36:26.000Z</published>
    <updated>2024-09-21T06:43:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>之前都是用水性签字笔写标签纸，写完很容易被弄花<br>今天才发现用油性笔写，简直速干，完全不用怕字迹会被弄花，可以轻松写在塑料、金属、陶瓷上。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/image-20240921143634-pafxno2.png"></div></div><h2 id="思考为什么油性笔可以写在塑料上"><a class="markdownIt-Anchor" href="#思考为什么油性笔可以写在塑料上"></a> 思考：为什么油性笔可以写在塑料上</h2><p>油性笔的墨水通常由以下几种成分组成：</p><ol><li><strong>溶剂</strong>：油性笔的墨水中含有有机溶剂，如甲苯、二甲苯或醇类。这些溶剂能够迅速挥发，使墨水在塑料表面快速干燥。</li><li><strong>颜料或染料</strong>：这些是墨水中的着色成分，提供颜色。</li><li><strong>树脂</strong>：树脂成分使墨水具有粘性，能够附着在光滑的表面上，如塑料。</li><li><strong>添加剂</strong>：这些成分可以改善墨水的流动性、耐水性和耐光性。</li></ol><p>塑料表面通常是光滑且非多孔的，这使得普通的水性笔墨水难以附着。然而，油性笔的墨水由于其特殊的成分，可以很好地附着在这些光滑的表面上</p><p>油性笔中的有机溶剂能够轻微溶解塑料表面的一层薄膜，使墨水中的颜料和树脂更容易嵌入到塑料表面。同时，有机溶剂迅速挥发，使墨水在塑料表面快速干燥，树脂成分也提供了足够的粘附力，使得墨水能够牢固地附着在塑料表面，不容易被擦掉。</p><p>综上所述，油性笔能够在塑料上书写，主要是因为其墨水中含有的有机溶剂和树脂成分能够有效地附着在光滑的塑料表面，并且快速干燥形成牢固的标记。这些特性使得油性笔成为在塑料等光滑表面上书写的理想工具。</p>]]></content>
    
    
    <summary type="html">之前都是用水性签字笔写标签纸，写完很容易被弄花
今天才发现用油性笔写，简直速干，完全不用怕字迹会被弄花，可以轻松写在塑料、金属、陶瓷上。</summary>
    
    
    
    <category term="生活百科" scheme="http://achuan-2.top/categories/%E7%94%9F%E6%B4%BB%E7%99%BE%E7%A7%91/"/>
    
    
  </entry>
  
  <entry>
    <title>协方差分析 (ANCOVA)</title>
    <link href="http://achuan-2.top/post/jiefang-poor-analysis-ancova-rxm1i.html"/>
    <id>http://achuan-2.top/post/jiefang-poor-analysis-ancova-rxm1i.html</id>
    <published>2024-09-08T12:46:51.000Z</published>
    <updated>2024-09-21T06:57:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>协方差分析（Analysis of Covariance，简称ANCOVA）是一种将回归分析与方差分析相结合的一种分析方法。用来比较不同组之间的均值，同时控制一个或多个协变量（即可能影响结果的连续变量）的影响。</p><p>多组数据的比较可以用方差分析，但是如果不同样本的基线本来就不一致，直接分析测试结果数据，直接用方差分析可能存在问题。这时候就需要使用协方差分析。</p><p><strong>协方差分析基本思想</strong>是将难以控制的因素对因变量Y的影响看作是协变量X，建立协变量X与因变量Y的线性回归关系，利用该回归关系将协变量X的值化为相等，计算因变量Y的修正，再对因变量Y的修正均数进行比较。</p><p><strong>协方差分析的例子：</strong></p><ul><li>在研究不同教学方法对学生考试成绩的影响时，学生的初始能力（比如之前的考试成绩）也会影响最终成绩。为了公平地比较不同教学方法的效果，要去除培训前成绩差异的影响。</li><li>研究对象分为两组，接受不同治疗（如治疗组和安慰组），每组分别在治疗前和治疗后测量观察指标（如血压值），比较治疗前后的血压值时，需要去除不同研究对象本身血压值就有差异的影响。</li></ul><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240909003917-xwflnz1.png"></div></div><h2 id="科学研究中的协方差分析应用"><a class="markdownIt-Anchor" href="#科学研究中的协方差分析应用"></a> 科学研究中的协方差分析应用</h2><blockquote><p>来源：<a href="https://zhuanlan.zhihu.com/p/80420026">通过一个简单例子，通俗讲下协方差分析 - 知乎 (zhihu.com)</a></p></blockquote><p>临床中经常碰到这种设计：研究对象分为两组，接受不同治疗（如治疗组和安慰组），每组分别在治疗前和治疗后测量观察指标（如血压值）。目的是比较两种治疗方式是否有差异。这种情况你会怎么处理呢？</p><p>我看过不少国内的文章，<strong>他们的做法有这么几种：</strong> （1）直接比较治疗后的两组指标，如血压值，用t检验比较；（2）先比较治疗前两组的差异，证明无统计学意义，然后再比较治疗后两组的差异；（3）先比较试验组治疗前和治疗后差异，再比较对照组治疗前和治疗后差异，如果试验组治疗后和治疗前差异更大，说明试验组更有效。</p><p><strong>第一种做法</strong>是肯定有问题的，因为它根本不考虑两组在疗前的差异。<strong>为什么有问题呢？</strong> 比方说，下面这个简单的例子：</p><p>有甲乙丙3个学生，期末考试成绩分别为90、85、80，如果让你判断，你觉得哪个学生更优秀一些（只考虑成绩）？当然了，你可以毫不犹豫地说，甲最优秀，因为成绩最高。但确实如此吗？</p><p>再给你一组数据，甲乙丙3个人的刚入学时的成绩，分别是95、85、60。这时候再让你说，谁更优秀呢？我想，你可能要犹豫一下了。虽然甲的期末成绩最高，但是相比入学成绩而言，他是下降了。丙的期末成绩最低，可是相对入学成绩而言，他上升了很多。作为一个老师，也许他不会说，甲最优秀，而会说，丙最优秀。因为成绩上升很快。</p><p>所以，很明显，我们是<strong>不应该只看治疗后两组差异的</strong>，这说明不了什么问题。</p><p><strong>第二种做法，相对好一些</strong>，起码通过统计学方法说明两组治疗前无统计学差异。但是，统计学差异有时未必可靠，跟例数有关的，如果例数少的话，即使两组治疗前差别较大，也是无统计学差异。所以，也不是很好。</p><p><strong>第三种做法</strong>，听起来似乎也有理，但仔细想想。试验组的治疗后和治疗前差异比对照组的大，是反映了一种真实情况吗？还是需要有统计学来证实的。比如，试验组的血压值治疗后与治疗前相比，降低了2mmHg，对照组降低了1.8mmHg，仅从数字来看，试验组降低更多，但有意义吗？很难说。</p><p><strong>比较两组差异的正确做法</strong></p><p>真正想说明两组差异的话，<strong>比较好的做法有两种：</strong></p><p>（1）采用<strong>倍差法</strong>，具体是：两组分别求出服药后和服药前的血压值差值，这样就变成了两组差值的比较，可采用t检验或方差分析。由于做了两次差值，所以叫倍差法。</p><p>（2）采用<strong>协方差分析</strong>，比较两组治疗后的血压值，但是以服药前血压值作为协变量，校正其影响。实际上是比较两组校正的服药后血压值。</p><p>第一种方法很简单，只是一种思路而已，仍然是t检验或方差分析。这里就不多说。第二种方法是协方差分析，本文主要介绍一下。</p><p><strong>协方差分析的思想大概就是：</strong> 把治疗前两组的数值作为一个协变量，比较两组治疗后差异的时候，校正这一协变量。这样可以得到校正后的两组治疗后均值，比较两组的校正均值。比如说，a和b两组治疗后均值分别为62和56，但是如果校正协变量后，很可能就变成了59和59，这样比较两个校正均值59和59，两组就没有统计学差异了。</p><h2 id="基本概念"><a class="markdownIt-Anchor" href="#基本概念"></a> 基本概念</h2><p><strong>协变量、因变量、自变量</strong></p><ul><li><p>协变量（Covariate）</p><p>协变量是那些可能影响因变量的变量，但不是主要研究对象。通过控制这些变量，可以更准确地评估自变量对因变量的影响。比如研究教学方法对学生成绩影响时，协变量是学生之前的成绩。</p></li><li><p>因变量（Dependent Variable）</p><p>因变量是研究中被测量的结果或反应变量。比如研究教学方法对学生成绩影响时，因变量是不同的研究教学方法。</p></li><li><p>自变量（Independent Variable）</p><p>自变量是研究中被操纵或分类的变量，用于探讨其对因变量的影响。比如研究教学方法对学生成绩影响时，自变量是学生之后的成绩。</p></li></ul><p><strong>主效应和交互效应</strong></p><ul><li><strong>主效应</strong>：自变量对因变量的直接影响，不考虑协变量。</li><li><strong>交互效应</strong>：自变量和协变量之间的交互作用对因变量的影响</li></ul><h2 id="要求"><a class="markdownIt-Anchor" href="#要求"></a> 要求</h2><ol><li>所关注的变量应该是连续的、正态分布的，各组方差齐性。各组应该是独立的（互不相关），并且应该有足够的数据（每组有 5 个以上的值）。</li><li>因变量与协变量之间的回归关系必须是线性的。</li><li>自变量与因变量之间没有交互作用。<strong>交互作用也可以认为代表斜率，没有显著作用，说明斜率不存在显著差异。</strong> 只有当分类变量和连续变量之间<strong>没有显著的交互作用，才可以进行协方差分析。</strong></li></ol><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240908221542-z8o47a0.png" alt="以协变量为x轴，以因变量为y轴，如果交互作用显著，则会出现类似左图和中图的情况。"></div><div class="image-meta"><span class="image-caption center">以协变量为x轴，以因变量为y轴，如果交互作用显著，则会出现类似左图和中图的情况。</span></div></div><h2 id="分析策略"><a class="markdownIt-Anchor" href="#分析策略"></a> 分析策略</h2><ul><li>如果只有组别变量显著，则放弃协变量。 从模型中删除变量，这样就得到了一个<strong>方差分析</strong>。</li><li>如果只有协变量显著，则放弃组别变量。 从模型中提取一个变量，就可以得到一个<strong>简单的线性回归</strong>结果</li><li>如果交互作用显著，即协变量对因变量的影响因组别的不同而不同。在这种情况下，<strong>需要考虑交互作用对因变量的影响</strong>。可以对不同组别分别进行回归分析，以更详细地了解协变量在不同组别中的效应。</li></ul><h2 id="matlab-实现ancova-分析示例"><a class="markdownIt-Anchor" href="#matlab-实现ancova-分析示例"></a> Matlab 实现ANCOVA 分析示例</h2><p>数据：记录不同学生经过不同的教学方法后的考试成绩前后变化</p><p>分析：需要知道不同教学方法有无差异。考虑到不同学生的考试成绩水平不一样，不能仅仅只考虑教学后的考试成绩，还需要考虑到不同学生的原本水平。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 定义数据</span></span><br><span class="line">Method  = repelem(&#123;<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>&#125;, <span class="number">4</span>)&#x27;;</span><br><span class="line">InitialScore = [<span class="number">67</span>, <span class="number">88</span>, <span class="number">75</span>, <span class="number">85</span>, <span class="number">92</span>, <span class="number">77</span>, <span class="number">74</span>, <span class="number">88</span>, <span class="number">91</span>, <span class="number">88</span>, <span class="number">82</span>, <span class="number">80</span>]&#x27;;</span><br><span class="line">FinalScore= [<span class="number">77</span>, <span class="number">89</span>, <span class="number">74</span>, <span class="number">69</span>, <span class="number">88</span>, <span class="number">93</span>, <span class="number">94</span>, <span class="number">90</span>, <span class="number">85</span>, <span class="number">81</span>, <span class="number">83</span>, <span class="number">79</span>]&#x27;;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 将Method转换为分类变量</span></span><br><span class="line">Method = categorical(Method);</span><br><span class="line"><span class="comment">% 创建表格</span></span><br><span class="line">data = <span class="built_in">table</span>(Method, InitialScore, FinalScore);</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">data =</span><br><span class="line"></span><br><span class="line">  <span class="number">12</span>×<span class="number">3</span> <span class="built_in">table</span></span><br><span class="line"></span><br><span class="line">    Method    InitialScore    FinalScore</span><br><span class="line">    ______    ____________    __________</span><br><span class="line"></span><br><span class="line">      A            <span class="number">67</span>             <span class="number">77</span>  </span><br><span class="line">      A            <span class="number">88</span>             <span class="number">89</span>  </span><br><span class="line">      A            <span class="number">75</span>             <span class="number">74</span>  </span><br><span class="line">      A            <span class="number">85</span>             <span class="number">69</span>  </span><br><span class="line">      B            <span class="number">92</span>             <span class="number">88</span>  </span><br><span class="line">      B            <span class="number">77</span>             <span class="number">93</span>  </span><br><span class="line">      B            <span class="number">74</span>             <span class="number">94</span>  </span><br><span class="line">      B            <span class="number">88</span>             <span class="number">90</span>  </span><br><span class="line">      C            <span class="number">91</span>             <span class="number">85</span>  </span><br><span class="line">      C            <span class="number">88</span>             <span class="number">81</span>  </span><br><span class="line">      C            <span class="number">82</span>             <span class="number">83</span>  </span><br><span class="line">      C            <span class="number">80</span>             <span class="number">79</span>  </span><br></pre></td></tr></table></figure><p>Matlab 有aoctool函数，可以进行ANCOVA分析</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">% 使用aoctool进行ANCOVA分析</span><br><span class="line">alpha = 0.05;</span><br><span class="line"></span><br><span class="line">aoctool(InitialScore, FinalScore, Method, alpha);</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-09-09_00-12-22-20240909001223-fhrn7hm.png"></div></div><p>会绘制三个Figure</p><ol><li>ANOCOVA Prediction Plot：绘制三组协变量和因变量的相关性，并进行回归。可以简单查看协变量和因变量是否成线性相关关系，若不成立，则不能进行ANOCOVA分析</li><li>ANOCOVA Coefficients：展示三组回归的系数</li><li>ANOCOVA Test Results：展示自变量、协变量和自变量与协变量相互作用对因变量的影响，如果相互作用的pvalue&lt;0.05，则说明三组斜率显著不一样，则不能进行ANOCOVA分析</li></ol><p>ANOCOVA Test Results的结果其实等效于线性回归模型<code>FinalScore ~ InitialScore * Method</code>经过ANOVA分析：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 拟合线性模型</span></span><br><span class="line">model = fitlm(data, <span class="string">&#x27;FinalScore ~ InitialScore * Method&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 显示ANOVA表格</span></span><br><span class="line">anovaTable = anova(model);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 显示结果</span></span><br><span class="line"><span class="built_in">disp</span>(anovaTable);</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">                       SumSq     DF    MeanSq       F         pValue </span><br><span class="line">                       ______    __    ______    ________    ________</span><br><span class="line"></span><br><span class="line">Method                 <span class="number">387.51</span>    <span class="number">2</span>     <span class="number">193.76</span>      <span class="number">5.5648</span>    <span class="number">0.042975</span></span><br><span class="line">InitialScore           <span class="number">1.4047</span>    <span class="number">1</span>     <span class="number">1.4047</span>    <span class="number">0.040343</span>     <span class="number">0.84745</span></span><br><span class="line">Method:InitialScore    <span class="number">49.186</span>    <span class="number">2</span>     <span class="number">24.593</span>     <span class="number">0.70633</span>     <span class="number">0.53031</span></span><br><span class="line">Error                  <span class="number">208.91</span>    <span class="number">6</span>     <span class="number">34.818</span>   </span><br></pre></td></tr></table></figure><p>从结果表格可以看到，交互作用项不显著，这意味着InitialScore对FinalScore影响在不同教学方法之间没有差异。因此可以舍弃交互作用项，方差分析模型变为</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 拟合线性模型</span></span><br><span class="line">model = fitlm(data, <span class="string">&#x27;FinalScore ~ InitialScore + Method&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 显示ANOVA表格</span></span><br><span class="line">anovaTable = anova(model);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 显示结果</span></span><br><span class="line"><span class="built_in">disp</span>(anovaTable);</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">                SumSq     DF    MeanSq       F        pValue </span><br><span class="line">                ______    __    ______    _______    ________</span><br><span class="line"></span><br><span class="line">Method          <span class="number">387.51</span>    <span class="number">2</span>     <span class="number">193.76</span>     <span class="number">6.0057</span>    <span class="number">0.025542</span></span><br><span class="line">InitialScore    <span class="number">1.4047</span>    <span class="number">1</span>     <span class="number">1.4047</span>    <span class="number">0.04354</span>     <span class="number">0.83993</span></span><br><span class="line">Error            <span class="number">258.1</span>    <span class="number">8</span>     <span class="number">32.262</span>   </span><br></pre></td></tr></table></figure><p>由于输出显示InitialScore对FinalScore的影响也不显著，因此也去掉了这一项，最终模型为</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">% 拟合线性模型</span><br><span class="line">model = fitlm(data, &#x27;FinalScore ~ Method&#x27;);</span><br><span class="line"></span><br><span class="line">% 显示ANOVA表格</span><br><span class="line">anovaTable = anova(model);</span><br><span class="line"></span><br><span class="line">% 显示结果</span><br><span class="line">disp(anovaTable);</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">          SumSq    DF    MeanSq      F        pValue </span><br><span class="line">          _____    __    ______    ______    ________</span><br><span class="line"></span><br><span class="line">Method    <span class="number">405.5</span>    <span class="number">2</span>     <span class="number">202.75</span>    <span class="number">7.0318</span>    <span class="number">0.014485</span></span><br><span class="line">Error     <span class="number">259.5</span>    <span class="number">9</span>     <span class="number">28.833</span>    </span><br></pre></td></tr></table></figure><h2 id="问题"><a class="markdownIt-Anchor" href="#问题"></a> 问题</h2><ul><li><p>协方差分析为什么要看协变量和组别的相互作用</p><ul><li>ANCOVA假设协变量和因变量之间的关系在所有组别中是一致的。如果协变量和组别之间存在显著的相互作用，这意味着协变量对因变量的影响在不同组别之间是不一致的。</li></ul></li><li><p>如何理解“ANCOVA建立协变量X与因变量Y的线性回归关系，利用该回归关系将协变量X的值化为相等，计算因变量Y的修正均值，再对因变量Y的修正均数进行比较。”这句话</p><p>可以看下图</p></li></ul><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-09-09_00-21-45-20240909002155-bat9f04.png"></div></div><p>ANCOVA就是以协变量为x轴，以因变量为y轴，对各组进行回归分析，看各组因变量随着协变量的变化是否有显著差异。从上图中就可以看到，当各组协变量通过回归都相等时，各组因变量值的差异，从而计算显著差异。</p><p><strong>❓但是说计算因变量Y的修正均值我没有搞懂是怎么计算修正均值的？是直接线性回归模型套ANOVA就可以计算均值并计算显著性了嘛？</strong></p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-09-09_00-46-50-20240909004654-szt9lvd.png"></div></div><p>调整均数是对各组求协变量的均值，然后得到一个总协变量均值，根据回归关系，得到各组的调整均值</p><p>公式：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mover accent="true"><mi>y</mi><mo>ˉ</mo></mover><mi>i</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup><mo>=</mo><msub><mover accent="true"><mi>y</mi><mo>ˉ</mo></mover><mi>i</mi></msub><mo>−</mo><msub><mi>β</mi><mrow><mi>y</mi><mi>x</mi><mo stretchy="false">(</mo><mi>e</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">(</mo><msub><mover accent="true"><mi>x</mi><mo>ˉ</mo></mover><mi>i</mi></msub><mo>−</mo><mover accent="true"><mi>x</mi><mo>ˉ</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\bar{y}&#x27;_i = \bar{y}_i - \beta_{yx(e)} (\bar{x}_i - \bar{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.010556em;vertical-align:-0.258664em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.441336em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.258664em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3551999999999999em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="mord mathnormal mtight">x</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">e</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><p><strong>❓那么是怎么根据校正均值进行方差分析的？</strong></p><p>暂时不管了</p><h2 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h2><ul><li><a href="https://zhuanlan.zhihu.com/p/80420026">通过一个简单例子，通俗讲下协方差分析 - 医小咖的文章 - 知乎</a></li><li><a href="https://www.cnblogs.com/think-and-do/p/6536106.html">第十章 协方差分析 - Thinkando - 博客园 (cnblogs.com)</a></li><li><a href="https://en.wikipedia.org/wiki/Analysis_of_covariance">Analysis of covariance - Wikipedia</a></li><li><a href="https://www.reneshbedre.com/blog/ancova.html">ANCOVA using R and Python (with examples and code) (reneshbedre.com)</a></li><li><a href="https://www.geeksforgeeks.org/how-to-perform-an-ancova-in-python/">How to Perform an ANCOVA in Python - GeeksforGeeks</a></li><li><a href="https://ww2.mathworks.cn/help/stats/analysis-of-covariance.html">Analysis of Covariance - MATLAB &amp; Simulink - MathWorks 中国</a></li><li><a href="https://r.qcbs.ca/workshop04/book-en/analysis-of-covariance-ancova.html">Chapter 6 Analysis of covariance (ANCOVA) | Workshop 4: Linear models (qcbs.ca)</a></li></ul><p>‍</p>]]></content>
    
    
    <summary type="html">【🌟 为什么选择协方差分析？】协方差分析（Analysis of Covariance，简称ANCOVA）是一种将回归分析与方差分析相结合的一种分析方法。用来比较不同组之间的均值，同时控制一个或多个协变量（即可能影响结果的连续变量）的影响。多组数据的比较可以用方差分析，但是如果不同样本的基线本来就不一致，直接分析测试结果数据，直接用方差分析可能存在问题。这时候就需要使用协方差分析。【💡协方差分析的核心思想】协方差分析基本思想是将难以控制的因素对因变量Y的影响看作是协变量X，建立协变量X与因变量Y的线性回归关系，利用该回归关系将协变量X的值化为相等，计算因变量Y的修正，再对因变量Y的修正均数进行比较。【📊协方差分析的例子】✅ 在研究不同教学方法对学生考试成绩的影响时，学生的初始能力（比如之前的考试成绩）也会影响最终成绩。为了公平地比较不同教学方法的效果，要去除培训前成绩差异的影响。✅ 研究对象分为两组，接受不同治疗（如治疗组和安慰组），每组分别在治疗前和治疗后测量观察指标（如血压值），比较治疗前后的血压值时，需要去除不同研究对象本身血压值就有差异的影响。</summary>
    
    
    
    <category term="统计分析" scheme="http://achuan-2.top/categories/%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90/"/>
    
    
  </entry>
  
  <entry>
    <title>ANOVA方差分析</title>
    <link href="http://achuan-2.top/post/anova-variance-analysis-g7i0c.html"/>
    <id>http://achuan-2.top/post/anova-variance-analysis-g7i0c.html</id>
    <published>2024-09-01T14:47:38.000Z</published>
    <updated>2024-09-02T13:23:33.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="什么是anova方差分析"><a class="markdownIt-Anchor" href="#什么是anova方差分析"></a> 什么是ANOVA方差分析？</h2><p>ANOVA（Analysis of Variance，方差分析）是一种统计方法，在某些场合也被称为F检验（不过F检验指的实际是方差齐性检验），它用于比较三个或更多样本组之间的均值差异。它通过分析组内和组间的方差，来判断不同组别之间的均值是否存在显著差异。ANOVA的基本思想是，如果不同组的均值存在显著差异，那么这些组之间的方差应当大于组内的方差。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240902165630-1e0jixr.png" alt="如果不同组的均值存在显著差异，那么这些组之间的方差应当大于组内的方差"></div><div class="image-meta"><span class="image-caption center">如果不同组的均值存在显著差异，那么这些组之间的方差应当大于组内的方差</span></div></div><p>方差分析依靠F-分布为概率分布的依据，利用平方和（Sum of square）与自由度（Degree of freedom）所计算的组间与组内均方（Mean of square）估计出F值，若有显著差异则考量进行事后比较或称多重比较（Multiple comparison），较常见的为<a href="https://en.wikipedia.org/wiki/Scheff%C3%A9%27s_method">Scheffé's method</a>、<a href="https://en.wikipedia.org/wiki/Tukey%27s_range_test" title="en:Tukey's range test">Tukey's range test</a>与<a href="https://zh.wikipedia.org/wiki/%E9%82%A6%E8%B4%B9%E7%BD%97%E5%B0%BC%E6%A0%A1%E6%AD%A3">Bonferroni correction</a>，用于具体探讨其各组之间的差异。。</p><p>在方差分析的基本运算概念下，依照所感兴趣的因子数量而可分为单因子方差分析、双因子方差分析、多因子方差分析三大类，依照因子的特性不同而有三种类型，固定效应方差分析（fixed-effect analysis of variance）、随机效应方差分析（random-effect analysis of variance）与混合效应方差分析（Mixed-effect analaysis of variance）</p><p>方差分析优于两组比较的T检验之处，在于后者会导致多重比较（multiple comparisons）的问题而致使<a href="https://zh.wikipedia.org/wiki/%E5%9E%8B%E4%B8%80%E9%8C%AF%E8%AA%A4%E8%88%87%E5%9E%8B%E4%BA%8C%E9%8C%AF%E8%AA%A4" title="第一类错误与第二类错误">第一类错误</a>（假阳性导致的假科学论断）的机会增高，因此比较多组平均数是否有差异则是方差分析的主要命题。</p><h2 id="anova分析的适用条件"><a class="markdownIt-Anchor" href="#anova分析的适用条件"></a> ANOVA分析的适用条件</h2><ul><li><strong>数据独立性</strong>：各组样本之间必须是独立的。</li><li><strong>正态性</strong>：各组样本数据应服从正态分布。</li><li><strong>方差齐性</strong>：各组样本的方差应该相等。</li><li><strong>因变量是连续变量</strong>：因变量通常是连续的，且是定量数据。</li></ul><p>注意，ANOVA可以用于不均衡样本</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240902193654-o01z626.png"></div></div><h2 id="anova-方差分析与其他检验方法的关系"><a class="markdownIt-Anchor" href="#anova-方差分析与其他检验方法的关系"></a> ANOVA 方差分析与其他检验方法的关系</h2><h3 id="t检验"><a class="markdownIt-Anchor" href="#t检验"></a> T检验</h3><ul><li><strong>t检验</strong>：主要用于比较两个独立样本或配对样本的均值差异。常见的有独立样本t检验和配对样本t检验。</li><li><strong>ANOVA</strong>：当需要比较三个或更多组的均值差异，不适合用t检验，适合用ANOVA方差分析。最常见的是单因素方差分析（One-Way ANOVA），它用于比较一个因素的多个水平对因变量的影响。</li></ul><h3 id="非参数检验替代方法"><a class="markdownIt-Anchor" href="#非参数检验替代方法"></a> 非参数检验替代方法</h3><p>ANOVA（Analysis of Variance）是一种常见的分析方法，但要求数据满足正态性、同方差等假设，适用范围受限。</p><p>下面是其非参数检验的替代方法</p><ul><li><strong>Kruskal-Wallis检验</strong>：这是单因素ANOVA的非参数替代方法，是非参数版的anova1。它用于比较三个或更多独立组的中位数是否相等。Kruskal-Wallis检验是基于数据的秩而非原始数据值的，实质上是两独立样本时的Mann-Whitney检验在多个独立样本下的推广。</li><li><strong>Friedman检验</strong>：Friedman检验又被称之为双因素秩方差分析，是非参数版的anova2。同anova2一样，待检验的数据也必须是均衡的。但是需要特别注意的是，Friedman检验和anova2检验不完全相同，anova2同时注意两个因素对待检验数据的影响，但是，Friedman检验只注重2个因素中的其中一个对待检验数据的影响，而另一个因素则是用来区分区组用的。（见<a href="https://blog.csdn.net/weixin_46271668/article/details/124339774">Frideman检验及matlab代码_friedman aligned rank代码检验-CSDN博客</a>）</li></ul><h2 id="anova分析的分类"><a class="markdownIt-Anchor" href="#anova分析的分类"></a> ANOVA分析的分类</h2><h3 id="根据因子数量分类"><a class="markdownIt-Anchor" href="#根据因子数量分类"></a> 根据因子数量分类</h3><ul><li><strong>单因子方差分析</strong>：用于一个因子下多个水平的均值比较。</li><li><strong>双因子方差分析</strong>：用于两个因子及其交互作用的分析。</li><li><strong>多因子方差分析</strong>：用于三个或更多因子的主效应和交互作用分析。</li></ul><h4 id="单因子方差分析"><a class="markdownIt-Anchor" href="#单因子方差分析"></a> 单因子方差分析</h4><p>单因子方差分析用于比较多个组的均值，只涉及一个因子（自变量）。</p><p><strong>例如</strong>：为了研究氮肥料使用量对水稻产量的影响，氮肥用量设低、中、高三个水平，分布使用N1，N2和N3表示</p><h4 id="双因子方差分析"><a class="markdownIt-Anchor" href="#双因子方差分析"></a> 双因子方差分析</h4><p>双因素方差分析分为<strong>无交互作用/有交互作用</strong>，对于<strong>有交互作用</strong>的双因素方差分析，则需要做<strong>重复实验</strong></p><p><strong>例如</strong>：为了研究肥料使用量对水稻产量的影响，某研究所做了氮（因素A）、磷（因素B）两种肥料施用量的二因素试验。氮肥用量设低、中、高三个水平，分布使用N1，N2和N3表示；磷肥用量设低、高2个水平，分别用P1，P2表示。</p><h4 id="多因子方差分析"><a class="markdownIt-Anchor" href="#多因子方差分析"></a> 多因子方差分析</h4><p><strong>定义</strong>：多因子方差分析涉及三个或更多因子，研究它们对因变量的影响及其交互作用。</p><p><strong>例如</strong>：研究教学方法、学习时间和学生背景（如性别、年龄）对考试成绩的影响。</p><h3 id="根据因子类型分类"><a class="markdownIt-Anchor" href="#根据因子类型分类"></a> 根据因子类型分类</h3><h4 id="固定效应模式fixed-effects-models"><a class="markdownIt-Anchor" href="#固定效应模式fixed-effects-models"></a> 固定效应模式（Fixed-effects models）</h4><p>用于方差分析模型中所考虑的因子为固定的情况，换言之，其所感兴趣的因子是来自于特定的范围。</p><p>例如，要比较五种不同的汽车销售量的差异，感兴趣的因子为五种不同的汽车，反因变量为销售量，该命题即限定了特定范围，因此模型的推论结果也将全部着眼在五种汽车的销售差异上，故此种状况下的因子便称为固定效应。</p><h4 id="随机效应模式random-effects-models"><a class="markdownIt-Anchor" href="#随机效应模式random-effects-models"></a> 随机效应模式（Random-effects models）</h4><p>不同于固定效应模式中的因子特定性，在随机效应中所考量的因子是来自于所有可能的母群体中的一组样本，因子方差分析所推论的并非着眼在所选定的因子上，而是推论到因子背后的母群体。</p><p>例如，借由一间拥有全部车厂种类的二手车公司，从所有车厂中随机挑选5种车厂品牌，用于比较其销售量的差异，最后推论到这间二手公司的销售状况。因此在随机效应模型下，研究者所关心的并非局限在所选定的因子上，而是希望借由这些因子推论<strong>背后的母群体特征</strong>。</p><h4 id="混合效应模式mixed-effects-models"><a class="markdownIt-Anchor" href="#混合效应模式mixed-effects-models"></a> 混合效应模式（Mixed-effects models）</h4><p>此种混合效应不会出现在单因子方差分析中，当双因子或多因子方差分析同时存在固定效应与随机效应时，此种模型便是典型的混合型模式。</p><h2 id="anova-分析的计算原理"><a class="markdownIt-Anchor" href="#anova-分析的计算原理"></a> ANOVA 分析的计算原理</h2><p>Anova的核心思想是将总体方差分解为两部分：</p><ol><li>组间方差（Between-group variance）：反映不同组别之间的差异。</li><li>组内方差（Within-group variance）：反映每个组内部的随机变异。</li></ol><p>Anova通过比较这两种方差，计算F统计量：</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mtext>组间方差</mtext><mtext>组内方差</mtext></mfrac></mstyle></mrow><annotation encoding="application/x-tex">F = \dfrac{\text{组间方差}}{\text{组内方差}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.04633em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord cjk_fallback">组内方差</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord cjk_fallback">组间方差</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><p>这里的方差等于平方和除以自由度，组间的自由度为(组数-1)，组内自由度为组数*（样本量-1），方差分析各组的样本量可以不一样。</p><p><strong>如果F值较大，说明组间差异显著大于组内随机变异，我们就有理由认为各组之间存在真实差异</strong>。</p><p>具体公式：</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240902174356-89vlhqe.png"></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240902174400-ezackyr.png"></div></div><p>‍</p><h2 id="anova的应用步骤"><a class="markdownIt-Anchor" href="#anova的应用步骤"></a> Anova的应用步骤</h2><ol><li><p>提出假设：</p><ul><li>零假设（H0）：所有组别的均值相等</li><li>备择假设（H1）：至少有两个组别的均值不相等</li></ul></li><li><p>收集数据并计算F值</p></li><li><p>确定显著性水平（通常为0.05）</p></li><li><p>比较计算得到的F值与临界F值</p></li><li><p>得出结论：如果计算的F值大于临界F值，则拒绝零假设，认为存在显著差异</p></li></ol><h2 id="anova的代码实现"><a class="markdownIt-Anchor" href="#anova的代码实现"></a> Anova的代码实现</h2><h3 id="matlab"><a class="markdownIt-Anchor" href="#matlab"></a> Matlab</h3><p>文档：<a href="https://ww2.mathworks.cn/help/stats/analysis-of-variance-and-covariance_zh_CN.html">方差与协方差分析 - MATLAB &amp; Simulink - MathWorks 中国</a></p><p>相关函数：anova、anova1、anova2、anovan</p><p>anova函数是Matlab 2022b新出的函数，可以直接执行单因素和多因素方差分析，不需要再区别使用anova1、anova2、anovan。</p><h4 id="单因素方差分析"><a class="markdownIt-Anchor" href="#单因素方差分析"></a> 单因素方差分析</h4><p>加载爆米花产量数据：数据为6×3 的矩阵，包含三种不同品牌的爆米花产量观测值（以杯为单位的）</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">load popcorn.mat</span><br><span class="line">popcorn</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">popcorn =</span><br><span class="line"></span><br><span class="line">    <span class="number">5.5000</span>    <span class="number">4.5000</span>    <span class="number">3.5000</span></span><br><span class="line">    <span class="number">5.5000</span>    <span class="number">4.5000</span>    <span class="number">4.0000</span></span><br><span class="line">    <span class="number">6.0000</span>    <span class="number">4.0000</span>    <span class="number">3.0000</span></span><br><span class="line">    <span class="number">6.5000</span>    <span class="number">5.0000</span>    <span class="number">4.0000</span></span><br><span class="line">    <span class="number">7.0000</span>    <span class="number">5.5000</span>    <span class="number">5.0000</span></span><br><span class="line">    <span class="number">7.0000</span>    <span class="number">5.0000</span>    <span class="number">4.5000</span></span><br></pre></td></tr></table></figure><p>进行单因素方差分析，检验爆米花产量不受爆米花品牌影响的零假设。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">factors = [<span class="built_in">repmat</span>(<span class="string">&quot;Gourmet&quot;</span>,<span class="number">6</span>,<span class="number">1</span>); <span class="built_in">repmat</span>(<span class="string">&quot;National&quot;</span>,<span class="number">6</span>,<span class="number">1</span>); <span class="built_in">repmat</span>(<span class="string">&quot;Generic&quot;</span>,<span class="number">6</span>,<span class="number">1</span>)];</span><br><span class="line">aov = anova(factors,popcorn(:),<span class="string">&quot;FactorNames&quot;</span>,<span class="string">&quot;Brand&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">aov = </span><br><span class="line"></span><br><span class="line"><span class="number">1</span>-way anova, constrained (Type III) sums of squares.</span><br><span class="line"></span><br><span class="line">Y ~ <span class="number">1</span> + Brand</span><br><span class="line"></span><br><span class="line">             SumOfSquares    DF    MeanSquares     F        pValue  </span><br><span class="line">             ____________    __    ___________    ____    __________</span><br><span class="line"></span><br><span class="line">    Brand       <span class="number">15.75</span>         <span class="number">2</span>        <span class="number">7.875</span>      <span class="number">18.9</span>    <span class="number">7.9603e-05</span></span><br><span class="line">    Error        <span class="number">6.25</span>        <span class="number">15</span>      <span class="number">0.41667</span>                      </span><br><span class="line">    Total          <span class="number">22</span>        <span class="number">17</span>                                   </span><br></pre></td></tr></table></figure><p>F 统计量的p 值足够小，可以在 0.01 的显著性水平上拒绝零假设。因此，爆米花品牌对爆米花产量有显著影响。</p><p>但是我们只知道爆米花品牌对爆米花产量有显著影响，依然不知道这几个品牌两两之间的爆米花产量有显著差异。</p><p><strong>可以再进行多重比较</strong>：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">multcompare(aov)</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">  <span class="number">3</span>×<span class="number">6</span> <span class="built_in">table</span></span><br><span class="line"></span><br><span class="line">      Group1        Group2      MeanDifference    MeanDifferenceLower    MeanDifferenceUpper      pValue  </span><br><span class="line">    __________    __________    ______________    ___________________    ___________________    __________</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;Gourmet&quot;</span>     <span class="string">&quot;National&quot;</span>          <span class="number">1.5</span>               <span class="number">0.53198</span>                 <span class="number">2.468</span>            <span class="number">0.0029743</span></span><br><span class="line">    <span class="string">&quot;Gourmet&quot;</span>     <span class="string">&quot;Generic&quot;</span>          <span class="number">2.25</span>                 <span class="number">1.282</span>                 <span class="number">3.218</span>           <span class="number">6.3839e-05</span></span><br><span class="line">    <span class="string">&quot;National&quot;</span>    <span class="string">&quot;Generic&quot;</span>          <span class="number">0.75</span>              <span class="number">-0.21802</span>                 <span class="number">1.718</span>              <span class="number">0.14337</span></span><br></pre></td></tr></table></figure><p>可以知道品牌1和品牌2、品牌1和品牌3有显著差异，品牌2和品牌3无显著差异</p><p>还可以绘制平均值差异，交互式查看组间差异</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plotComparisons(aov);</span><br></pre></td></tr></table></figure><p>蓝色代表的是当前选择的组，红色代表是与当前组显著差异的组，灰色代表的是无显著差异的组</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240902202544-r92jo13.png"></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240902202602-ngxdzj2.png"></div></div><p><strong>绘制箱式图</strong></p><p>直观展示各个品牌的爆米花产量</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">boxchart(aov)</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240902200328-nuddw5q.png"></div></div><h4 id="双因素方差分析"><a class="markdownIt-Anchor" href="#双因素方差分析"></a> 双因素方差分析</h4><p>加载爆米花产量数据：数据为6×3 的矩阵，包含三种不同品牌的爆米花产量观测值（以杯为单位的）</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">load popcorn.mat</span><br><span class="line">popcorn</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">popcorn =</span><br><span class="line"></span><br><span class="line">    <span class="number">5.5000</span>    <span class="number">4.5000</span>    <span class="number">3.5000</span></span><br><span class="line">    <span class="number">5.5000</span>    <span class="number">4.5000</span>    <span class="number">4.0000</span></span><br><span class="line">    <span class="number">6.0000</span>    <span class="number">4.0000</span>    <span class="number">3.0000</span></span><br><span class="line">    <span class="number">6.5000</span>    <span class="number">5.0000</span>    <span class="number">4.0000</span></span><br><span class="line">    <span class="number">7.0000</span>    <span class="number">5.5000</span>    <span class="number">5.0000</span></span><br><span class="line">    <span class="number">7.0000</span>    <span class="number">5.0000</span>    <span class="number">4.5000</span></span><br></pre></td></tr></table></figure><p>使用<code>repmat</code>和<code>table</code>函数创建一个表格，其中包含品牌、爆米花机类型和爆米花产量的变量。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brand = [<span class="built_in">repmat</span>(<span class="string">&quot;Gourmet&quot;</span>,<span class="number">6</span>,<span class="number">1</span>);<span class="built_in">repmat</span>(<span class="string">&quot;National&quot;</span>,<span class="number">6</span>,<span class="number">1</span>);<span class="built_in">repmat</span>(<span class="string">&quot;Generic&quot;</span>,<span class="number">6</span>,<span class="number">1</span>)];</span><br><span class="line">poppertype = [<span class="built_in">repmat</span>(<span class="string">&quot;air&quot;</span>,<span class="number">3</span>,<span class="number">1</span>);<span class="built_in">repmat</span>(<span class="string">&quot;oil&quot;</span>,<span class="number">3</span>,<span class="number">1</span>);<span class="built_in">repmat</span>(<span class="string">&quot;air&quot;</span>,<span class="number">3</span>,<span class="number">1</span>);<span class="built_in">repmat</span>(<span class="string">&quot;oil&quot;</span>,<span class="number">3</span>,<span class="number">1</span>);<span class="built_in">repmat</span>(<span class="string">&quot;air&quot;</span>,<span class="number">3</span>,<span class="number">1</span>);<span class="built_in">repmat</span>(<span class="string">&quot;oil&quot;</span>,<span class="number">3</span>,<span class="number">1</span>)];</span><br><span class="line">tbl = <span class="built_in">table</span>(brand,poppertype,popcorn(:),VariableNames=[<span class="string">&quot;Brand&quot;</span> <span class="string">&quot;PopperType&quot;</span> <span class="string">&quot;PopcornYield&quot;</span>]);</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">tbl =</span><br><span class="line"></span><br><span class="line">  <span class="number">18</span>×<span class="number">3</span> <span class="built_in">table</span></span><br><span class="line"></span><br><span class="line">      Brand       PopperType    PopcornYield</span><br><span class="line">    __________    __________    ____________</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;Gourmet&quot;</span>       <span class="string">&quot;air&quot;</span>           <span class="number">5.5</span>   </span><br><span class="line">    <span class="string">&quot;Gourmet&quot;</span>       <span class="string">&quot;air&quot;</span>           <span class="number">5.5</span>   </span><br><span class="line">    <span class="string">&quot;Gourmet&quot;</span>       <span class="string">&quot;air&quot;</span>             <span class="number">6</span>   </span><br><span class="line">    <span class="string">&quot;Gourmet&quot;</span>       <span class="string">&quot;oil&quot;</span>           <span class="number">6.5</span>   </span><br><span class="line">    <span class="string">&quot;Gourmet&quot;</span>       <span class="string">&quot;oil&quot;</span>             <span class="number">7</span>   </span><br><span class="line">    <span class="string">&quot;Gourmet&quot;</span>       <span class="string">&quot;oil&quot;</span>             <span class="number">7</span>   </span><br><span class="line">    <span class="string">&quot;National&quot;</span>      <span class="string">&quot;air&quot;</span>           <span class="number">4.5</span>   </span><br><span class="line">    <span class="string">&quot;National&quot;</span>      <span class="string">&quot;air&quot;</span>           <span class="number">4.5</span>   </span><br><span class="line">    <span class="string">&quot;National&quot;</span>      <span class="string">&quot;air&quot;</span>             <span class="number">4</span>   </span><br><span class="line">    <span class="string">&quot;National&quot;</span>      <span class="string">&quot;oil&quot;</span>             <span class="number">5</span>   </span><br><span class="line">    <span class="string">&quot;National&quot;</span>      <span class="string">&quot;oil&quot;</span>           <span class="number">5.5</span>   </span><br><span class="line">    <span class="string">&quot;National&quot;</span>      <span class="string">&quot;oil&quot;</span>             <span class="number">5</span>   </span><br><span class="line">    <span class="string">&quot;Generic&quot;</span>       <span class="string">&quot;air&quot;</span>           <span class="number">3.5</span>   </span><br><span class="line">    <span class="string">&quot;Generic&quot;</span>       <span class="string">&quot;air&quot;</span>             <span class="number">4</span>   </span><br><span class="line">    <span class="string">&quot;Generic&quot;</span>       <span class="string">&quot;air&quot;</span>             <span class="number">3</span>   </span><br><span class="line">    <span class="string">&quot;Generic&quot;</span>       <span class="string">&quot;oil&quot;</span>             <span class="number">4</span>   </span><br><span class="line">    <span class="string">&quot;Generic&quot;</span>       <span class="string">&quot;oil&quot;</span>             <span class="number">5</span>   </span><br><span class="line">    <span class="string">&quot;Generic&quot;</span>       <span class="string">&quot;oil&quot;</span>           <span class="number">4.5</span>   </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>进行双因素方差分析，零假设设置为三个品牌和两种爆米花机的爆米花产量相同。</p><p>先假设品牌和爆米花机类型是独立的，没有交互作用</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aovLinear = anova(tbl,<span class="string">&quot;PopcornYield ~ Brand + PopperType&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">aovLinear = </span><br><span class="line"><span class="number">2</span>-way anova, constrained (Type III) sums of squares.</span><br><span class="line"></span><br><span class="line">PopcornYield ~ <span class="number">1</span> + Brand + PopperType</span><br><span class="line"></span><br><span class="line">                  SumOfSquares    DF    MeanSquares     F       pValue  </span><br><span class="line">                  ____________    __    ___________    ___    __________</span><br><span class="line"></span><br><span class="line">    Brand            <span class="number">15.75</span>         <span class="number">2</span>       <span class="number">7.875</span>        <span class="number">63</span>         <span class="number">1e-07</span></span><br><span class="line">    PopperType         <span class="number">4.5</span>         <span class="number">1</span>         <span class="number">4.5</span>        <span class="number">36</span>    <span class="number">3.2548e-05</span></span><br><span class="line">    Error             <span class="number">1.75</span>        <span class="number">14</span>       <span class="number">0.125</span>                    </span><br><span class="line">    Total               <span class="number">22</span>        <span class="number">17</span>                                </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>再假设品牌和爆米花机类型有交互作用</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aovInteraction = anova(tbl,<span class="string">&quot;PopcornYield ~ Brand + PopperType + Brand:PopperType&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">aovInteraction = </span><br><span class="line"><span class="number">2</span>-way anova, constrained (Type III) sums of squares.</span><br><span class="line"></span><br><span class="line">PopcornYield ~ <span class="number">1</span> + Brand*PopperType</span><br><span class="line"></span><br><span class="line">                        SumOfSquares    DF    MeanSquares     F        pValue  </span><br><span class="line">                        ____________    __    ___________    ____    __________</span><br><span class="line"></span><br><span class="line">    Brand                    <span class="number">15.75</span>       <span class="number">2</span>        <span class="number">7.875</span>      <span class="number">56.7</span>     <span class="number">7.679e-07</span></span><br><span class="line">    PopperType                 <span class="number">4.5</span>       <span class="number">1</span>          <span class="number">4.5</span>      <span class="number">32.4</span>    <span class="number">0.00010037</span></span><br><span class="line">    Brand:PopperType      <span class="number">0.083333</span>       <span class="number">2</span>     <span class="number">0.041667</span>       <span class="number">0.3</span>       <span class="number">0.74622</span></span><br><span class="line">    Error                   <span class="number">1.6667</span>      <span class="number">12</span>      <span class="number">0.13889</span>                      </span><br><span class="line">    Total                       <span class="number">22</span>      <span class="number">17</span>                                   </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>aovInteraction的方差分析模型包括交互项<code>Brand:PopperType</code>。Brand:PopperType项的p 值大于 0.05。因此，<strong>没有足够证据</strong>证明品牌和爆米花机类型对爆米花产量有交互影响。</p><p><code>anova</code>对象的<code>Metrics</code>属性提供了有关方差分析模型拟合度的统计数据。要确定哪种模型更适合响应数据，请显示<code>aovLinear</code>和<code>aovInteraction</code> 的<code>Metrics</code>属性。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aovLinear.Metrics</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ans</span>=<span class="number">1</span>×<span class="number">7</span> <span class="built_in">table</span></span><br><span class="line">     MSE      RMSE      SSE      SSR     SST    RSquared    AdjustedRSquared</span><br><span class="line">    _____    _______    ____    _____    ___    ________    ________________</span><br><span class="line"></span><br><span class="line">    <span class="number">0.125</span>    <span class="number">0.35355</span>    <span class="number">1.75</span>    <span class="number">20.25</span>    <span class="number">22</span>     <span class="number">0.92045</span>         <span class="number">0.88731</span>   </span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aovInteraction.Metrics</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ans</span>=<span class="number">1</span>×<span class="number">7</span> <span class="built_in">table</span></span><br><span class="line">      MSE       RMSE       SSE       SSR      SST    RSquared    AdjustedRSquared</span><br><span class="line">    _______    _______    ______    ______    ___    ________    ________________</span><br><span class="line"></span><br><span class="line">    <span class="number">0.13889</span>    <span class="number">0.37268</span>    <span class="number">1.6667</span>    <span class="number">20.333</span>    <span class="number">22</span>     <span class="number">0.92424</span>         <span class="number">0.78535</span>   </span><br></pre></td></tr></table></figure><p>线性模型的均方误差（MSE）略小于交互模型。线性模型的调整 R 平方值更高。这些指标共同表明，线性模型比交互模型更适合爆米花数据。</p><h4 id="随机效应anova"><a class="markdownIt-Anchor" href="#随机效应anova"></a> 随机效应ANOVA</h4><p>我记录了大鼠不同行为（移动、饲养、梳理…）的钙信号（使用纤维光度计），每只大鼠的每种行为都有很多次，每次记录时间为 5 分钟（每次记录相隔几天）。</p><p>分析时间、行为、大鼠编号、每次记录对钙信号的影响</p><p>由于每只老鼠都是一个随机因素，每次会话也是一个随机因素，所以将其设置为随机效应因子</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 生成随机数据</span></span><br><span class="line">tbl = <span class="built_in">table</span>(<span class="built_in">randn</span>(<span class="number">100</span>,<span class="number">1</span>), (<span class="number">1</span>:<span class="number">100</span>)&#x27;, randi([<span class="number">1</span>,<span class="number">3</span>],<span class="number">100</span>,<span class="number">1</span>), ...</span><br><span class="line">            randi([<span class="number">1</span>,<span class="number">10</span>],<span class="number">100</span>,<span class="number">1</span>), randi([<span class="number">1</span>,<span class="number">20</span>],<span class="number">100</span>,<span class="number">1</span>), ...</span><br><span class="line">            <span class="string">&#x27;VariableNames&#x27;</span>, &#123;<span class="string">&#x27;CalciumResponse&#x27;</span>, <span class="string">&#x27;Time&#x27;</span>, <span class="string">&#x27;Behavior&#x27;</span>, <span class="string">&#x27;Rat&#x27;</span>, <span class="string">&#x27;Session&#x27;</span>&#125;);</span><br><span class="line">tbl.Behavior = categorical(tbl.Behavior);</span><br><span class="line">tbl.Rat = categorical(tbl.Rat);</span><br><span class="line">tbl.Session = categorical(tbl.Session);</span><br><span class="line"><span class="comment">% Perform  ANOVA with Random Effects</span></span><br><span class="line">aov = anova(tbl, <span class="string">&#x27;CalciumResponse&#x27;</span>, ...</span><br><span class="line">            <span class="string">&#x27;CategoricalFactors&#x27;</span>, [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], ...</span><br><span class="line">            <span class="string">&#x27;RandomFactors&#x27;</span>, [<span class="number">3</span>,<span class="number">4</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">aov = anova(tbl, <span class="string">&#x27;CalciumResponse ~ Time * Behavior + Rat + Session&#x27;</span>, ...</span><br><span class="line">            <span class="string">&#x27;CategoricalFactors&#x27;</span>, [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], ...</span><br><span class="line">            <span class="string">&#x27;RandomFactors&#x27;</span>, [<span class="number">3</span>,<span class="number">4</span>]);</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">aov = </span><br><span class="line"></span><br><span class="line">N-way anova, constrained (Type III) sums of squares.</span><br><span class="line"></span><br><span class="line">CalciumResponse ~ <span class="number">1</span> + Rat + Session + Time*Behavior</span><br><span class="line"></span><br><span class="line">                     SumOfSquares    DF    MeanSquares       F       pValue </span><br><span class="line">                     ____________    __    ___________    _______    _______</span><br><span class="line"></span><br><span class="line">    Time               <span class="number">0.63547</span>        <span class="number">1</span>      <span class="number">0.63547</span>      <span class="number">0.59586</span>    <span class="number">0.44292</span></span><br><span class="line">    Behavior            <span class="number">1.2215</span>        <span class="number">2</span>      <span class="number">0.61076</span>      <span class="number">0.57269</span>    <span class="number">0.56678</span></span><br><span class="line">    Rat                 <span class="number">8.0684</span>        <span class="number">9</span>      <span class="number">0.89649</span>      <span class="number">0.84061</span>    <span class="number">0.58172</span></span><br><span class="line">    Session             <span class="number">16.935</span>       <span class="number">19</span>      <span class="number">0.89133</span>      <span class="number">0.83577</span>    <span class="number">0.65822</span></span><br><span class="line">    Time:Behavior       <span class="number">1.1771</span>        <span class="number">2</span>      <span class="number">0.58853</span>      <span class="number">0.55184</span>    <span class="number">0.57852</span></span><br><span class="line">    Error               <span class="number">70.387</span>       <span class="number">66</span>       <span class="number">1.0665</span>                      </span><br><span class="line">    Total               <span class="number">97.922</span>       <span class="number">99</span>   </span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[~,ems] = stats(aov)</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ems =</span><br><span class="line"></span><br><span class="line">  <span class="number">6</span>×<span class="number">5</span> <span class="built_in">table</span></span><br><span class="line"></span><br><span class="line">                       Type                      ExpectedMeanSquares                    MeanSquaresDenominator    DFDenominator    FDenominator</span><br><span class="line">                     ________    ___________________________________________________    ______________________    _____________    ____________</span><br><span class="line"></span><br><span class="line">    Time             <span class="string">&quot;fixed&quot;</span>     <span class="string">&quot;54736.8*Q(Time)+18245.6*Q(Time:Behavior)+V(Error)&quot;</span>            <span class="number">1.0665</span>                  <span class="number">66</span>          MS(Error)  </span><br><span class="line">    Behavior         <span class="string">&quot;fixed&quot;</span>     <span class="string">&quot;6.00085*Q(Behavior)+V(Error)&quot;</span>                                 <span class="number">1.0665</span>                  <span class="number">66</span>          MS(Error)  </span><br><span class="line">    Rat              <span class="string">&quot;random&quot;</span>    <span class="string">&quot;7.83495*V(Rat)+V(Error)&quot;</span>                                      <span class="number">1.0665</span>                  <span class="number">66</span>          MS(Error)  </span><br><span class="line">    Session          <span class="string">&quot;random&quot;</span>    <span class="string">&quot;4.30322*V(Session)+V(Error)&quot;</span>                                  <span class="number">1.0665</span>                  <span class="number">66</span>          MS(Error)  </span><br><span class="line">    Time:Behavior    <span class="string">&quot;fixed&quot;</span>     <span class="string">&quot;20371.8*Q(Time:Behavior)+V(Error)&quot;</span>                            <span class="number">1.0665</span>                  <span class="number">66</span>          MS(Error)  </span><br><span class="line">    Error            <span class="string">&quot;random&quot;</span>    <span class="string">&quot;V(Error)&quot;</span>                                                                                                  </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h2><ul><li>matlab实现anova分析：<a href="https://ww2.mathworks.cn/help/stats/anova.html">Analysis of variance (ANOVA) results - MATLAB - MathWorks 中国</a></li><li><a href="https://www.bilibili.com/video/BV1V24y1j7z8/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b4a1fcb6dce305e26d8d16d9cbb71304">什么是ANOVA和F值｜说人话的统计学_哔哩哔哩_bilibili</a></li><li><a href="https://zh.wikipedia.org/wiki/%E6%96%B9%E5%B7%AE%E5%88%86%E6%9E%90">方差分析 - 维基百科，自由的百科全书 (wikipedia.org)</a></li><li><a href="https://zhuanlan.zhihu.com/p/503071438">方差分析（ANOVA）分类、应用举例及matlab代码 - 知乎 (zhihu.com)</a></li></ul>]]></content>
    
    
    <summary type="html">ANOVA（Analysis of Variance，方差分析）是一种统计方法，在某些场合也被称为F检验（不过F检验指的实际是方差齐性检验），它用于比较三个或更多样本组之间的均值差异。它通过分析组内和组间的方差，来判断不同组别之间的均值是否存在显著差异。ANOVA的基本思想是，如果不同组的均值存在显著差异，那么这些组之间的方差应当大于组内的方差。</summary>
    
    
    
    <category term="统计分析" scheme="http://achuan-2.top/categories/%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90/"/>
    
    
  </entry>
  
  <entry>
    <title>Matlab 深度学习丨基于ResNet的新冠肺炎X光胸片检测</title>
    <link href="http://achuan-2.top/post/matlab-deep-learning-gun-new-coronary-pneumonia-x-ray-chest-test-based-on-resnet-z1ibtf8.html"/>
    <id>http://achuan-2.top/post/matlab-deep-learning-gun-new-coronary-pneumonia-x-ray-chest-test-based-on-resnet-z1ibtf8.html</id>
    <published>2024-08-11T15:00:00.000Z</published>
    <updated>2024-08-11T15:00:02.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2><p>本笔记改编自《深度学习经典案例解析：基于MATLAB》一书中的内容，使用ResNet网络来对X光胸片进行检测，判断是否有肺炎。</p><p>不过老实说，这个数据集数量太少。并且我自己也无法通过肉眼分辨X光胸片到底有没有肺炎。</p><p>所以本笔记更多的是介绍Matlab 如何调用ResNet、如何做数据增强等知识点。</p><h2 id="背景"><a class="markdownIt-Anchor" href="#背景"></a> 背景</h2><h3 id="数据集"><a class="markdownIt-Anchor" href="#数据集"></a> 数据集</h3><p>在新冠肺炎诊断过程中，除了病毒核酸检测外，X射线的胸正位图像也是其中一个重要环节。</p><p>在本节中，我们将使用开源胸片数据集，训练一个ResNet网络，用以分类一张胸片是属于健康人，还是属于新冠肺炎患者，以期帮助医生更准确地做出判断。所使用的图像数据集由Adrian Rosebrock博士发布，可以直接从网址（<a href="https://www.pyimagesearch.com/2020/03/16/detecting-covid-19-in-x-ray-images-with-keras-tensorflow-and-deep-learning/">https://www.pyimagesearch.com/2020/03/16/detecting-covid-19-in-x-ray-images-with-keras-tensorflow-and-deep-learning/</a>）下载。其中包含25张健康人胸片和25张新冠肺炎患者胸片，原作者还提供了Python的Keras库和VGG16网络的代码，本文只用了其中的数据集，ResNet网络程序由MATLAB实现。</p><h3 id="resnet网络简介"><a class="markdownIt-Anchor" href="#resnet网络简介"></a> ResNet网络简介</h3><p>ResNet是深度残差网络（Residual Network）的简称，由微软的何凯明等人于2015年提出，一举夺得当年ImageNet大规模视觉识别竞赛图像分类和物体识别的冠军。其核心思想是在每2个网络层之间加入一个残差连接，缓解深层网络中的梯度消失问题，使得训练数百甚至数千层成为可能。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240803184018-1xfdt57.png"></div></div><p>在图像处理领域，一般认为神经网络更深的网络层能够提取出更加“高级”的图像特征。为了实现先进的性能，网络往往都需要数十甚至数百层，此时，梯度消失和梯度爆炸问题成为训练深层网络的一大障碍，可能导致网络无法收敛。通过在常规网络中引入残差连接，极大地缓解了网络梯度消失的问题。除此之外，残差连接还具有实现简单、计算开销小、对原有网络结构影响小等优点。因此，无论在图像处理领域，还是在自然语言处理领域，现有的很多最先进的深度神经网络都将残差连接作为一种常用技巧。</p><h2 id="实战笔记"><a class="markdownIt-Anchor" href="#实战笔记"></a> 实战笔记</h2><h3 id="加载数据集"><a class="markdownIt-Anchor" href="#加载数据集"></a> 加载数据集</h3><p>通过资源管理器查看数据集</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-08-03_18-50-51-20240803185101-4pmue85.png"></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-08-03_18-51-25-20240803185127-yxucltu.png"></div></div><p>加载数据集</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 加载图像数据</span></span><br><span class="line">dataset_path = <span class="string">&#x27;dataset&#x27;</span>;</span><br><span class="line"></span><br><span class="line">imds = imageDatastore(dataset_path,...</span><br><span class="line">    <span class="string">&#x27;IncludeSubfolders&#x27;</span>, <span class="built_in">true</span>, ...</span><br><span class="line">    <span class="string">&#x27;LabelSource&#x27;</span>, <span class="string">&#x27;foldernames&#x27;</span>);</span><br><span class="line">total_split = countEachLabel(imds);</span><br><span class="line">total_split </span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">Label</th><th style="text-align:center">Count</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">covid</td><td style="text-align:center">25</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">normal</td><td style="text-align:center">25</td></tr></tbody></table><p>查看数据集</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 随机显示数据集中的部分图像</span></span><br><span class="line">numPreviewImages = <span class="number">4</span>; <span class="comment">% 每类预览多少张</span></span><br><span class="line">imdsPreview = splitEachLabel(imds, numPreviewImages, <span class="string">&#x27;randomize&#x27;</span>);</span><br><span class="line"><span class="built_in">figure</span></span><br><span class="line">tiledlayout(<span class="string">&#x27;flow&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="built_in">numel</span>(imdsPreview.Labels)</span><br><span class="line">    nexttile</span><br><span class="line">    I = readimage(imdsPreview,<span class="built_in">i</span>);</span><br><span class="line">    imshow(I)</span><br><span class="line">    title(imdsPreview.Labels(<span class="built_in">i</span>),fontsize = <span class="number">8</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/figure_0-20240803184911-kesbqul.png"></div></div><h3 id="分割测试集和训练集"><a class="markdownIt-Anchor" href="#分割测试集和训练集"></a> 分割测试集和训练集</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 分割测试集和训练集</span></span><br><span class="line">[img_ds_Train,img_ds_Test] = splitEachLabel(imds,<span class="number">0.7</span>,<span class="string">&quot;randomized&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="加载预训练好的网络"><a class="markdownIt-Anchor" href="#加载预训练好的网络"></a> 加载预训练好的网络</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 确定训练数据中新冠图片标签类别数量：2类</span></span><br><span class="line">numClasses = <span class="built_in">numel</span>(categories(img_ds_Train.Labels));</span><br><span class="line"></span><br><span class="line"><span class="comment">% 加载ResNet50网络（注：该网络需要提前下载，当输入下面命令时按要求下载即可）</span></span><br><span class="line"></span><br><span class="line">net = imagePretrainedNetwork(<span class="string">&quot;resnet50&quot;</span>,NumClasses=numClasses); <span class="comment">% 将全连接层的分类数设置为与新数据中的分类数相同。</span></span><br><span class="line"></span><br><span class="line">analyzeNetwork(net)</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-08-03_18-58-03-20240803185811-yqhush0.png"></div></div><p>根据新数据设定新的全连接层的参数，</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net = setLearnRateFactor(net,<span class="string">&quot;fc1000/Weights&quot;</span>,<span class="number">10</span>);</span><br><span class="line">net = setLearnRateFactor(net,<span class="string">&quot;fc1000/Bias&quot;</span>,<span class="number">10</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="数据增强"><a class="markdownIt-Anchor" href="#数据增强"></a> 数据增强</h3><p>数据增强，目的是增加数据，增加模型鲁棒性</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 数据增强的参数</span></span><br><span class="line">augmenter = imageDataAugmenter(...</span><br><span class="line">    <span class="string">&#x27;RandRotation&#x27;</span>,[<span class="number">-5</span> <span class="number">5</span>],...</span><br><span class="line">    <span class="string">&#x27;RandXReflection&#x27;</span>,<span class="number">1</span>,...</span><br><span class="line">    <span class="string">&#x27;RandYReflection&#x27;</span>,<span class="number">1</span>,...</span><br><span class="line">    <span class="string">&#x27;RandXShear&#x27;</span>,[<span class="number">-0.05</span> <span class="number">0.05</span>],...</span><br><span class="line">    <span class="string">&#x27;RandYShear&#x27;</span>,[<span class="number">-0.05</span> <span class="number">0.05</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 将批量训练图像的大小调整为与输入层的大小相同</span></span><br><span class="line">aug_img_ds_train = augmentedImageDatastore([<span class="number">224</span> <span class="number">224</span>],img_ds_Train,<span class="string">&#x27;DataAugmentation&#x27;</span>,augmenter,<span class="string">&#x27;ColorPreprocessing&#x27;</span>,<span class="string">&#x27;gray2rgb&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 将批量测试图像的大小调整为与输入层的大小相同</span></span><br><span class="line">aug_img_ds_test = augmentedImageDatastore([<span class="number">224</span> <span class="number">224</span>], img_ds_Test,<span class="string">&#x27;ColorPreprocessing&#x27;</span>,<span class="string">&#x27;gray2rgb&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="对网络进行训练"><a class="markdownIt-Anchor" href="#对网络进行训练"></a> 对网络进行训练</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 对训练参数进行设置</span></span><br><span class="line">options = trainingOptions(<span class="string">&quot;adam&quot;</span>, ...</span><br><span class="line">    MiniBatchSize=<span class="number">8</span>, ...</span><br><span class="line">    MaxEpochs=<span class="number">30</span>, ...</span><br><span class="line">    Metrics=<span class="string">&quot;accuracy&quot;</span>, ...</span><br><span class="line">    InitialLearnRate=<span class="number">1e-4</span>, ...</span><br><span class="line">    LearnRateDropFactor=<span class="number">0.01</span>, ...</span><br><span class="line">    LearnRateDropPeriod=<span class="number">5</span>, ...</span><br><span class="line">    Shuffle=<span class="string">&quot;every-epoch&quot;</span>, ...</span><br><span class="line">    Verbose=<span class="built_in">false</span>, ...</span><br><span class="line">    Plots=<span class="string">&quot;training-progress&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% 用训练图像对网络进行训练</span></span><br><span class="line">netTransfer = trainnet(aug_img_ds_train,net,<span class="string">&quot;crossentropy&quot;</span>,options);</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-08-03_19-10-15-20240803191017-6jbxcbi.png"></div></div><h3 id="进行测试并查看结果"><a class="markdownIt-Anchor" href="#进行测试并查看结果"></a> 进行测试并查看结果</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">classNames = categories(imds.Labels)</span><br><span class="line">scores = minibatchpredict(netTransfer,aug_img_ds_test);</span><br><span class="line">YPred = scores2label(scores,classNames);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% 对训练好的网络采用验证数据集进行验证</span></span><br><span class="line"></span><br><span class="line">idx = randperm(<span class="built_in">numel</span>(aug_img_ds_test.Files),<span class="number">10</span>);</span><br><span class="line">imgs = read(aug_img_ds_test);</span><br><span class="line"><span class="built_in">figure</span></span><br><span class="line">tiledlayout(<span class="string">&quot;flow&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">10</span></span><br><span class="line">    nexttile</span><br><span class="line">    I = imgs&#123;idx(<span class="built_in">i</span>),<span class="number">1</span>&#125;&#123;<span class="number">1</span>&#125;;</span><br><span class="line">    imshow(I)</span><br><span class="line">    label = YPred(idx(<span class="built_in">i</span>));</span><br><span class="line">    title(string(label));</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-08-03_19-26-02-20240803192604-a9e5y8s.png"></div></div><p>计算分类准确率</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">YTest = img_ds_Test.Labels;</span><br><span class="line">accuracy = <span class="built_in">mean</span>(YPred == YTest)</span><br></pre></td></tr></table></figure><blockquote><p><code>accuracy = 0.9286</code></p></blockquote><p>创建并显示混淆矩阵</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">figure</span></span><br><span class="line">confusionchart(YTest,YPred)</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240803192545-hpj1afv.png"></div></div><h2 id="知识点"><a class="markdownIt-Anchor" href="#知识点"></a> 知识点</h2><ul><li><p>matlab如何调用预训练的ResNet网络</p><ul><li><p>官方提供了三个型号的resnet：<code>&quot;resnet18&quot;</code>、<code>&quot;resnet50&quot;</code>、<code>&quot;resnet101&quot;</code></p></li><li><p>Matlab 2024a起，推荐使用imagePretrainedNetwork来加载预训练模型，可以直接指定输出分类数目，更方便迁移学习</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net = imagePretrainedNetwork(<span class="string">&quot;resnet50&quot;</span>,NumClasses=numClasses);</span><br></pre></td></tr></table></figure></li></ul></li><li><p>matlab如何做数据增强</p><ul><li><p>augmentedImageDatastore</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 数据增强的参数</span></span><br><span class="line">augmenter = imageDataAugmenter(...</span><br><span class="line">    <span class="string">&#x27;RandRotation&#x27;</span>,[<span class="number">-5</span> <span class="number">5</span>],...</span><br><span class="line">    <span class="string">&#x27;RandXReflection&#x27;</span>,<span class="number">1</span>,...</span><br><span class="line">    <span class="string">&#x27;RandYReflection&#x27;</span>,<span class="number">1</span>,...</span><br><span class="line">    <span class="string">&#x27;RandXShear&#x27;</span>,[<span class="number">-0.05</span> <span class="number">0.05</span>],...</span><br><span class="line">    <span class="string">&#x27;RandYShear&#x27;</span>,[<span class="number">-0.05</span> <span class="number">0.05</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 将批量训练图像的大小调整为与输入层的大小相同</span></span><br><span class="line">aug_img_ds_train = augmentedImageDatastore([<span class="number">224</span> <span class="number">224</span>],img_ds_Train,<span class="string">&#x27;DataAugmentation&#x27;</span>,augmenter,<span class="string">&#x27;ColorPreprocessing&#x27;</span>,<span class="string">&#x27;gray2rgb&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 将批量测试图像的大小调整为与输入层的大小相同</span></span><br><span class="line">aug_img_ds_test = augmentedImageDatastore([<span class="number">224</span> <span class="number">224</span>], img_ds_Test,<span class="string">&#x27;ColorPreprocessing&#x27;</span>,<span class="string">&#x27;gray2rgb&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
    
    
    <summary type="html">本笔记改编自《深度学习经典案例解析：基于MATLAB》一书中的内容，使用ResNet网络来对X光胸片进行检测，判断是否有肺炎。

不过老实说，这个数据集数量太少。并且我自己也无法通过肉眼分辨X光胸片到底有没有肺炎。

所以本笔记更多的是介绍Matlab 如何调用ResNet、如何做数据增强等知识点。</summary>
    
    
    
    <category term="深度学习" scheme="http://achuan-2.top/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="Matlab" scheme="http://achuan-2.top/tags/Matlab/"/>
    
  </entry>
  
  <entry>
    <title>沉浸式翻译终于支持富文本翻译了</title>
    <link href="http://achuan-2.top/post/immersive-translation-finally-supports-rich-text-translation-z1hrao8.html"/>
    <id>http://achuan-2.top/post/immersive-translation-finally-supports-rich-text-translation-z1hrao8.html</id>
    <published>2024-08-10T02:42:52.000Z</published>
    <updated>2024-08-10T02:57:08.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>沉浸式翻译终于支持富文本翻译了，以后在网页读论文更舒服了，可以在翻译内容里，直接进行图的跳转</p></blockquote><p>没有富文本翻译</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-08-10_10-51-54-20240810105158-pxvcw1g.png"></div></div><p>富文本翻译</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-08-10_10-51-20-20240810105125-4clg5p9.png"></div></div>]]></content>
    
    
    <summary type="html">沉浸式翻译终于支持富文本翻译了，以后在网页读论文更舒服了，可以在翻译内容里，直接进行图的跳转</summary>
    
    
    
    <category term="其他笔记" scheme="http://achuan-2.top/categories/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="电脑技巧" scheme="http://achuan-2.top/tags/%E7%94%B5%E8%84%91%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>JS丨MutationObserver（DOM 变动观察器）</title>
    <link href="http://achuan-2.top/post/js-gun-mutationobserver-dom-change-observer-z1ygppd.html"/>
    <id>http://achuan-2.top/post/js-gun-mutationobserver-dom-change-observer-z1ygppd.html</id>
    <published>2024-08-09T05:07:20.000Z</published>
    <updated>2024-08-09T12:36:24.000Z</updated>
    
    <content type="html"><![CDATA[<p><code>MutationObserver</code> 可以观察 DOM 元素，并在检测到更改时触发回调。特别适用于监控元素的属性、子节点或者文本内容的变化。这个 API 提供了一个高效的机制来追踪这些变化，避免了频繁的轮询操作，可以提升代码性能。</p><h2 id="基本语法"><a class="markdownIt-Anchor" href="#基本语法"></a> 基本语法</h2><h3 id="1-创建-mutationobserver-实例"><a class="markdownIt-Anchor" href="#1-创建-mutationobserver-实例"></a> 1. <strong>创建</strong> <strong><code>MutationObserver</code></strong> <strong>实例</strong></h3><p>首先，需要创建一个 <code>MutationObserver</code> 实例，并传入一个回调函数，该回调函数将在监听的 DOM 变化时被调用。回调函数接受两个参数：</p><ul><li><p><code>mutationsList</code>：一个包含所有发生变化的 <code>MutationRecord</code> 对象的列表。</p><p><a href="https://dom.spec.whatwg.org/#mutationrecord">MutationRecord</a> 对象具有以下属性：</p><ul><li><p><code>type</code> —— 变动类型，以下类型之一：</p><ul><li><code>&quot;attributes&quot;</code>：特性被修改了，</li><li><code>&quot;characterData&quot;</code>：数据被修改了，用于文本节点，</li><li><code>&quot;childList&quot;</code>：添加/删除了子元素。</li></ul></li><li><p><code>target</code> —— 更改发生在何处：<code>&quot;attributes&quot;</code> 所在的元素，或 <code>&quot;characterData&quot;</code> 所在的文本节点，或 <code>&quot;childList&quot;</code> 变动所在的元素，</p></li><li><p><code>addedNodes/removedNodes</code> —— 添加/删除的节点，</p></li><li><p><code>previousSibling/nextSibling</code> —— 添加/删除的节点的上一个/下一个兄弟节点，</p></li><li><p><code>attributeName/attributeNamespace</code> —— 被更改的特性的名称/命名空间（用于 XML），</p></li><li><p><code>oldValue</code> —— 之前的值，仅适用于特性或文本更改，如果设置了相应选项 <code>attributeOldValue</code>/<code>characterDataOldValue</code>。</p></li></ul></li><li><p><code>observer</code>：指向 <code>MutationObserver</code> 实例本身的引用。</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function">(<span class="params">mutationsList, observer</span>) =&gt;</span> &#123;</span><br><span class="line">    mutationsList.<span class="title function_">forEach</span>(<span class="function"><span class="params">mutation</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(mutation); <span class="comment">// 处理每个 MutationRecord的回调函数</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="2-配置observe选项"><a class="markdownIt-Anchor" href="#2-配置observe选项"></a> 2. <strong>配置</strong><code>observe</code>选项</h3><p>在开始观察 DOM 变化之前，需要通过 <code>observe</code> 方法指定要观察的目标节点和相应的配置选项。</p><p><code>config</code> 是一个具有布尔选项的对象，该布尔选项表示“将对哪些更改做出反应”，配置选项包括：：</p><ul><li><code>childList</code> —— <code>node</code> 的直接子节点的更改，</li><li><code>subtree</code> —— <code>node</code> 的所有后代的更改，</li><li><code>attributes</code> —— <code>node</code> 的特性（attribute），</li><li><code>attributeFilter</code> —— 特性名称数组，只观察选定的特性。</li><li><code>characterData</code> —— 是否观察 <code>node.data</code>（文本内容），</li><li><code>attributeOldValue</code> —— 如果为 <code>true</code>，则将特性的旧值和新值都传递给回调（参见下文），否则只传新值（需要 <code>attributes</code> 选项），</li><li><code>characterDataOldValue</code> —— 如果为 <code>true</code>，则将 <code>node.data</code> 的旧值和新值都传递给回调（参见下文），否则只传新值（需要 <code>characterData</code> 选项）。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="attr">childList</span>: <span class="literal">true</span>,          <span class="comment">// 观察子节点的变化</span></span><br><span class="line">    <span class="attr">attributes</span>: <span class="literal">true</span>,         <span class="comment">// 观察属性的变化</span></span><br><span class="line">    <span class="attr">characterData</span>: <span class="literal">true</span>,      <span class="comment">// 观察文本数据的变化</span></span><br><span class="line">    <span class="attr">subtree</span>: <span class="literal">true</span>,            <span class="comment">// 观察所有后代节点的变化</span></span><br><span class="line">    <span class="attr">attributeOldValue</span>: <span class="literal">true</span>,  <span class="comment">// 记录属性变化前的值</span></span><br><span class="line">    <span class="attr">characterDataOldValue</span>: <span class="literal">true</span> <span class="comment">// 记录文本数据变化前的值</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="3-开始观察"><a class="markdownIt-Anchor" href="#3-开始观察"></a> 3. 开始观察</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">observer.<span class="title function_">observe</span>(targetNode, config);</span><br></pre></td></tr></table></figure><h3 id="4-停止观察"><a class="markdownIt-Anchor" href="#4-停止观察"></a> 4. <strong>停止观察</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">observer.<span class="title function_">disconnect</span>();</span><br></pre></td></tr></table></figure><h3 id="5-获取已观察的记录"><a class="markdownIt-Anchor" href="#5-获取已观察的记录"></a> 5. 获取已观察的记录</h3><p>返回自上次调用以来的所有 <code>MutationRecord</code> 对象。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mutations = observer.<span class="title function_">takeRecords</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="常见用例"><a class="markdownIt-Anchor" href="#常见用例"></a> <strong>常见用例</strong></h2><ul><li>动态内容的更新监控：比如监听笔记软件添加内容等操作，运行特定代码。</li><li>内容的监听：表单元素的变化监控。</li><li>属性变化的监听：如按钮状态、样式的变化。</li></ul><h2 id="示例代码"><a class="markdownIt-Anchor" href="#示例代码"></a> <strong>示例代码</strong></h2><p>监听「<strong>思源笔记代码块更改代码语言高亮</strong>」的操作，对代码语言进行排序</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数：监控dom变化</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">observeDomChange</span>(<span class="params">targetNode, callback</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> config = &#123; <span class="attr">childList</span>: <span class="literal">true</span>, <span class="attr">subtree</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">    <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function">(<span class="params">mutationsList</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> mutation <span class="keyword">of</span> mutationsList) &#123;</span><br><span class="line">            <span class="comment">// console.log(mutation.target.classList);</span></span><br><span class="line">            <span class="keyword">if</span> (mutation.<span class="property">type</span> === <span class="string">&#x27;childList&#x27;</span>) &#123;</span><br><span class="line">                <span class="comment">// console.log(mutation.target.classList);</span></span><br><span class="line">                <span class="title function_">callback</span>(mutation);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    observer.<span class="title function_">observe</span>(targetNode, config);</span><br><span class="line">    <span class="comment">// 返回observer，用于停止观察</span></span><br><span class="line">    <span class="comment">// observer.disconnect();</span></span><br><span class="line">    <span class="keyword">return</span> observer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用代码</span></span><br><span class="line"><span class="keyword">const</span> layoutCenter = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.layout__center&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> observer = <span class="title function_">observeDomChange</span>(layoutCenter, <span class="function">(<span class="params">mutation</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 监听代码列表的弹窗事件</span></span><br><span class="line">    <span class="keyword">if</span>(mutation.<span class="property">target</span>.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;protyle-util&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">const</span> codeList = mutation.<span class="property">target</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.b3-list--background&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(codeList)&#123;</span><br><span class="line">            <span class="keyword">const</span> firstChild = codeList.<span class="property">firstElementChild</span>;</span><br><span class="line">            <span class="title function_">sortLangList</span>([...recentlyCodeLang, ...topCodeLang], codeList, firstChild);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(codeList, <span class="string">&#x27;codeList&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">MutationObserver 可以观察 DOM 元素，并在检测到更改时触发回调。特别适用于监控元素的属性、子节点或者文本内容的变化。这个 API 提供了一个高效的机制来追踪这些变化，避免了频繁的轮询操作，可以提升代码性能。</summary>
    
    
    
    <category term="编程笔记" scheme="http://achuan-2.top/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="JS" scheme="http://achuan-2.top/tags/JS/"/>
    
  </entry>
  
  <entry>
    <title>Matlab 深度学习丨使用深度学习对网络摄像头图像进行分类</title>
    <link href="http://achuan-2.top/post/matlab-deep-learning-gun-use-deep-learning-to-classify-network-camera-images-kbghh.html"/>
    <id>http://achuan-2.top/post/matlab-deep-learning-gun-use-deep-learning-to-classify-network-camera-images-kbghh.html</id>
    <published>2024-07-14T09:26:32.000Z</published>
    <updated>2024-07-15T02:00:02.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>好久没有更Matlab和深度学习的笔记了，这次搬运一波Matlab深度学习的官方示例，使用 GoogleNet 来实时对相机采集的图片进行分类 立一个flag，以后一周更一篇Matlab和深度学习的笔记。</p></blockquote><h2 id="资料"><a class="markdownIt-Anchor" href="#资料"></a> 资料</h2><ul><li>使用深度学习对网络摄像头图像进行分类：<a href="https://ww2.mathworks.cn/help/deeplearning/ug/classify-images-from-webcam-using-deep-learning.html">https://ww2.mathworks.cn/help/deeplearning/ug/classify-images-from-webcam-using-deep-learning.html</a></li></ul><h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2><ul><li><p>使用webcam调用相机/网络摄像头进行拍摄获取图片</p></li><li><p>使用 GoogleNet 来对相机得到的图片进行分类</p></li><li><p>为了能够实时调用模型进行分类，使用循环不断获取相机的实时画面</p><ul><li>使用<code>h = figure;while ishandle(h)</code>可以通过关闭figure来结束循环，这个Tips可以学习下</li></ul></li></ul><h2 id="使用深度学习对网络摄像头图像进行分类"><a class="markdownIt-Anchor" href="#使用深度学习对网络摄像头图像进行分类"></a> 使用深度学习对网络摄像头图像进行分类</h2><p>此示例说明如何使用预训练的深度卷积神经网络 GoogLeNet 实时对来自网络摄像头的图像进行分类。</p><p>使用 MATLAB®、普通的网络摄像头和深度神经网络来识别周围环境中的对象。此示例使用 GoogLeNet，它是预训练的深度卷积神经网络（CNN 或 ConvNet），已基于超过一百万个图像进行训练，可以将图像分为 1000 个对象类别（例如键盘、咖啡杯、铅笔和多种动物）。您可以下载 GoogLeNet 并使用 MATLAB 实时连续处理相机图像。</p><p>GoogLeNet 已基于大量图像学习了丰富的特征表示。它以图像作为输入，然后输出图像中对象的标签以及每个对象类别的概率。您可以用周围的物品进行试验，以了解 GoogLeNet 对图像进行分类的准确程度。要了解有关网络对象分类的详细信息，可以实时显示排名前五的类的分数，而不是只显示最终的类决策。</p><h3 id="加载相机和预训练网络"><a class="markdownIt-Anchor" href="#加载相机和预训练网络"></a> 加载相机和预训练网络</h3><p>连接到相机并加载预训练的 GoogLeNet 网络。您可以在此步骤使用任何预训练网络。该示例需要 MATLAB Support Package for USB Webcams，以及 Deep Learning Toolbox™ Model <em>for GoogLeNet Network</em>。如果没有安装所需的支持包，软件会提供下载链接。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">camera = webcam;</span><br><span class="line">net = googlenet;</span><br></pre></td></tr></table></figure><p>如果要再次运行该示例，请先运行命令 <code>clear camera</code>，其中 <code>camera</code> 是与网络摄像头的连接。否则将出现错误，因为您不能创建与同一网络摄像头的另一连接。</p><h3 id="对相机快照进行分类"><a class="markdownIt-Anchor" href="#对相机快照进行分类"></a> 对相机快照进行分类</h3><p>要对图像进行分类，必须将其大小调整为网络的输入大小。获取网络的图像输入层的 <code>InputSize</code> 属性的前两个元素。图像输入层是网络的第一层。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inputSize = net.Layers(<span class="number">1</span>).InputSize(<span class="number">1</span>:<span class="number">2</span>)</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inputSize =</span><br><span class="line"></span><br><span class="line">   <span class="number">224</span>   <span class="number">224</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>显示来自相机的图像以及预测的标签及其概率。在调用 <code>classify</code> 之前，必须将图像大小调整为网络的输入大小。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">figure</span></span><br><span class="line">im = snapshot(camera);</span><br><span class="line">image(im)</span><br><span class="line">im = imresize(im,inputSize);</span><br><span class="line">[label,score] = classify(net,im);</span><br><span class="line">title(&#123;char(label),num2str(<span class="built_in">max</span>(score),<span class="number">2</span>)&#125;);</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/ClassifyImagesFromWebcamUsingDeepLearningExample_01-20240714172409-8yhwec3.png"></div></div><h3 id="连续对相机图像进行分类"><a class="markdownIt-Anchor" href="#连续对相机图像进行分类"></a> 连续对相机图像进行分类</h3><p>要连续对相机图像进行分类，请将前面的步骤放入一个循环。在图窗打开时运行该循环。要停止实时预测，只需关闭图窗。在每次迭代结束时使用 <code>drawnow</code> 更新图窗。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">h = <span class="built_in">figure</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ishandle(h)</span><br><span class="line">    im = snapshot(camera);</span><br><span class="line">    image(im)</span><br><span class="line">    im = imresize(im,inputSize);</span><br><span class="line">    [label,score] = classify(net,im);</span><br><span class="line">    title(&#123;char(label), num2str(<span class="built_in">max</span>(score),<span class="number">2</span>)&#125;);</span><br><span class="line">    drawnow</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h3 id="显示排名靠前的预测值"><a class="markdownIt-Anchor" href="#显示排名靠前的预测值"></a> 显示排名靠前的预测值</h3><p>预测出的类可能快速更改。因此，将排名靠前的预测值显示在一起会有所帮助。您可以通过绘制预测分数靠前的类来显示排名前五的预测值及其概率。</p><p>对相机的快照进行分类。显示来自相机的图像以及预测的标签及其概率。使用 <code>classify</code> 函数的 <code>score</code> 输出显示排名前五的预测值的概率直方图。</p><p>创建图窗窗口。首先，调整窗口大小以使宽度增加一倍，并创建两个子图。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">h = <span class="built_in">figure</span>;</span><br><span class="line">h.Position(<span class="number">3</span>) = <span class="number">2</span>*h.Position(<span class="number">3</span>);</span><br><span class="line">ax1 = subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">ax2 = subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>在左侧子图中，将图像和分类显示在一起。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">im = snapshot(camera);</span><br><span class="line">image(ax1,im)</span><br><span class="line">im = imresize(im,inputSize);</span><br><span class="line">[label,score] = classify(net,im);</span><br><span class="line">title(ax1,&#123;char(label),num2str(<span class="built_in">max</span>(score),<span class="number">2</span>)&#125;);</span><br></pre></td></tr></table></figure><p>通过选择分数最高的类来选择排名前五的预测值。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[~,idx] = <span class="built_in">sort</span>(score,<span class="string">&#x27;descend&#x27;</span>);</span><br><span class="line">idx = idx(<span class="number">5</span>:<span class="number">-1</span>:<span class="number">1</span>);</span><br><span class="line">classes = net.Layers(<span class="keyword">end</span>).Classes;</span><br><span class="line">classNamesTop = string(classes(idx));</span><br><span class="line">scoreTop = score(idx);</span><br></pre></td></tr></table></figure><p>将排名前五的预测值显示为直方图。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">barh(ax2,scoreTop)</span><br><span class="line">xlim(ax2,[<span class="number">0</span> <span class="number">1</span>])</span><br><span class="line">title(ax2,<span class="string">&#x27;Top 5&#x27;</span>)</span><br><span class="line">xlabel(ax2,<span class="string">&#x27;Probability&#x27;</span>)</span><br><span class="line">yticklabels(ax2,classNamesTop)</span><br><span class="line">ax2.YAxisLocation = <span class="string">&#x27;right&#x27;</span>;</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/ClassifyImagesFromWebcamUsingDeepLearningExample_02-20240714172409-2185cq5.png"></div></div><h3 id="连续分类图像并显示排名靠前的预测值"><a class="markdownIt-Anchor" href="#连续分类图像并显示排名靠前的预测值"></a> 连续分类图像并显示排名靠前的预测值</h3><p>要连续对来自相机的图像进行分类并显示排名靠前的预测值，请将前面的步骤放入一个循环。在图窗打开时运行该循环。要停止实时预测，只需关闭图窗。在每次迭代结束时使用 <code>drawnow</code> 更新图窗。</p><p>创建图窗窗口。首先调整窗口大小以使宽度增加一倍，并创建两个子图。要防止坐标区大小改变，请将 <code>PositionConstraint</code> 属性设置为 <code>'innerposition'</code>。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">h = <span class="built_in">figure</span>;</span><br><span class="line">h.Position(<span class="number">3</span>) = <span class="number">2</span>*h.Position(<span class="number">3</span>);</span><br><span class="line">ax1 = subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">ax2 = subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">ax2.PositionConstraint = <span class="string">&#x27;innerposition&#x27;</span>;</span><br></pre></td></tr></table></figure><p>连续显示并分类图像，同时显示排名前五的预测值的直方图。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> ishandle(h)</span><br><span class="line">    <span class="comment">% Display and classify the image</span></span><br><span class="line">    im = snapshot(camera);</span><br><span class="line">    image(ax1,im)</span><br><span class="line">    im = imresize(im,inputSize);</span><br><span class="line">    [label,score] = classify(net,im);</span><br><span class="line">    title(ax1,&#123;char(label),num2str(<span class="built_in">max</span>(score),<span class="number">2</span>)&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">% Select the top five predictions</span></span><br><span class="line">    [~,idx] = <span class="built_in">sort</span>(score,<span class="string">&#x27;descend&#x27;</span>);</span><br><span class="line">    idx = idx(<span class="number">5</span>:<span class="number">-1</span>:<span class="number">1</span>);</span><br><span class="line">    scoreTop = score(idx);</span><br><span class="line">    classNamesTop = string(classes(idx));</span><br><span class="line"></span><br><span class="line">    <span class="comment">% Plot the histogram</span></span><br><span class="line">    barh(ax2,scoreTop)</span><br><span class="line">    title(ax2,<span class="string">&#x27;Top 5&#x27;</span>)</span><br><span class="line">    xlabel(ax2,<span class="string">&#x27;Probability&#x27;</span>)</span><br><span class="line">    xlim(ax2,[<span class="number">0</span> <span class="number">1</span>])</span><br><span class="line">    yticklabels(ax2,classNamesTop)</span><br><span class="line">    ax2.YAxisLocation = <span class="string">&#x27;right&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    drawnow</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">好久没有更Matlab和深度学习的笔记了，这次搬运一波Matlab深度学习的官方示例，使用 GoogleNet 来实时对相机采集的图片进行分类 立一个flag，以后一周更一篇Matlab和深度学习的笔记。</summary>
    
    
    
    <category term="深度学习" scheme="http://achuan-2.top/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="Matlab" scheme="http://achuan-2.top/tags/Matlab/"/>
    
  </entry>
  
  <entry>
    <title>MATLAB 深度学习丨可视化卷积神经网络CNN的激活图</title>
    <link href="http://achuan-2.top/post/matlab-deep-learning-gun-activation-diagram-of-visualized-convolutional-neural-network-cnn-njgh6.html"/>
    <id>http://achuan-2.top/post/matlab-deep-learning-gun-activation-diagram-of-visualized-convolutional-neural-network-cnn-njgh6.html</id>
    <published>2024-07-14T08:25:16.000Z</published>
    <updated>2024-07-22T02:36:21.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2><ul><li><p>Matlab使用<code>act1 = activations(net,im,'conv1');</code>可以查看神经网络模型中指定图生成的activation图</p></li><li><p><strong>激活图是什么</strong></p><ul><li><strong>由卷积层生成的特征图 (Feature Map) 经过激活函数 (Activation Function) 处理后的结果。</strong></li><li>激活图就像是CNN的&quot;思维过程&quot;，展示了网络在识别图像时各个层次的关注点。简单说，它让我们窥探AI是如何&quot;看&quot;世界的！</li></ul></li><li><p><strong>激活图的意义</strong></p><ul><li><strong>激活图上的每个值 (激活值) 代表了网络对该位置和对应特征的响应程度。</strong>  值越大，表示网络对该位置和特征越敏感，认为它越重要。</li><li><strong>越深的层的激活图提取的特征越来越抽象</strong>：大多数卷积神经网络在第一个卷积层中学习检测颜色和边缘等特征。在更深的卷积层中，网络学习检测更复杂的特征。通过可视化激活图，我们可以观察不同卷积层学习到的特征，以及这些特征如何随着网络深度的增加而变得更加抽象和高级。</li></ul></li></ul><h2 id="如何可视化卷积神经网络的激活"><a class="markdownIt-Anchor" href="#如何可视化卷积神经网络的激活"></a> 如何可视化卷积神经网络的激活</h2><p>此示例说明如何将图像馈送到卷积神经网络并显示网络的不同层的激活。通过将激活区域与原始图像进行比较，检查激活并发现网络学习的特征。发现较浅层中的通道学习颜色和边缘等简单特征，而较深层中的通道学习眼睛等复杂特征。以这种方式识别特征可以帮助您了解网络学习的内容。</p><p>该示例需要 Deep Learning Toolbox™ 和 Image Processing Toolbox™。</p><h3 id="加载预训练的网络和数据"><a class="markdownIt-Anchor" href="#加载预训练的网络和数据"></a> 加载预训练的网络和数据</h3><p>加载一个预训练的 SqueezeNet 网络。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net = squeezenet;</span><br></pre></td></tr></table></figure><p>读取并显示图像。保存图像大小，以便稍后使用。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">im = imread(<span class="string">&#x27;face.jpg&#x27;</span>);</span><br><span class="line">imshow(im)</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/VisualizeActivationsOfAConvolutionalNeuralNetworkExample_01-20240714171507-ibuuftc.png"></div></div><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">imgSize = <span class="built_in">size</span>(im);</span><br><span class="line">imgSize = imgSize(<span class="number">1</span>:<span class="number">2</span>);</span><br></pre></td></tr></table></figure><h3 id="查看网络架构"><a class="markdownIt-Anchor" href="#查看网络架构"></a> 查看网络架构</h3><p>分析该网络，了解您可以查看哪些层。卷积层使用可学习的参数执行卷积。网络学习识别有用的特征，通常每个通道对应一个特征。观察到第一个卷积层有 64 个通道。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">analyzeNetwork(net)</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/VisualizeActivationsOfAConvolutionalNeuralNetworkExample_02-20240714171507-3z1vzsl.png"></div></div><p>图像输入层指定输入大小。您可以在将图像通过网络之前调整图像大小，但网络也可以处理较大的图像。如果您为网络提供较大的图像，则激活也会变大。但是，由于网络是基于大小为 227×227 的图像进行训练的，因此无法识别超过该大小的对象或特征。</p><h3 id="显示第一个卷积层的激活"><a class="markdownIt-Anchor" href="#显示第一个卷积层的激活"></a> 显示第一个卷积层的激活</h3><p>观察卷积层中的哪些区域在图像上激活，并将其与原始图像中的相应区域进行比较，以研究特征。卷积神经网络的每层由许多称为<em>通道</em>的二维数组组成。用图像对网络进行一轮训练，并检查 <code>conv1</code> 层的输出激活。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">act1 = activations(net,im,<span class="string">&#x27;conv1&#x27;</span>);</span><br></pre></td></tr></table></figure><p>激活以三维数组的形式返回，其中第三个维度对 <code>conv1</code> 层上的通道进行索引。要使用 <code>imtile</code> 函数显示这些激活，请将数组重构为四维。<code>imtile</code> 的输入中的第三个维度表示图像颜色。将第三个维度的大小设置为 1，因为激活没有颜色。第四个维度对通道进行索引。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sz = <span class="built_in">size</span>(act1);</span><br><span class="line">act1 = <span class="built_in">reshape</span>(act1,[sz(<span class="number">1</span>) sz(<span class="number">2</span>) <span class="number">1</span> sz(<span class="number">3</span>)]);</span><br></pre></td></tr></table></figure><p>现在您可以显示激活。每个激活都可能采用任何值，因此请使用 <code>mat2gray</code> 归一化输出。缩放所有激活值，以使最小激活值为 0，最大激活值为 1。在 8×8 网格上显示 64 个图像，层中的每个通道对应一个图像。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">I = imtile(mat2gray(act1),<span class="string">&#x27;GridSize&#x27;</span>,[<span class="number">8</span> <span class="number">8</span>]);</span><br><span class="line">imshow(I)</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/VisualizeActivationsOfAConvolutionalNeuralNetworkExample_03-20240714171507-w7zws2h.png"></div></div><h3 id="调查特定通道中的激活"><a class="markdownIt-Anchor" href="#调查特定通道中的激活"></a> 调查特定通道中的激活</h3><p>激活网格中的每个图块都是 <code>conv1</code> 层中某个通道的输出。白色像素表示强的正激活，黑色像素表示强的负激活。主要为灰色的通道未对输入图像进行强烈激活。通道激活中的像素位置对应于原始图像中的相同位置。通道中某个位置的白色像素表示该通道在该位置强激活。</p><p>调整通道 22 中的激活大小以使其与原始图像具有相同的大小，并显示激活。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">act1ch22 = act1(:,:,:,<span class="number">22</span>);</span><br><span class="line">act1ch22 = mat2gray(act1ch22);</span><br><span class="line">act1ch22 = imresize(act1ch22,imgSize);</span><br><span class="line"></span><br><span class="line">I = imtile(&#123;im,act1ch22&#125;);</span><br><span class="line">imshow(I)</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/VisualizeActivationsOfAConvolutionalNeuralNetworkExample_04-20240714171507-cw7l47s.png"></div></div><p>您可以看到此通道在红色像素上激活，因为通道中的偏白的像素对应于原始图像中的红色区域。</p><h3 id="查找最强的激活通道"><a class="markdownIt-Anchor" href="#查找最强的激活通道"></a> 查找最强的激活通道</h3><p>您还可以通过编程方式调查具有大量激活值的通道来尝试查找感兴趣的通道。使用 <code>max</code> 函数查找具有最多激活值的通道，调整大小并显示这些激活值。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[maxValue,maxValueIndex] = <span class="built_in">max</span>(<span class="built_in">max</span>(<span class="built_in">max</span>(act1)));</span><br><span class="line">act1chMax = act1(:,:,:,maxValueIndex);</span><br><span class="line">act1chMax = mat2gray(act1chMax);</span><br><span class="line">act1chMax = imresize(act1chMax,imgSize);</span><br><span class="line"></span><br><span class="line">I = imtile(&#123;im,act1chMax&#125;);</span><br><span class="line">imshow(I)</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/VisualizeActivationsOfAConvolutionalNeuralNetworkExample_05-20240714171507-m43mzo6.png"></div></div><p>与原始图像进行比较，注意此通道在边缘激活。它在浅色左侧/深色右侧边缘上正激活，在深色左侧/浅色右侧边缘上负激活。</p><h3 id="调查更深的层"><a class="markdownIt-Anchor" href="#调查更深的层"></a> 调查更深的层</h3><p>大多数卷积神经网络在第一个卷积层中学习检测颜色和边缘等特征。在更深的卷积层中，网络学习检测更复杂的特征。较深的层通过组合较浅层的特征来构建其特征。以调查 <code>conv1</code> 层的方式调查 <code>fire6-squeeze1x1</code> 层。计算、重构并在网格中显示激活。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">act6 = activations(net,im,<span class="string">&#x27;fire6-squeeze1x1&#x27;</span>);</span><br><span class="line">sz = <span class="built_in">size</span>(act6);</span><br><span class="line">act6 = <span class="built_in">reshape</span>(act6,[sz(<span class="number">1</span>) sz(<span class="number">2</span>) <span class="number">1</span> sz(<span class="number">3</span>)]);</span><br><span class="line"></span><br><span class="line">I = imtile(imresize(mat2gray(act6),[<span class="number">64</span> <span class="number">64</span>]),<span class="string">&#x27;GridSize&#x27;</span>,[<span class="number">6</span> <span class="number">8</span>]);</span><br><span class="line">imshow(I)</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/VisualizeActivationsOfAConvolutionalNeuralNetworkExample_06-20240714171507-0uv1y6g.png"></div></div><p>图像太多，无法详细调查，因此不妨关注一些更有趣的图像。显示 <code>fire6-squeeze1x1</code> 层中最强的激活。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[maxValue6,maxValueIndex6] = <span class="built_in">max</span>(<span class="built_in">max</span>(<span class="built_in">max</span>(act6)));</span><br><span class="line">act6chMax = act6(:,:,:,maxValueIndex6);</span><br><span class="line">imshow(imresize(mat2gray(act6chMax),imgSize))</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/VisualizeActivationsOfAConvolutionalNeuralNetworkExample_07-20240714171507-gufxf6t.png"></div></div><p>在本例中，最大激活通道在详细特征方面不像其他一些通道那样令人感兴趣，并且表现出强力的负（深色）激活以及正（浅色）激活。此通道可能专注于面部。</p><p>在所有通道的网格中，可能有通道针对眼睛激活。进一步调查通道 14 和 47。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">I = imtile(imresize(mat2gray(act6(:,:,:,[<span class="number">14</span> <span class="number">47</span>])),imgSize));</span><br><span class="line">imshow(I)</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/VisualizeActivationsOfAConvolutionalNeuralNetworkExample_08-20240714171507-2y1ip1r.png"></div></div><p>许多通道包含同时存在浅色和深色的激活区域。它们分别是正激活和负激活。但是，由于 <code>fire6-squeeze1x1</code> 层后面是修正线性单元 (ReLU)，因此只使用正激活。要只调查正激活，请重复分析以可视化 <code>fire6-relu_squeeze1x1</code> 层的激活。</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">act6relu = activations(net,im,<span class="string">&#x27;fire6-relu_squeeze1x1&#x27;</span>);</span><br><span class="line">sz = <span class="built_in">size</span>(act6relu);</span><br><span class="line">act6relu = <span class="built_in">reshape</span>(act6relu,[sz(<span class="number">1</span>) sz(<span class="number">2</span>) <span class="number">1</span> sz(<span class="number">3</span>)]);</span><br><span class="line"></span><br><span class="line">I = imtile(imresize(mat2gray(act6relu(:,:,:,[<span class="number">14</span> <span class="number">47</span>])),imgSize));</span><br><span class="line">imshow(I)</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/VisualizeActivationsOfAConvolutionalNeuralNetworkExample_09-20240714171507-d5tkau3.png"></div></div><p>与 <code>fire6-squeeze1x1</code> 层的激活相比，<code>fire6-relu_squeeze1x1</code> 层的激活清楚地定位到具有强面部特征的图像区域。</p><h3 id="测试通道是否识别眼睛"><a class="markdownIt-Anchor" href="#测试通道是否识别眼睛"></a> 测试通道是否识别眼睛</h3><p>检查 <code>fire6-relu_squeeze1x1</code> 层的通道 14 和 47 是否针对眼睛激活。将两眼一睁一闭的新图像输入到网络中，并将得到的激活与原始图像的激活进行比较。</p><p>读取并显示两眼一睁一闭的图像，并计算 <code>fire6-relu_squeeze1x1</code> 层的激活。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">imClosed = imread(&#x27;face-eye-closed.jpg&#x27;);</span><br><span class="line">imshow(imClosed)</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/VisualizeActivationsOfAConvolutionalNeuralNetworkExample_10-20240714171507-fzl964b.png"></div></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">act6Closed = activations(net,imClosed,&#x27;fire6-relu_squeeze1x1&#x27;);</span><br><span class="line">sz = size(act6Closed);</span><br><span class="line">act6Closed = reshape(act6Closed,[sz(1),sz(2),1,sz(3)]);</span><br></pre></td></tr></table></figure><p>在一个图窗中绘制图像和激活。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">channelsClosed = repmat(imresize(mat2gray(act6Closed(:,:,:,[14 47])),imgSize),[1 1 3]);</span><br><span class="line">channelsOpen = repmat(imresize(mat2gray(act6relu(:,:,:,[14 47])),imgSize),[1 1 3]);</span><br><span class="line">I = imtile(cat(4,im,channelsOpen*255,imClosed,channelsClosed*255));</span><br><span class="line">imshow(I)</span><br><span class="line">title(&#x27;Input Image, Channel 14, Channel 47&#x27;);</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/VisualizeActivationsOfAConvolutionalNeuralNetworkExample_11-20240714171507-hu0281u.png"></div></div><p>您可以从激活中看到，通道 14 和 47 都针对单个眼睛激活，并且在某种程度上也针对嘴周围的区域激活。</p><p>网络从未被告知要学习眼睛的特征，但它已学习到眼睛是区分图像类的一个有用特征。以前的机器学习方法通常手动设计特定于问题的特征，但这些深度卷积网络可以为自己学习有用的特征。例如，学习识别眼睛可以帮助网络区分猎豹和豹纹地毯。</p><h2 id="问题和笔记"><a class="markdownIt-Anchor" href="#问题和笔记"></a> 问题和笔记</h2><ul><li><p>The Image Input layer specifies the input size. You can resize the image before passing it through the network, but the network also can process larger images. If you feed the network larger images, the activations also become larger. However, since the network is trained on images of size 227-by-227, it is not trained to recognize objects or features larger than that size.</p><ul><li>所以squeezenet是可以输入更大尺寸的图像的，只不过无法识别更大的物体？</li><li>在这个案例里没有对图像进行resize，说明是可以直接输入的</li></ul></li><li><p><strong>ReLU之后只有正activation，通过激活图来看就可以明显看出经过ReLU之后，特征会变得更加明显</strong></p><ul><li>与conv5层的激活相比，relu5层清晰地精确定位图像中具有强烈激活的面部区域特征。</li><li><strong>conv5层的激活图</strong></li></ul></li></ul><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240714170154-zwiyrsu.png"></div></div><ul><li><strong>relu5层的激活图</strong></li></ul><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240714170213-po30br1.png"></div></div><ul><li><p>参考：<a href="https://zhuanlan.zhihu.com/p/572124574?utm_psn=1730887377839755264">MATLAB环境下可视化卷积神经网络CNN的激活图 - 知乎 (zhihu.com)</a></p></li><li><p>正activation和负activation是什么？</p><ul><li>White pixels represent strong positive activations and black pixels represent strong negative activations.</li></ul></li></ul><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240714165839-fwmcn0t.png"></div></div><h2 id="资料"><a class="markdownIt-Anchor" href="#资料"></a> 资料</h2><ul><li>Matlab官方文档（squeezenet）：<a href="https://ww2.mathworks.cn/help/deeplearning/ug/visualize-activations-of-a-convolutional-neural-network.html">https://ww2.mathworks.cn/help/deeplearning/ug/visualize-activations-of-a-convolutional-neural-network.html</a></li><li><a href="https://zhuanlan.zhihu.com/p/572124574?utm_psn=1730887377839755264">MATLAB环境下可视化卷积神经网络CNN的激活图 - 知乎 (zhihu.com)</a>：用的是AlextNet来可视化激活图</li></ul><p>‍</p>]]></content>
    
    
    <summary type="html">❓什么是CNN激活图？
激活图就像是CNN的&quot;思维过程&quot;，展示了网络在识别图像时各个层次的关注点。简单说，它让我们窥探AI是如何&quot;看&quot;世界的！
❓激活图具体代表什么
激活图上的每个值 (激活值) 代表了网络对该位置和对应特征的响应程度。 值越大，表示网络对该位置和特征越敏感，认为它越重要。
越深的层的激活图提取的特征越来越抽象：大多数卷积神经网络在第一个卷积层中学习检测颜色和边缘等特征。在更深的卷积层中，网络学习检测更复杂的特征。通过可视化激活图，我们可以观察不同卷积层学习到的特征，以及这些特征如何随着网络深度的增加而变得更加抽象和高级。</summary>
    
    
    
    <category term="深度学习" scheme="http://achuan-2.top/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="Matlab" scheme="http://achuan-2.top/tags/Matlab/"/>
    
  </entry>
  
  <entry>
    <title>为什么要写日记？</title>
    <link href="http://achuan-2.top/post/why-write-a-diary-hhfd6.html"/>
    <id>http://achuan-2.top/post/why-write-a-diary-hhfd6.html</id>
    <published>2024-06-02T03:34:27.000Z</published>
    <updated>2024-06-02T03:48:13.000Z</updated>
    
    <content type="html"><![CDATA[<div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/gpt-1717300320488-20240602115217-k27srd5.png"></div></div><p>回顾我过去的日记，发现写的都是抱怨的内容和无用的唠叨，没有什么意义，都是废话。</p><p>后来我才发现，</p><p>日记应该侧重于记录自己的进步与收获，搭上“复利效应”的列车，让自己不断成长。</p><p>此外，日记和写作的另一个意义在于把生活中零散的、碎片的事情和经历，重新整理为一个有序的整体，从而让自己的生命更加连贯，更加有序。</p><blockquote><p>“原来17岁的我真的只会烦恼着学习、友情、还有觉得自己很孤单的那些青春小矫情。 可十年了，不说当时烦恼着的事情了，连当时很在乎的人都要忘记了，所以你看，好像所有事情都会过去。”——B站up主邓二单单 <a href="https://www.bilibili.com/video/BV1mr4y1n7NS/?buvid=XU95F8C951814CF4E5254768F2EFCD9965BCB&amp;from_spmid=united.player-video-detail.drama-float.0&amp;is_story_h5=false&amp;mid=es8Qp8798HT6OKJF9Ioz%2Bg%3D%3D&amp;p=1&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=0c4b9d4b-9511-420d-88aa-eeaa0c144df6&amp;share_source=WEIXIN_MONMENT&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1709829460&amp;unique_k=ZakkpkP&amp;up_id=261521395">A letter in a diary 047｜终于打开这封17岁时写的信_哔哩哔哩_bilibili</a></p></blockquote><p>除了简单每日复盘、每周复盘、每月复盘、每年复盘外，还可以给未来的自己写信，把未来的自己当做一个笔友，写下当下最真实的所学所感所想。我发现别说一年了，一个月前的自己其实心态和想法都有很大的不同。</p><p>于是，当下的我不仅仅是当下这一瞬间的我，而是无数个过去的我的聚合，当下的我就算孤单但一定不孤独，在漫长的时间长河里，有无数的我，可以为当下的我提供力量，<strong>不同时空里，有好多个我在互相打气</strong>！</p><h2 id="我的日复盘-周复盘-月复盘-年复盘笔记分享"><a class="markdownIt-Anchor" href="#我的日复盘-周复盘-月复盘-年复盘笔记分享"></a> ‍我的日复盘、周复盘、月复盘、年复盘笔记分享</h2><h3 id="日复盘"><a class="markdownIt-Anchor" href="#日复盘"></a> 日复盘</h3><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/%E6%97%A5%E8%AE%B0%E6%A8%A1%E6%9D%BF-20240602114013-593dmej.png"></div></div><h3 id="周复盘"><a class="markdownIt-Anchor" href="#周复盘"></a> 周复盘</h3><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-06-02_11-40-39-20240602114048-xyy2jly.png"></div></div><p>‍</p><h3 id="月复盘"><a class="markdownIt-Anchor" href="#月复盘"></a> 月复盘</h3><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/%E6%9C%88%E5%A4%8D%E7%9B%98%E6%A8%A1%E6%9D%BF-20240602114021-2x7rbpr.png"></div></div><h3 id="年复盘"><a class="markdownIt-Anchor" href="#年复盘"></a> 年复盘</h3><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/%E5%B9%B4%E5%A4%8D%E7%9B%98%E6%A8%A1%E6%9D%BF-20240602114024-27fjhaq.png"></div></div>]]></content>
    
    
    <summary type="html">日记应该侧重于记录自己的进步与收获，搭上“复利效应”的列车，让自己不断成长。把生活中零散的、碎片的事情和经历，重新整理为一个有序的整体，从而让自己的生命更加连贯，更加有序。</summary>
    
    
    
    <category term="阿巛随笔" scheme="http://achuan-2.top/categories/%E9%98%BF%E5%B7%9B%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="个人管理" scheme="http://achuan-2.top/tags/%E4%B8%AA%E4%BA%BA%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>MOC：面向主题地去管理笔记链接</title>
    <link href="http://achuan-2.top/post/moc-manage-the-notes-link-to-the-theme-4uatt.html"/>
    <id>http://achuan-2.top/post/moc-manage-the-notes-link-to-the-theme-4uatt.html</id>
    <published>2024-05-12T03:05:26.000Z</published>
    <updated>2024-05-12T08:32:27.000Z</updated>
    
    <content type="html"><![CDATA[<div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/MOC%E9%9D%A2%E5%90%91%E4%B8%BB%E9%A2%98%E5%9C%B0%E5%8E%BB%E7%AE%A1%E7%90%86%E7%AC%94%E8%AE%B0%E9%93%BE%E6%8E%A5-20240512105740-xzkvbuo.png"></div></div><p>个人认为，双链笔记的核心<strong>并不在于双向链接</strong>，对我而言，我接触到双链笔记软件这 3 年以来的主要收获可以概括为两个点：</p><ul><li>一个是「<strong>笔记应该是渐进式的</strong>」，目前我觉得这个理念不仅仅应该应用在笔记上，也应该用在生活上——生活也应该是渐进式的，这个之后我会写一篇文章重点介绍我的收获。</li><li>另一个收获便是「<strong>面向主题地去管理笔记链接</strong>」，也就是本文章要介绍的笔记理念。</li></ul><p>「<strong>面向主题地去管理笔记链接</strong>」，这一方法在双链笔记圈常常被叫做 MOC，Map of Contents，直接翻译叫做内容地图，我更喜欢将其翻译为索引笔记、主题笔记。</p><p>MOC是我目前强烈推荐的笔记管理方法，它有着传统笔记分类法、标签管理难以替代的优势。Markdown笔记格式、OneNote软件本身就支持管理笔记链接的方式来组织信息，在如今大热的新一代笔记软件——双链笔记软件中，MOC的作用还得了大大加强，不仅仅能自上而下地管理笔记，还能代替标签进行自下而上的渐进式积累零碎笔记，是一个特别实用、好用的笔记管理方法。</p><h2 id="moc-的起源"><a class="markdownIt-Anchor" href="#moc-的起源"></a> MOC 的起源</h2><p>MOC这个名词据说最早是由程序员 <a href="https://x.com/LionKimbro/media">Lion Kimbro</a> 在 2003 年写的《<a href="https://users.speakeasy.net/~lion/nb/book.pdf">How to Make a Complete Map of Every Thought You Think</a>》一书中提出的。当时 2003 的他还在用活页笔记本维护纸质笔记系统。</p><p>而将 MOC 这一概念应用到电子笔记软件里并大力宣扬的人叫 <a href="https://x.com/nickmilo?lang=zh">Nick Milo</a>，他是 Obsidian 社区的大神。在他的文章《<a href="https://notes.linkingyourthinking.com/Cards/What+are+higher-order+notes">What can we call higher-order notes?</a>》，将 MOC 认为是高阶笔记，认为它灵活，能满足收集、概述、结构化、导航等笔记目的，还方便链接知识、重塑想法和构建新想法。之后MOC这一管理笔记的理念被越来越多人了解并推崇。</p><blockquote><p><strong>MOC (Map of Content)</strong>  -A flexible higher-order note that serves all the above purposes of gathering, outlining, structuring, and navigating. In addition, it is an active thinking tool that allows for the reshaping, connecting, and building of ideas</p><p>——Nick Milo <a href="https://notes.linkingyourthinking.com/Cards/What+are+higher-order+notes">《What can we call higher-order notes?》</a> 2020-06-28</p></blockquote><p>而本篇文章提到的MOC管理笔记方法，融合了INKP笔记法、PARA信息管理系统的理念，已经是个人“改编过”的笔记方法理念了，欢迎其他小伙伴提出意见，交流讨论。</p><h2 id="文件夹和标签管理笔记的弊端"><a class="markdownIt-Anchor" href="#文件夹和标签管理笔记的弊端"></a> 文件夹和标签管理笔记的弊端</h2><p>用文件夹和标签费心维护一个精致复杂的笔记系统其实是费力不讨好的，下面会介绍文件夹和标签管理笔记的弊端。</p><h3 id="文件夹"><a class="markdownIt-Anchor" href="#文件夹"></a> 文件夹</h3><p>传统的笔记方法喜欢用文件夹进行笔记分类，文件夹分类非常简单，只需要建立一个文件夹，然后将笔记丢进去。这和用 Windows 电脑的资源管理器管理文件、用代码编辑器管理代码项目体验很一致。</p><p>文件夹分类需要遵循严格的层次结构，文件夹分类的最大弊端就在于此，<strong>一篇笔记只能放在一个分类下。</strong> 如果希望一篇笔记出现在多个分类文件夹下，只能复制出这篇笔记的副本，放到其他分类下，但这时候这些「克隆笔记」的内容如何同步就又是一个问题了。此外，一个文件夹也只能放在另一个文件夹下。这就造成了单纯只用文件夹分类，会导致<strong>过去的笔记难以复用</strong>，<strong>很容易创建重复的笔记</strong>，不断造轮子。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240511002803-wbt2q85.png"></div></div><h3 id="标签"><a class="markdownIt-Anchor" href="#标签"></a> 标签</h3><p>后来，很多笔记软件开始加入标签这个功能，一篇笔记可以打上多个不同的标签，终于能实现一篇笔记进行多分类了，还可以对标签进行 AND、OR、NOT 等高级联合查询笔记，但标签依然存在很大的问题：</p><ul><li><strong>标签的管理笔记问题。</strong> 大部分笔记软件的标签功能<strong>其实并没有整理功能</strong>，可能只有简单的按时间排序功能，一个标签里的笔记只能在一个维度上堆积。标签在整理汇总功能上，甚至还不如文件夹（文件夹起码还可以对笔记进行自定义排序）。在某种意义上，<strong>标签更像是一个快捷搜索的功能，一个汇集想法的功能，而不是分类归档功能</strong>。</li><li><strong>创建多个重复标签的问题。</strong> 随着笔记越来越多，标签越来越多，管理标签也会变得非常头疼。因为标签的创建可能非常随意，可能重复创建一个标签，以不同的命名形式存在，比如 <code>#神经科学</code>，<code>#脑科学</code>、<code>#神经生物学</code>，如何把这些重复标签合并，将相关的文档聚合在一起呢？虽然一些笔记软件可以标签合并，但是本质问题没有解决，<strong>我还是会创建重复标签，那过一段时间就需要合并标签</strong>，除非我能牢固记住所有的标签命名。</li><li><strong>标签依然存在无法多分类的问题。</strong> 为了管理众多标签，很多笔记软件支持通过父子标签来管理标签，然而，<strong>父子标签的这种分类其实也只是单分类，过去使用文件夹单分类的问题，在另一个维度——管理标签上又出现了</strong>：这就意味着你创建一个 <code>#睡眠</code> 的标签，收集了很多笔记，你之前将其放在 <code>#神经科学</code> 这个标签下，现在你又创建了一个 <code>#健康</code> 标签，如何把 <code>#睡眠</code> 这个标签同时放在 <code>#神经科学</code> 标签和 <code>#健康</code> 标签里就是一个问题。只能把之前整理的那些睡眠笔记，合并成一篇《睡眠》笔记，然后打上 <code>#神经科学</code> 标签和 <code>#健康</code> 标签。这也就是说，<strong>当标签完成它的汇聚信息功能之后，这个标签的功能就丧失了，就应该转化为文档了，否则你难以对这个标签本身进行多分类</strong>。就如一个文件夹下的所有笔记不方便出现在其他文件夹里一样</li><li><strong>标签管理笔记的复用问题。</strong> 标签管理的笔记最好是模块化的卡片笔记，标签本身适合是一个比较广泛的主题，比如 <code>#个人碎碎念</code>、<code>#神经科学</code>，因为永远也没有汇集完的一天，也不太需要整理为一个文档（正如前面所说的标签多分类问题）。但是标签尽管能对卡片笔记进行多分类，并不意味着它就可以很好的为笔记进行服务了，比如你记了一篇关于《熬夜危害》的笔记，为一个卡片笔记打上<code>#神经科学</code>、<code>#睡眠</code>、<code>#生活百科</code>、<code>#健康</code>等标签，<strong>并不意味着这篇笔记可以被复用</strong>，更多情况是<strong>你打的标签可能更多是起美观、总结出关键词的作用。</strong> 以后想要用到这篇《熬夜危害》的笔记，要么在一个个标签里下滑寻找，要么使用搜索功能，这和文件夹体系其实没什么太大区别。</li><li><strong>标签体系与双链功能。</strong> 标签体系如果加入双链功能，就可以用<code>[[</code>快速搜索找到符合的笔记进行引用了，然而一旦加了双链功能后，双链就可以替代标签了，又何必再用标签呢？毕竟标签对笔记的多分类、信息汇聚功能，使用双链也能做到，甚至需要的信息汇聚之后，直接在双链文档就能进行整理了，而不像标签只是一个标签，无法整理标签内的信息。其实<strong>标签就是这么一个矛盾的功能，很鸡肋，食之无味弃之可惜</strong>。</li></ul><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240511005134-i8sjf0y.png"></div></div><h2 id="由管理文件和写代码获得的启示"><a class="markdownIt-Anchor" href="#由管理文件和写代码获得的启示"></a> 由管理文件和写代码获得的启示</h2><p>用文件夹管理笔记，存在的主要问题在于笔记只能属于一个分类，而且层次结构一旦过深，处于深层结构的笔记就容易被遗忘。我们可以先看看 Windows 电脑的资源管理器管理文件和程序员写代码项目是怎么解决用文件夹管理文件的这些问题的：</p><ul><li>Windows 电脑的资源管理器管理文件，如果遇到一个文件需要出现在多个文件夹的需求，可以用「<strong>快捷方式」</strong> 创建一个指向该文件的链接，使得这个文件可以在多个文件夹里出现。同时为了避免层级深的文件被遗忘、将常用的文件夹放在更方便的位置，也可以用快捷方式将文件放在桌面或者其他地方，同时 Windows 电脑的资源管理器还有「<strong>快捷访问</strong>」的功能，能将常用文件夹置顶。</li><li>程序员写代码项目常常会有一个 main 文件（或者 run 文件、index 文件），main 文件执行主要的程序功能，而 main 文件的文件一般比较简洁，<strong>可以自上而下地把所需要的代码功能的逻辑先大致写出来，不考虑具体实现，写完大概逻辑之后再具体一个个实现这些功能。</strong> 这些功能代码存放的文件夹层级可以很深，但通过 main 文件里的代码链接我就可以跳转到对应的功能代码，所以层级很深也无所谓，或者把所有功能代码都放在一个叫 <code>utils</code> 的文件夹里也可以。程序员喜欢会将一个重复使用的功能封装为模块，这样其他代码需要的时候就可以直接调用，不需要重复写一样的代码，后面要改代码还需要一个个修改。而要调用模块的代码，只需要声明这个模块的位置在哪里就可以了。</li></ul><p>从 Windows 电脑的资源管理器管理文件和程序员写代码项目这两个例子来看，我们可以有如下感悟</p><ul><li>可以用链接的方式管理笔记，使得<strong>一篇笔记可以出现在多个地方</strong>。写了一篇《多巴胺》笔记，可以把这个笔记的链接放在《神经科学》这篇笔记下面，也可以放在《神经递质》笔记下面，还可以放在《帕金森病》、《手机上瘾》等笔记下面。</li><li>用链接的方式可以根据需要对笔记的链接进行<strong>随意排序、分类</strong>，<strong>可以忽略这篇笔记的实际存放位置、根据需要决定这篇笔记的展示位置。</strong> 笔记本体可以按照原来的层级分类存放，也可以全部放在一个文件夹里不分层级，更加省心 <strong>。</strong></li><li>笔记可以像写代码一样，<strong>尽量模块化</strong>，笔记模块化后不仅仅能在未来需要用的时候省力，写作时就是组装各种模块，还有助于知识的复利积累。比如一篇《多巴胺》笔记，其他笔记涉及到多巴胺这个名词的段落，在思源笔记里就可以建立双向链接关系，这样既可以回顾《多巴胺》这篇笔记，又可以补充《多巴胺》这篇笔记的信息，比如你在《为什么刷手机会上瘾》这篇笔记中，发现多巴胺原来正是驱动你不断刷手机的元凶之一，你发现原来多巴胺并不给予快乐，只是给你欲望和动力，《为什么刷手机会上瘾》引用《多巴胺》笔记之后，以后再看《多巴胺》这篇笔记和它的反向链接，就可以回顾起这些知识点了。通过不断的完善，《多巴胺》这篇笔记就会越来越完善，会涉及越来越多的领域，变成自己的知识财富。</li></ul><p>以上的感悟，其实很大程度上就是 MOC 的核心理念了——管理链接而非本体、面向主题组织信息。</p><p>接下来就正式介绍 MOC 笔记方法了。</p><h2 id="moc管理链接而非本体"><a class="markdownIt-Anchor" href="#moc管理链接而非本体"></a> MOC：管理链接而非本体</h2><p><strong>MOC推崇管理笔记的索引链接而非笔记本体。</strong> 可以根据需要让笔记的链接随意出现在不同的笔记里，很轻松地进行笔记复用，让过去记的笔记能在不同的主题笔记下发挥不同作用，一篇概念笔记可以属于多篇主题笔记，一篇主题笔记管理着众多概念笔记，一篇主题笔记又可以出现在其他的主题笔记里，笔记之间可以彼此嵌套引用，这有利于知识的持续性积累，形成自己的知识网络！</p><h3 id="使用moc的前提"><a class="markdownIt-Anchor" href="#使用moc的前提"></a> 使用MOC的前提</h3><p>需要笔记软件支持提供笔记链接才行，比如老大哥「OneNote」，新型双链本地笔记软件「思源笔记」和「Obsidian」 等，就能很好支持MOC来管理笔记。</p><p>Markdown 其实天生就支持 MOC，使用 Markdown 的链接支持跳转文件， 只是缺少双链，少了将 MOC 当做标签的自下而上积累的功能。这样看来，其实用 Word 也能链接文件，实现 MOC，就是不太便捷。</p><p>一般云笔记也支持提供笔记链接，但是需要考虑引用笔记的便捷程度、笔记路径更改路径不失效、内链标题是否支持自动更新、新建文档能否指定路径等问题。</p><p>我目前的主力笔记软件是「<strong>思源笔记</strong>」，思源笔记主要有如下创建笔记链接的方式：</p><ul><li>可以在文档树选中文档右键进行复制块引用或者在打开的文档的页签右键进行复制块引用</li></ul><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-05-25_17-45-44-20240525174551-iub1ahb.png"></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-05-25_17-46-02-20240525174606-771ke3v.png"></div></div><ul><li><code>[[+输入文字</code>，或是选中一段文字后输入<code>Alt+[</code>，检索引用已有笔记或者直接创建新笔记，并建立链接。</li></ul><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-05-25_17-46-51-20240525174653-it6yo9o.png"></div></div><p>‍</p><p>‍</p><p>‍</p><p>‍</p><p>‍</p><h3 id="怎么管理笔记链接"><a class="markdownIt-Anchor" href="#怎么管理笔记链接"></a> 怎么<strong>管理笔记链接</strong></h3><p>在思源笔记里要使用 MOC，很简单，你需要定一个目前你感兴趣的主题，可以与你的专业有关，也可以是你自己的兴趣爱好，比如可以一个是大主题《神经科学》，也可以是小主题《熬夜的危害》，这个主题向的笔记，我称之为「<strong>主题笔记</strong>」，主题既可以是纯知识型的笔记，也可以是实践型的项目笔记，主题笔记起统筹主题下所有信息的作用。然后在主题笔记下通过块引来引用或新建相关的笔记，与主题相关的笔记，我喜欢称之为「<strong>概念笔记」，</strong> 概念笔记的理念类似于卡片笔记，卡片笔记侧重将一个名词模块化，解释清楚，便于复用，但概念笔记并仅仅停留在卡片，如果一篇概念笔记的内容已经积累太多了，是可以直接升级为主题笔记进行拆解和内容补充的。主题笔记和概念笔记的想法参考了L先生的INKP笔记法，在他的《打开心智》一书中有具体阐述。</p><p>管理链接的形式主要有下面几种：</p><ul><li>列表型MOC</li><li>表格型MOC</li><li>数据库型MOC</li><li>白板型MOC</li></ul><p>我会以《神经科学》这个主题笔记为例，介绍自己是怎么在思源笔记里使用 MOC 收集和管理笔记的。</p><p>首先，我一般会给主题笔记的标题<strong>添加 @ 前缀</strong>，以区分概念笔记，并且添加 @ 前缀也有利于快速搜索，因为我搜“神经科学”可能会搜到其他概念笔记，而搜“@神经科学”就可以直接命中这篇主题笔记。并且我如果未来要搜索关于神经科学下的概念笔记，比如《神经科学经典教科书》这篇笔记直接搜索不到，也可以通过搜索《@神经科学》这篇主题笔记去寻找。</p><p>然后，我就会在《@神经科学》这篇主题笔记，存放所有关于神经科学的笔记。我最常用的管理链接的方式是列表，因为列表创建非常方便、可以轻松实现层级分类、层级折叠。</p><p>列表管理笔记索引的方式，可以单纯用列表管理这些索引，如果有些笔记暂时还没记录、还不了解、或者觉得很简单没必要升级为一篇笔记，可以单纯用文字记录、占位，之后有需要再块引新建文档（是的，<strong>我不会先在文档树找个位置新建文档</strong>，然后把笔记链接丢在主题笔记，而习惯直接在主题笔记通过「<strong>块引新建文档</strong>」直接新建文档）。例如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> [[概念笔记1]]</span><br><span class="line"><span class="bullet">-</span> [[概念笔记2]]</span><br><span class="line"><span class="bullet">-</span> [[概念笔记3]]</span><br><span class="line"><span class="bullet">-</span> 简单概念4</span><br><span class="line"><span class="bullet">-</span> 待了解概念5</span><br></pre></td></tr></table></figure><p>也可以在索引后添加内容概括，甚至添加引用关系。例如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> [[方法1]] 通过方式 A 给出了解决方法。</span><br><span class="line"><span class="bullet">-</span> [[方法2]] 从 B 的角度分析 [[方法1]] 的原理，并用 C 改进了方案，提高了方法的成功率。</span><br><span class="line"><span class="bullet">-</span> [[方法3]] 用 [[理论7]] 降低了 [[方法1]] 的使用成本。</span><br><span class="line"><span class="bullet">-</span> [[方法4]] 通过方式 D 给出的一种解决办法。</span><br><span class="line"><span class="bullet">-</span> [[方法5]] 将 [[方法1]] 与 [[方法4]] 结合，继承了二者各自的优势。</span><br><span class="line"><span class="bullet">-</span> [[文献6]] 对这些方法所试图解决的问题 I 进行了反思，提出在情况 E 下，这个问题可以用方式 F 直接规避，也就不需要解决了。</span><br><span class="line"><span class="bullet">-</span> 注：问题 I 与 [[问题II]] 相关。</span><br></pre></td></tr></table></figure><p>当主题笔记的记录变多时，可以对其下的内容进行更细致的分类。如果某一分类的内容足够多，也可以考虑将其独立为一个新的 MOC，并在原来的 MOC 里留下指向这个新 MOC 的链接。 例如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> 类型 A</span><br><span class="line"><span class="bullet">    -</span> [[概念笔记1]] （概括）</span><br><span class="line"><span class="bullet">    -</span> [[概念笔记2]] （概括）</span><br><span class="line"><span class="bullet">    -</span> [[概念笔记3]] （概括）</span><br><span class="line"><span class="bullet">    -</span> 概念7：（概括）</span><br><span class="line"><span class="bullet">-</span> 类型 B</span><br><span class="line"><span class="bullet">    -</span> [[概念笔记4]]</span><br><span class="line"><span class="bullet">    -</span> [[概念笔记5]] （概括）</span><br><span class="line"><span class="bullet">-</span> 类型 C</span><br><span class="line"><span class="bullet">    -</span> [[概念笔记6]]</span><br><span class="line"><span class="bullet">-</span> [[类型 D]]</span><br></pre></td></tr></table></figure><blockquote><p>备注：以上几个列表型MOC例子改编自：<a href="https://zhuanlan.zhihu.com/p/603647786">笔记系统：MOC（内容地图）的组织 - 知乎 (zhihu.com)</a></p></blockquote><p>实际例子：我收集了一些神经科学方面的教材，在这里我用了列表来管理笔记，一些已经读的书、在读的书，我还可以直接在 MOC 里添加一些网页资料。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-05-11_22-54-07-20240511225409-wjv8hdc.png"></div></div><p>由于《神经系统组成》这个概念比较大、涉及的内容多，所以我将其升级为主题笔记（这里其实还是用列表型MOC，只是用了主题自带的列表转导图功能）</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-05-11_23-16-47-20240511231649-hfconcy.png"></div></div><p>‍</p><p>用表格也能管理索引，不过由于思源笔记不少主题提供了列表转表格功能，再加上目前思源笔记有数据库功能，可以当成高级表格使用，我就比较少用表格了。下面是一个用表格管理链接的例子：</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-05-11_23-29-41-20240511232949-m7t1zcg.png"></div></div><p>而数据库这个功能在笔记管理上，除了可以当成高级表格使用外，思源笔记还有一个特色功能——「<strong>添加到数据库</strong>」，可以很轻松的将一个笔记放进<strong>多个数据库里</strong>，于是目前数据库又多了一个功能——<strong>收集零散的概念笔记</strong>，创建了一个笔记之后，可以暂时不着急去思考这篇笔记要放在主题笔记的哪个位置，可以用数据库先存放这些笔记，等时机恰当再进行整理（至于是用列表整理还是就用数据库整理根据自己的喜好）。数据库尤其适合整理名词概念类的笔记，零散杂乱，用列表整理其实挺头疼的，完全不知道该放在哪里，等列表长了，也不方便查看，用数据库整理就非常的适合。</p><p>「添加到数据库」功能很适合搭配渐进式笔记法，两者搭配将使得创建笔记更加无压，数据库从此变成一个类似标签的功能，我们可以快速新建一个文档，记完笔记，然后将这篇笔记添加到指定数据库，就完成了这篇笔记的记录和收集，而不用再寻找对应的主题笔记，思考这篇笔记要放在主题笔记的哪个位置。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240511233638-yeg0o4z.png"></div></div><p>而至于白板型的MOC，我暂时没有这个需求，就不多说了，可以用Excalidraw插件实现白板型MOC，或者使用外部的白板软件管理思源笔记的块Markdown链接实现。</p><h3 id="用moc管理笔记的好处"><a class="markdownIt-Anchor" href="#用moc管理笔记的好处"></a> 用MOC<strong>管理笔记的好处</strong></h3><ul><li><p><strong>任意的笔记管理方式</strong>：管理链接不受制于一个软件的文件系统，只需要它能提供链接功能，我们就可以根据自己的需要设计我们管理笔记的方式。你可以新建一个文档，用字母排序、创建时间排序管理你需要的笔记，也可以按作者排序、按领域、按主题来管理任何笔记。并且这些管理方式可以共存，同时展现。并且除了简单的层级结构以外， 你可以采用更多维度的方式来展现索引，将深层结构平铺开来，比如用表格、思维导图甚至白板管理索引。</p></li><li><p><strong>更轻松的笔记分类方式</strong>：用链接的方式可以根据需要对笔记的链接进行分类，可以忽略这篇笔记的实际存放位置、根据需要决定这篇笔记的展示位置。笔记本体可以全部放在一个文件夹里不分层级，这样就不用再像用文件夹分类的方式，纠结这篇笔记属于哪个分类，觉得这个笔记和某个 MOC 有关，就丢进去，以后觉得无关再删除这条笔记链接，就完成了笔记分类删除。</p></li><li><p><strong>笔记多分类和知识图谱</strong>：通过粘贴链接，让一个笔记出现在多个 MOC 里，实现笔记多分类。一个 MOC 笔记可以放入其他多个 MOC 笔记里，层层嵌套，笔记之间形成多对多的关系，最终形成自己的知识图谱。</p></li><li><p><strong>轻松复用过去的笔记</strong>：MOC 推崇管理链接，所以可以直接引用过去的笔记，实现知识复用，有利于知识复利。</p></li><li><p><strong>引用外部链接，汇集更多信息</strong>：可以引用内部的笔记链接，也可以引用外部的链接，比如网页链接、其他软件的笔记和项目链接，笔记软件的链接也可以被外部软件引用。把所有需要的信息，无论是这个笔记软件的还是其他软件的，都整理在一起，而且由于他们都是链接，彼此非常统一。</p></li><li><p><strong>兼容自上而下管理和自下而上的渐进式积累</strong>。MOC管理笔记，推崇以自上而下为主，自下而上为辅的笔记管理。自上而下就是先通过积累形成若干个主题，再从这些主题出发，想清楚自己缺少什么，需要去弥补什么，然后有意识地去获取知识来填充这些主题，完善这些主题。自下而上则是先积累素材，再组装成型。MOC可以和双链笔记的dailynote笔记法（渐进式笔记法）相兼容。举例，我今天学习了通货膨胀的相关笔记，但是对于经济学的我其实了解很粗浅，暂时没有调研计划，就先把通货膨胀这篇笔记的链接丢在《@经济学》这个主题笔记里（可以用列表或者数据库型MOC），等以后积累多了，再整理已有笔记，补充其他笔记，把这篇主题笔记给完善好。</p></li><li><p><strong>代替标签功能</strong>：</p><ul><li>可以在概念笔记的文档顶部，块引多个主题笔记完成打标签的步骤，可以在主题笔记的反链面板看到这些概念笔记，如果嫌弃用块引的方式打标签不仅仅污染笔记内容，反链面板管理笔记也不方便，可以选择思源笔记的数据库来代替标签功能。只需要点击「点击到数据库」功能，选择对应数据库就完成打标签的步骤，一篇笔记所属的数据库，会显示在右上方，悬浮即可查看，数据库还可以对所属条目进行排序、筛选等更高阶管理。</li><li>前面提到标签分类的一大问题是会创建很多重复标签，而在思源笔记里使用 MOC 的话，很大程度是可以解决这个问题的，因为思源笔记的文档是可以设置「<strong>命名</strong>」、「<strong>别名</strong>」的，如果你创建了一个《神经科学》MOC 笔记，害怕以后会把一些笔记会记到《脑科学》、《神经生物学》笔记里，或者害怕这篇笔记之后搜索找不到，那你就给《神经科学》这个 MOC 笔记打上脑科学、神经生物学别名就好了。合并重复文档也很简单，全选 MOC 笔记的内容，然后粘贴到另一个 MOC 笔记里就好了。思源笔记还提供了「转移引用」功能，能将一篇笔记的引用转移到另一篇笔记。所以思源笔记的双链其实是可以代替标签功能的，所以你可以把这些 MOC 笔记当成标签来使用，在 MOC 笔记里对引用这些标签的内容进行整理</li><li>前面也说到标签还有一个问题是信息汇聚完了，需要把标签本身转化为文档，否则难以复用，而用 MOC 的方式，本来创建的就是文档，可以直接在 MOC 笔记页面把汇聚的信息整理，MOC笔记还能引用其他MOC笔记，很方便复用。</li></ul></li></ul><p>‍</p><h2 id="moc面向主题地组织信息"><a class="markdownIt-Anchor" href="#moc面向主题地组织信息"></a> MOC：面向主题地组织信息</h2><p>MOC 的另一个核心理念，在于<strong>面向主题地组织信息</strong>。使用MOC管理笔记，会让你养成「<strong>面向主题</strong>」的笔记习惯，「<strong>以问题为导向</strong>」、「<strong>以行动为导向</strong>」去收集信息、整理信息，这能让使用者更多地去主动思考我需要什么、我学到了什么、还有哪些不足，而不是被动地接收信息，只是停留在收集信息这个粗浅水平上。</p><p>前面《@神经科学》主题笔记就是一个主题，我将所有我记的关于神经科学的笔记都汇总在这里，但是其实《@神经科学》这个主题很大，已经是一个领域了，其实管理很费劲。</p><p>很多时候，<strong>我们可以拆解大领域为一个个个小主题。</strong> 比如我，最近比较关心睡眠这个主题，那我就新建《@睡眠》这个主题笔记，收集所有我感兴趣的信息，如睡眠周期、睡眠与肌电脑电关系、古往今来对梦的认识、熬夜危害等等话题，其中我对熬夜危害特别感兴趣，因为自己总是熬夜，想通过了解危害让自己不敢熬夜。<strong>那我可以将熬夜升级为主题笔记</strong>，在《@睡眠》笔记下块引创建《@熬夜》这篇主题笔记，收集关于熬夜的各种信息，如经常熬夜会有哪些危害、熬夜之后补觉有没有用、同样的睡眠时间早起还是晚睡对身体危害更大等信息。</p><p>这就是「面向主题」的思想——<strong>针对当前感兴趣的主题有目的地去汇总、组织信息。</strong> 传统通过文件夹、标签管理笔记的方式，<strong>只是将单篇笔记进行分类归档，一个文件夹、一个标签下的笔记之间的关系实际还是零乱随意的</strong>。而将一个主题的信息整合在一篇「主题笔记」里，通过建立一个个的主题笔记，我们不再仅仅局限于查看一条条具体的概念笔记，而是可以站在一个更高的视角，<strong>以一种更有概括性的方式来回顾所有的笔记，思考这些笔记之间的关系是什么，帮助大脑为主题知识构建良好的线索，在脑海里建立起知识地图，更有序、更持久地将信息保留在脑中。</strong></p><p>然而，「面向主题」的魅力不仅仅在此。</p><p>许多人并不知道自己想要什么、需要什么，自己的知识缺口是什么，而是被动地接收各种渠道推送过来的信息，漫无目的地去浏览、学习。这就导致这些信息难以与生活建立关联，无法发挥真正的价值。</p><p>「面向主题」的学习，是一种有目的地主动学习、主动阅读，<strong>主动学习非常重要</strong>。被动接收信息，容易让自己患上「<strong>数字囤积症</strong>」，陷入「<strong>收藏者谬误</strong>」，以为收藏到就是学习到，只收集不思考，勤于分类，却懒于产出自己的观点。你有没有发现，当存在迫切的目标或 ddl，收集信息、做事就会特别快，并且完成确切的目标之后会特别有成就感，这就是主动学习的魅力。比起无目的地被动接受信息，主动学习可以更加高效、可以进行更加深入的思考，并且主动学习的内容是与我们自身相关的，能与自身建立关联，建立起记忆，有回忆和情感价值。更进一步地，有目的地收集一个主题的信息，而不是零散的收集五花八门的信息，能让自己在一个主题内有系统完整地学习，更好的吸收信息内化成个人观点、理清各个概念之间的联系，形成系统的知识体系。所谓的知识管理，我认为是<strong>想知道答案去主动探索知识，经过长时间有目的有方向地积累后，形成自己独到的知识体系，而非被动接收信息而不消化，或是搭建起精致的分类体系，对信息分门别类、热衷于囤积信息，却没有产出。</strong></p><p>很多人记笔记有几个误区：</p><ul><li><strong>认为笔记记得越多越好</strong>。其实笔记的数量和自己的认知提升没有正相关性，如果这些笔记乱七八糟，来自各种领域，非常零散，你只是记录没有思考、吸收、转化为自己的观点，那么这些笔记或许对你有害无益，你以为你记了就知道了，把「持有」当成了「拥有」，实际上别人一问依然只能含含糊糊回答。</li><li><strong>认为新建一篇笔记，我就要将其分类，分的越细致越好</strong>，于是使用图书馆分类法等复杂的分类管理系统来进行笔记分类。然而知识的价值并不体现在它的组织和分类形式上，而是体现在它是否能对与你相关的人或事产生影响。</li></ul><p>使用了MOC来管理我的笔记后，我发现：</p><p><strong>不应该推崇笔记的数量</strong>。笔记的数量并不代表一个人的知识丰富程度，主题笔记才能代表个人的知识体系。我们的目标应该是努力丰富和完善主题笔记，而不是去积累大量零散、不相关的概念笔记，积累概念笔记是过程，而非结果。</p><p><strong>使用图书馆分类法管理笔记进而维护起精致却庞杂的个人笔记分类体系其实没有必要，反而或许弊大于利。</strong> 过于执着分类很容易让人对各个领域都<strong>浅尝辄止</strong>，容易让我热衷于囤积与当下目标并不相关的信息，热衷于把信息存放在一个个分类目录下。这就会导致，看似笔记井井有条，搭建了一个精致完善的分类体系，实则脑子里却没有形成自己的知识体系。看似什么都懂实际什么都不精，只知其然，而不知其所以然，没有专精自己真正应该掌握的专业领域。记录的很多信息其实网上一搜就有答案，没有对信息进行更进一步的加工，没有和其他的笔记联动起来，形成自己独有的见解。浪费时间和精力记的这些笔记于自己实际的正向作用很小，记完可能就不再完善了，还容易在整理笔记上花费太多时间甚至影响自己的工作效率。</p><p>所以<strong>我推崇「面向主题地管理笔记」而不推崇用图书馆分类法搭建个人图书馆</strong>。我建议是根据自己的兴趣爱好、职业领域去长期且持续关注若干主题，建立若干相关项目，有的放矢，长期持续地去主动积累相关信息、积累自己的见解，真正对某些领域有所深刻了解。我一直都非常羡慕视频网站上的一些博主，他们可以有计划的罗列选题，然后安排时间去学习了解，制作视频，一些选题或许过去他们并不了解，却通过几周的调研查找资料，最终能向观众简单科普概念、介绍原理。我也很想成为这样的人，而他们这种方式其实就是面向主题地去执行任务。</p><p>此外，随着AIGC时代的到来，很多知识我们是可以直接问AI的，加速我们对信息的处理效率。但是有一点是AI没办法帮我们做的，那就是建立知识之间的关系、创造独属于个人的见解。而主题笔记实际上就是我们大脑的工作台，通过随心所欲把相关笔记拆散、排布、组合，组装出自己的看法。只要打开这篇主题笔记，自己所有关于这个话题已知的知识，整理的领域内最新的前沿进展以及个人在学习过程中的心得感悟就全都在里面了，一目了然。这就是独属于自己的知识财富，不仅代表着自己独到的思考，还蕴含着自己的回忆和感情，这是网页搜索引擎和AI无法替代和产出的。</p><h2 id="moc学以致用而不是纸上谈兵"><a class="markdownIt-Anchor" href="#moc学以致用而不是纸上谈兵"></a> MOC：学以致用而不是纸上谈兵</h2><p><strong>MOC还与PARA信息管理系统的理念相辅相成</strong>。PARA系统是由 Tiago Forte 提出的一种管理信息的方法，将笔记内容划分为四个部分：Projects（项目）、Areas（领域）、Resources（资源）和 Archives（归档），它点明了“<strong>实践就是知识的最终归宿，知识必须有利于推进项目，否则便是有害无益的</strong>”，推崇以行动为导向。而MOC则给予了笔记管理的具体方式，展示以主题为导向组织笔记的优势。</p><p>搭建一个精致的分类体系，会让使用者倾向于囤积信息，而非「以我为主，为我所用」。「以我为主，为我所用」的意思是说，一切我们所学到的知识，最终都是为了更好地增进对这个世界的理解，指导我们的行动。只有能够落实到实践中，能够用起来的知识，才是有意义的。无法用起来的知识，囤积在笔记里、记忆里，最终都会慢慢蒙尘，成为被遗忘在仓库里的陈旧累赘。</p><p>很多人其实很热衷于笔记分类，我过去也是。为什么要进行笔记分类呢？我想笔记分类有两个目的，一方面是为了方便汇聚信息进行思考，另一方面则是为了未来方便查找到笔记。而面向主题的笔记管理方式，完全能起到这两个作用，并且管理笔记会更轻松——<strong>创建一个主题笔记最重要的是把这个主题笔记完善好，不用再去在乎这个主题笔记属于哪个分类目录下。</strong> 你只需要专注把这个主题下的所有信息汇总、组织起来，经过消化吸收、整理思考，得到自己的观点，能切实对自己的生活、工作有改善，这就足够了。举例，《@熬夜》这篇主题笔记属于哪个分类，属于 <code>健康</code> 还是 <code>神经科学</code>，都无所谓，只要你能保证以后需要能找到这篇笔记就行，最重要的是有没有用这篇笔记正确认识到熬夜的危害，养成更健康的作息习惯。《@学习Solidworks制图》这篇主题笔记属于<code>软件学习</code>还是<code>研究生学习</code>分类，也不重要，重要的是经过学习之后，能否建立一些模型，并3D打印出来。<strong>与其纠结某个主题属于哪个分类，怎么把笔记弄得看起来井井有条，不如多对实际的主题内容进行思考，产出自己的观点，做出实际成绩，切实去改变自己，让自己变得更优秀、身体变得更健康、生活变得更顺心，这才是更重要的。</strong></p><p>我现在的笔记管理方式就是PARA系统与MOC管理方式组合使用，先明确自己的领域是什么，兴趣是什么，列出对自己当下重要的主题，制作项目执行计划，通过“实践→复盘→完善笔记→再去实践”的正向反馈循环，渐进式完善相关主题笔记，在前进过程中实现认知和能力的升级。</p><p>“<strong>学以致用</strong>”这个成语早就告诉我们，应该是为了实际应用去学习知识，而不是让学习的知识在收藏夹积灰，只是把记笔记当成一个消磨时间的兴趣爱好。所有的知识，如果只是放在那边囤积起来，它是永远都无法发挥作用的。唯有让知识流动起来，一遍又一遍地经过你的思考，不断完善、修改、丰富自身，指导我们的实践，并从中获得反馈再次自我完善，才能真正地创造价值！</p><h2 id="使用-moc-可能出现的问题"><a class="markdownIt-Anchor" href="#使用-moc-可能出现的问题"></a> 使用 MOC 可能出现的问题</h2><h3 id="我使用思源笔记基于moc管理笔记的相关设置"><a class="markdownIt-Anchor" href="#我使用思源笔记基于moc管理笔记的相关设置"></a> 我使用思源笔记基于MOC管理笔记的相关设置</h3><p>我只使用一个笔记本，<strong>我新建文档不是在文档树找一个适当地方新建，而是直接在MOC页面，选中以前感兴趣的概念和问题，使用「块引新建文档」功能新建文档</strong>，为此我对笔记本进行了设置，使得新建文档、块引新建文档都统一按月存放：</p><ul><li>块引新建文档路径：<code>/Notes/&#123;&#123;now | date "2006/2006-01"&#125;&#125;/</code></li><li>通过页签/Ctrl+N 新建文档的存放路径：<code>/Notes/&#123;&#123;now | date "2006/2006-01"&#125;&#125;/&#123;&#123;now | date "2006-01-02 15:04:05"&#125;&#125;</code></li></ul><p>这样我就可以专心在 MOC 页面块引新建文档，不需要考虑这些新建文档的存放位置了。</p><h3 id="要放弃文件夹和标签只用-moc-管理笔记吗"><a class="markdownIt-Anchor" href="#要放弃文件夹和标签只用-moc-管理笔记吗"></a> 要放弃文件夹和标签，只用 MOC 管理笔记吗</h3><p>不必非此即彼，<strong>一个健康的笔记管理系统应该使用多种功能、多种理念</strong>。MOC 也不是完全没有缺点。</p><p>我自己使用 MOC 管理笔记，新建概念笔记可以不在乎存放的路径，但是新建一个领域的MOC 我还是需要考虑下的，比如说 《@神经科学》、《@光学》，我喜欢在笔记本建立一个主题文档，将这些 MOC 笔记丢进去。并且目前思源笔记对 MOC 笔记的导出也不够友好，导出 Markdown 只能以脚注形式导出。所以你如果经常需要导出笔记分享给别人，可能需要斟酌下（期待官方或者大佬开发相关功能）。</p><p>MOC 管理笔记有一个日常使用问题，笔记导航如何持续存在于可视界面。用文件夹思维进行分类，文档树就是一个笔记导航，一直固定在一侧，这篇笔记看完，通过文档树可以去打开其他笔记。而使用 MOC，其实你的笔记导航是一篇笔记，你如果需要这个导航一直固定在一侧，就需要 MOC 笔记一直不关闭，比较好的方案是通过分屏来打开主题下的一篇笔记或者干脆悬浮查看笔记，如果不分屏的话，MOC 笔记可能被关闭、被其他笔记顶出可视区域，要看其他主题下的笔记，就又得找到这个 MOC 笔记。</p><p>MOC管理笔记还有一个问题，通过概念笔记要回到主题笔记不是那么方便，要么在概念笔记里放主题笔记的链接，要么通过概念笔记的反向链接面板找到主题笔记，但是这都很麻烦。<strong>我现在喜欢在主题笔记里建立一个数据库MOC</strong>，把概念笔记放进去，这样概念笔记就可以通过文档显示的所属数据库快速找到相关主题笔记。数据库管理笔记其实很灵活，可筛选和排序，只是不方便管理具有层级关系的笔记，这时候其实把数据库当成Inbox收集箱，等时机恰当，再批量复制块引用，用列表MOC来管理笔记。</p><p>标签很大程度上是可以被 MOC 笔记代替的，MOC 可以代替标签的汇总功能，还能在笔记里对汇总信息进行整理，只会比用标签管理笔记更好。所以我现在几乎没有使用标签功能。</p><h2 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h2><ul><li><a href="https://medium.com/@nickmilo22/in-what-ways-can-we-form-useful-relationships-between-notes-9b9ec46973c6">In what ways can we form useful relationships between notes? | by Nick Milo | Medium</a></li><li><a href="https://zhuanlan.zhihu.com/p/603635401">笔记间关联方式：文件夹，标签，双链与 MOC - 知乎 (zhihu.com)</a></li><li><a href="https://zhuanlan.zhihu.com/p/603647786">笔记系统：MOC（内容地图）的组织 - 知乎 (zhihu.com)</a></li><li><a href="https://www.yuque.com/deerain/gannbs/hb0gsd">MOC - 管理链接而非本体 (yuque.com)</a></li><li><a href="https://mp.weixin.qq.com/s/wWkLV8MVzMm_XF1ES7ljCQ">双链其实不重要！详解双链笔记的管理核心 (qq.com)</a></li></ul><p>‍</p>]]></content>
    
    
    <summary type="html">「面向主题地去管理笔记链接」，这一方法在双链笔记圈被叫做 MOC，Map of Contents，直接翻译叫做内容地图，我更喜欢将其翻译为索引笔记、主题笔记。使用MOC不仅仅能使得管理笔记更自由，可以根据需要让笔记出现在不同的MOC笔记里，很轻松地进行笔记复用，实现知识的持续性积累。更重要的是，使用MOC管理笔记，会让你养成「面向主题」的笔记习惯，「以问题为导向」去收集信息、整理信息，让你更多地去深度思考而不仅仅停留在收集信息这个水平上，让学到的知识真正去使用，而不是积灰！实践就是知识的最佳归宿，我们学习知识要用来帮助个人成长、改善生活，而不应该只是热衷囤积与当下目标并不相关的信息，让这些收集得来的信息一直在收藏夹里积灰，浪费时间精力却无所得。</summary>
    
    
    
    <category term="其他笔记" scheme="http://achuan-2.top/categories/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="思源笔记" scheme="http://achuan-2.top/tags/%E6%80%9D%E6%BA%90%E7%AC%94%E8%AE%B0/"/>
    
    <category term="知识管理" scheme="http://achuan-2.top/tags/%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Matlab 优化异常处理：fprintf的妙用</title>
    <link href="http://achuan-2.top/post/matlab-optimization-abnormal-processing-fprintf-s-wonderful-use-z2wefdb.html"/>
    <id>http://achuan-2.top/post/matlab-optimization-abnormal-processing-fprintf-s-wonderful-use-z2wefdb.html</id>
    <published>2024-05-07T08:44:43.000Z</published>
    <updated>2024-05-07T09:29:28.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="matlab-优化异常处理fprintf的妙用"><a class="markdownIt-Anchor" href="#matlab-优化异常处理fprintf的妙用"></a> Matlab 优化异常处理：fprintf的妙用</h1><div class="tag-plugin image"><div class="image-bg"><img src="http://127.0.0.1:6806/assets/Matlab%20优化异常处理：fprintf的妙用-20240507170909-9a4kpt8.png"></div></div><blockquote><p><strong>总结</strong></p><p>优化Matlab try…catch.end 的报错提示，使其既能简单显示报错原因，需要时也可以查看具体报错位置。</p></blockquote><p>Matlab 如果给语句加了 try…catch.end，可以对异常错误进行处理，使得程序在遇到错误时不会立即停止，并可以修改输出把原本的代码报错变为用户能理解的错误原因。</p><p>比如下面这段代码，运行之后如果报错，就会提示错误原因</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">    <span class="comment">% 试图执行可能会出错的代码</span></span><br><span class="line">    a = <span class="number">1</span>:<span class="number">5</span>;</span><br><span class="line">    b = <span class="number">6</span>;</span><br><span class="line">    c = a(<span class="number">6</span>);  </span><br><span class="line"><span class="keyword">catch</span> ME</span><br><span class="line">    <span class="comment">% 显示具体的错误信息</span></span><br><span class="line">    fprintf(<span class="number">2</span>,<span class="string">&#x27;%s\n&#x27;</span>, ME.message);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>但是有一个问题——<strong>就是不会显示到底哪一行出错了，不方便调试查看</strong></p><h6 id="clip_2024-05-07_16-43-14"><a class="markdownIt-Anchor" href="#clip_2024-05-07_16-43-14"></a> <img src="http://127.0.0.1:6806/assets/Clip_2024-05-07_16-43-14-20240507164317-prk7b3f.png" alt="Clip_2024-05-07_16-43-14"></h6><p>‍</p><p>其实 matlab 的命令行不仅仅可以输出纯文字，<strong>还可以输出超链接</strong>，这个超链接除了可以跳转网页，<strong>还可以执行命令</strong>，比如将超链接的 href 设置为 <code>matlab:clc</code> 点击就可以清屏，设置为 <code>matlab:fprintf</code> 点击就可以输出文字！</p><p>所以我们可以把代码错误的具体位置信息封装起来，<strong>需要的时候点击输出到控制台！这个报错的代码行号是可以直接点击跳转的！</strong></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">    <span class="comment">% 试图执行可能会出错的代码</span></span><br><span class="line">    a = <span class="number">1</span>:<span class="number">5</span>;</span><br><span class="line">    b = <span class="number">6</span>;</span><br><span class="line">    c = a(<span class="number">6</span>);  </span><br><span class="line"><span class="keyword">catch</span> ME</span><br><span class="line">    <span class="comment">% 自定义显示简单错误信息  </span></span><br><span class="line">    fprintf(<span class="number">2</span>,<span class="string">&#x27;%s\n&#x27;</span>, ME.message);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">% 折叠代码报错位置</span></span><br><span class="line">    errorReport = ME.getReport(<span class="string">&#x27;extended&#x27;</span>);</span><br><span class="line">    errorReport =  matlab.net.base64encode(unicode2native(errorReport, <span class="string">&#x27;UTF-8&#x27;</span>));</span><br><span class="line">    errLink = [<span class="string">&#x27;&lt;a href =&quot;matlab:fprintf(2,&#x27;&#x27;\n%s\n&#x27;&#x27;, &#x27;</span>...</span><br><span class="line">        <span class="string">&#x27;native2unicode(matlab.net.base64decode(&#x27;&#x27;&#x27;</span> errorReport <span class="string">&#x27;&#x27;&#x27;),&#x27;&#x27;UTF-8&#x27;&#x27;));&quot;&gt;&#x27;</span>...</span><br><span class="line">        <span class="string">&#x27;View detailed error information&lt;/a&gt;.&#x27;</span>];</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">% 点击自动清空窗口</span></span><br><span class="line">    clcLink = <span class="string">&#x27;&lt;a href =&quot;matlab:clc&quot;&gt;Clear command window&lt;/a&gt;.&#x27;</span>;</span><br><span class="line">    fprintf(<span class="number">2</span>,<span class="string">&#x27;%s %s\n&#x27;</span> ,errLink,clcLink);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-05-07_17-14-54-20240507171504-pkra6ve.png"></div></div><p>包装为函数</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">    <span class="comment">% 试图执行可能会出错的代码</span></span><br><span class="line">    a = <span class="number">1</span>:<span class="number">5</span>;</span><br><span class="line">    b = <span class="number">6</span>;</span><br><span class="line">    c = a(<span class="number">6</span>);  </span><br><span class="line"><span class="keyword">catch</span> ME</span><br><span class="line">    <span class="comment">% 自定义显示简单错误信息  </span></span><br><span class="line">    fprintf(<span class="number">2</span>,<span class="string">&#x27;%s\n&#x27;</span>, ME.message);</span><br><span class="line">    reportError(ME);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 优化异常处理</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reportError</span><span class="params">(ME)</span></span></span><br><span class="line">    <span class="comment">% 折叠代码报错位置</span></span><br><span class="line">    errorReport = ME.getReport(<span class="string">&#x27;extended&#x27;</span>);</span><br><span class="line">    errorReport =  matlab.net.base64encode(unicode2native(errorReport, <span class="string">&#x27;UTF-8&#x27;</span>));</span><br><span class="line">    errLink = [<span class="string">&#x27;&lt;a href =&quot;matlab:fprintf(2,&#x27;&#x27;\n%s\n&#x27;&#x27;, &#x27;</span>...</span><br><span class="line">        <span class="string">&#x27;native2unicode(matlab.net.base64decode(&#x27;&#x27;&#x27;</span> errorReport <span class="string">&#x27;&#x27;&#x27;),&#x27;&#x27;UTF-8&#x27;&#x27;));&quot;&gt;&#x27;</span>...</span><br><span class="line">        <span class="string">&#x27;View detailed error information&lt;/a&gt;.&#x27;</span>];</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">% 点击自动清空窗口</span></span><br><span class="line">    clcLink = <span class="string">&#x27;&lt;a href =&quot;matlab:clc&quot;&gt;Clear command window&lt;/a&gt;.&#x27;</span>;</span><br><span class="line">    fprintf(<span class="number">2</span>,<span class="string">&#x27;%s %s\n&#x27;</span> ,errLink,clcLink);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>‍</p>]]></content>
    
    
    <summary type="html">优化Matlab try...catch.end 的报错提示，使其既能简单显示报错原因，需要时也可以查看具体报错位置。</summary>
    
    
    
    <category term="其他笔记" scheme="http://achuan-2.top/categories/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="编程" scheme="http://achuan-2.top/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="Matlab" scheme="http://achuan-2.top/tags/Matlab/"/>
    
  </entry>
  
  <entry>
    <title>我过去在 onenote、wolai 的笔记管理方法</title>
    <link href="http://achuan-2.top/post/my-note-management-method-in-onenote-wolai-zrqwln.html"/>
    <id>http://achuan-2.top/post/my-note-management-method-in-onenote-wolai-zrqwln.html</id>
    <published>2024-05-04T09:39:32.000Z</published>
    <updated>2024-05-04T10:06:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>本文的语雀链接：<a href="https://www.yuque.com/achuan-2/siyuan/ssskm9gab9mgsyin">https://www.yuque.com/achuan-2/siyuan/ssskm9gab9mgsyin</a></p><p>其实我用的笔记软件不多，真正作为主力笔记软件的，只有三个软件，依次为onenote，wolai和思源笔记。简单回顾下过去在 onenote、wolai 是怎么管理笔记的。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/%E6%88%91%E8%BF%87%E5%8E%BB%E5%9C%A8%20onenote%E3%80%81wolai%20%E7%9A%84%E7%AC%94%E8%AE%B0%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95-20240504182518-77blt0t.png"></div></div><h2 id="onenote"><a class="markdownIt-Anchor" href="#onenote"></a> OneNote</h2><p>最早用的笔记软件是OneNote，那时只会用word的我，像是打开了新世界的大门。OneNote就像是电子的活页笔记本一样，虽然微软这些年一直没有怎么更新OneNote的功能，但OneNote功能其实本身就非常强大。</p><ul><li>可以新建多个笔记本，每个笔记本可以建立多个分区，分区还能套分区，分区下面可以建立很多笔记，笔记可以排序，划分层级。</li><li>OneNote的界面左边负责管理笔记本层级，右边用来新建笔记，至今我都觉得这个设计非常好。</li><li>OneNote还有一个快速笔记的功能，快速笔记可以以小窗口方式置顶，很方便临时记笔记、看视频记笔记。</li><li>OneNote插件可以显示以日历的形式显示自己在那一天更新、创建了什么笔记。</li><li>支持设置笔记模板</li><li>支持共享笔记，我还创建了一个共享笔记本，与酷安网友共享（虽然后面放弃跑路了orz）</li><li>支持复制笔记链接，不仅仅是文档链接，还可以是段落链接，并且</li></ul><p>我还在知乎写过OneNote使用分享：<a href="https://zhuanlan.zhihu.com/p/104812728">OneNote 半年使用心得 by 风渡巛</a></p><p>有一段时间，我还非常期待思源能借鉴OneNote的快速笔记功能和左右栏设计呢（后来就彻底忘了这件事了……）。</p><p>当时我在OneNote大致是这样整理笔记的，分为学科，书籍，软件，百科知识，个人日记等笔记本，学科笔记本呢，我就会分大一上，大一下……就是非常传统的分类方法。现在这种管理方法回顾起来，确实有不足之处，因为我很难复用我以前的笔记，这门课程讲到什么，我就记什么，另一个课程讲到同一个概念，我又会记一遍，<strong>当时没有把这个概念转化为一篇专门的概念笔记，不断去完善补充它的想法</strong>，所以记的大部分笔记其实都没法复用，记完就丢了。</p><p>另外，当时我在个人日记上就会记录当天做了什么，记了什么笔记，并丢一个笔记链接在里面，其实和现在自己使用的dailynote比较像，只不过OneNote不支持直接在日记页面新建文档，我还是得找个适当的分类，在那里新建笔记。还养成了周总结、月总结的习惯。</p><blockquote><p><strong>补充说明：OneNote的链接功能其实很强</strong><br>OneNote很早就支持复制笔记链接的，有些大佬也分享自己用OneNote的链接来管理主题笔记、笔记目录的方法，可惜当时的我并没有发现管理链接这个方法的优秀之处。一直使用笔记本（文档树）进行分类、管理层级，只在个人日记里使用到笔记链接。<br>我也是写这篇笔记才发现，<strong>原来OneNote老早就支持[[]]的自动链接功能</strong>！！！比如在笔记里打[[经济泡沫]]，如果这篇笔记已经存在了，就会自动链接，就算那个笔记后来改名了依然还能正确跳转！如果不存在，则会自动在当前分区新建该笔记。只是和目前的双链笔记相比，只是单向链接，不支持双向链接。</p></blockquote><p>下面是之前一些过去的OneNote笔记截图</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/net-img-1714811934906-9567d4d3-42ff-413e-ba55-430f1adfd999-20240504173945-8dbqv77.jpeg"></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/net-img-1714811946166-4df075d0-84d3-4f14-8b2e-ec54cbec37eb-20240504173945-xcze2ll.jpeg"></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/net-img-1714811963761-a1b60364-87f1-4edf-8d9a-42ce745766c2-20240504173945-km6agj1.jpeg"></div></div><p>‍</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/net-img-1714811954683-2940d027-e6b9-40d0-82e5-0fc61cddeec0-20240504173945-iasrqt8.jpeg"></div></div><p>‍</p><p>最初接触OneNote的时候我还不知道Markdown，后来是在酷安经常刷到Markdown的分享，才了解到。又因为专业需要学习C++、Python和R语言，就开始正式接触并使用Markdown了（用Typora和VSCode来写Markdown）。Markdown简易排版的概念深得我心，在此之前我OneNote的笔记真的是随心所欲的排版，各种颜色、各种字体，OneNote还支持无限画板，笔记左边放一个右边放一个的。后来回顾来看，笔记真的记的很没有逻辑，也是接触到Markdown之后，我才开始习惯用标题来排版。</p><p>后来不用OneNote，很大一部分原因是OneNote对代码块的高亮支持很差（要么用插件来实现代码块插入，或者直接从vscode粘贴代码到OneNote可以保留颜色），不支持GIF图、对文章大纲的支持很不好（得用插件生成大纲）。再加上当时OneNote记的笔记太多太杂（笔记占用3个G），非常凌乱，并且我没有手写的需求（字丑加贫穷），让我逐渐产生了放弃OneNote的想法，以至于最终放弃。</p><h2 id="wolai"><a class="markdownIt-Anchor" href="#wolai"></a> wolai</h2><p>弃用OneNote后，就主要使用wolai笔记，时间大概是2020年底。</p><blockquote><p>那时也是在wolai群里才知道思源笔记这个软件，当时的思源笔记还是基于Vditor的Markdown笔记软件</p></blockquote><p>之所以没选择notion，有几个原因。尽管wolai当时没有数据库，但当时我也不懂如何使用数据库，加上notion当时没有悬浮大纲、没有简单表格，wolai的颜值更符合我的审美，对中文的输入体验也很好。于是就选择wolai作为下一个主力笔记软件。</p><p>在wolai记的笔记比起onenote会规整多了，而且那段时间，我也非常热衷于把笔记记的好看。我还搞了一个个人主页，把自己的学习兴趣爱好笔记统统放进去，每门课程的笔记都给我整理的整整齐齐的。</p><p>我开始新建月记，在一个文档里，把一个月的日记都记在一起。wolai是有一个模板按钮的，每次点击就能在下面新建一篇日记，我将日记模板为设置为今日待办、我的一天（按时间记录干了什么事情）、反思（做的怎么样，哪些行为有所改进。</p><p>我在个人主页放置主题笔记，分为树洞、工作与学习、编程、标签几个大类。之所以还有一个标签，是因为当时wolai没有标签功能，wolai官方推荐使用双链来代替标签。（现在我在思源笔记里把双链甚至数据库当作标签来用）</p><p>我开始更倾向于在主题笔记里使用管理链接的方式来管理主题下的所有信息和笔记了。比如每个课程笔记里，我不仅仅会记录这个课程的个人笔记，还会记录老师的信息、学分多少、往年的考试资料，还会在课程主页一些学习资料链接和重点总结，一个笔记就包含了我所有需要的内容，而不像之前的笔记方法，没有什么整理目录的意识。这种整理方式确实很大程度有助于我更好的梳理笔记，进行深入思考，学习成绩得到了提高。</p><blockquote><p>我在使用wolai的那段时间，大学绩点排名从原来的十名开外，飙升到第二名，以至于后面可以顺利保研来复旦。虽然不能把功劳都归于一个笔记软件，但是用wolai确实很好帮助我梳理了课程笔记，对wolai一直都挺有好感，只可惜wolai的马老板没能维护好wolai的口碑……</p></blockquote><p>不过那时的笔记还是没有区分主题笔记和概念笔记，每个课程的笔记记得很详细，还是没有考虑复用的问题，那时候也没接触什么PARA分类，更别说dailynote笔记、INKP笔记法。</p><p>在wolai的笔记截图</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/net-img-1714812661675-6bc687f7-dc7a-40be-bee8-45a24141fd79-20240504173945-v2bqo9m.jpeg"></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/net-img-1714812573934-10fd8e04-f38d-4f03-b617-b648eb2fbc61-20240504173945-sd0akut.png"></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/net-img-1714812638737-72e0d7cc-7181-48ef-9918-2a0071c95451-20240504173945-fyayof5.png"></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/net-img-1714812610043-0b21bc6e-7128-4252-8ea4-a52726ff9b9d-20240504173945-siton3o.png"></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/net-img-1714812519909-faea8159-5dc9-4d24-947a-f8b2875079ab-20240504173945-d1v5f96.jpeg"></div></div>]]></content>
    
    
    <summary type="html">其实我用的笔记软件不多，真正作为主力笔记软件的，只有三个软件，依次为onenote，wolai和思源笔记。简单回顾下过去在 onenote、wolai 是怎么管理笔记的。</summary>
    
    
    
    <category term="阿巛随笔" scheme="http://achuan-2.top/categories/%E9%98%BF%E5%B7%9B%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="思源笔记" scheme="http://achuan-2.top/tags/%E6%80%9D%E6%BA%90%E7%AC%94%E8%AE%B0/"/>
    
    <category term="知识管理" scheme="http://achuan-2.top/tags/%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>思考我应该如何度过我的一天</title>
    <link href="http://achuan-2.top/post/think-about-how-i-should-spend-my-day-zl38tl.html"/>
    <id>http://achuan-2.top/post/think-about-how-i-should-spend-my-day-zl38tl.html</id>
    <published>2024-05-03T13:40:46.000Z</published>
    <updated>2024-05-03T14:39:49.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>💡 你如何度过每一天，也就如何度过这一生。</p></blockquote><h2 id="工作日"><a class="markdownIt-Anchor" href="#工作日"></a> 工作日</h2><h4 id="早上"><a class="markdownIt-Anchor" href="#早上"></a> 早上</h4><p>早上八点起床，倒数5s起床，不赖床。起床后在床上玩手机，尽量不要看除微信的社交媒体信息，避免分心，直接下床，洗漱后，吃早饭，去工位。</p><p>八点半到工位，确认自己当天的计划，同时简单看下自己的周计划，确认当日的计划符合这周的整体计划。</p><h4 id="白天"><a class="markdownIt-Anchor" href="#白天"></a> 白天</h4><p>白天专注干活，专注工作，珍惜每分每秒，专注效率</p><ul><li>研究生的任务管理，以能最快发论文为方向，安排自己的工作进展。要事为先，优先做最重要的事情，一些个人的、不太重要的琐事可以放到晚点再做。</li><li>如果当天有实验数据，及时记录。</li><li>不要完美主义做事，不要想着把事情做好，或许想着把事情做坏，会更有效率，结果或许会更好。</li><li>不要恐惧不稳定，非要固定某个事情某个时间做，请合理安排任务</li><li>不要和别人比工作时间，不要有休息羞耻，而应该和人比工作效率</li><li>做事不要犹犹豫豫，该做就做</li></ul><p>白天的休息</p><ul><li><p>吃饭可以听小宇宙博客解闷充电，不要边吃饭边刷视频，对消化不好。</p></li><li><p>午睡控制只睡半小时，不睡太久。</p></li></ul><h4 id="晚上"><a class="markdownIt-Anchor" href="#晚上"></a> 晚上</h4><p>当天没有ddl的话，晚上可以适当读书充电学习，或者跑步健身</p><p>晚上23:30回宿舍，睡前回顾一天，反省总结，没做好的地方，思考明天如何做的更好，并且粗略计划自己明天需要做什么。</p><p>确保自己1点钟前睡觉</p><h2 id="周末"><a class="markdownIt-Anchor" href="#周末"></a> 周末</h2><p>依旧每天早上八点起床，凌晨1点钟睡觉。周末要珍惜时间，不要一整天都在床上，睡太久也不见得对自己有益。</p><p>周末更需要注重建立自己的生活秩序感，除了工作外，可以每周末固定进行一些个人活动，去有意识地培养自己的情操，提高自己的能力。比如进行兴趣爱好技能练习（练习弹尤克里里、摄影），学习想学的课程（统计学、深度学习、solidworks）、写博客、进行周总结，可以出去逛逛公园、citywalk，适当放松自己，看看大自然。。</p><p>‍</p>]]></content>
    
    
    <summary type="html">你如何度过每一天，也就如何度过这一生。</summary>
    
    
    
    <category term="阿巛随笔" scheme="http://achuan-2.top/categories/%E9%98%BF%E5%B7%9B%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="工作效率" scheme="http://achuan-2.top/tags/%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/"/>
    
  </entry>
  
  <entry>
    <title>用Markdown写微信公众号文章</title>
    <link href="http://achuan-2.top/post/write-a-wechat-public-account-article-with-markdown-zatxal.html"/>
    <id>http://achuan-2.top/post/write-a-wechat-public-account-article-with-markdown-zatxal.html</id>
    <published>2024-04-27T11:03:14.000Z</published>
    <updated>2024-04-27T11:12:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>现有的Markdown转公众号文章编辑器都挺完善的，有些还加了超链接转脚注功能，因为微信规定了订阅号是不能使用指向外链的超链接的，只能用链接微信文章。但是找来找去，感觉大部分的编辑器只支持Markdown图片的锚文本转图注，却不支持图片title可以转为图注，而后者是目前语雀、思源笔记添加图注使用的语法。</p><p>于是折腾一下午魔改别人的编辑器，使其支持Markdown的图片title可以变为图注（为什么大家都这么喜欢用anchor text呢，叹气），这样我思源笔记的内容就可以直接粘贴上去不需要修改，直接发公众号了。</p><p>还把两个repo都部署到Github Page了，就可以打开链接直接在线用了（主要方便我自己用哈哈哈）。</p><h2 id="编辑器1"><a class="markdownIt-Anchor" href="#编辑器1"></a> 编辑器1</h2><p>Github：<a href="https://github.com/Achuan-2/markdown2wechat">https://github.com/Achuan-2/markdown2wechat</a></p><p>在线使用：<a href="https://achuan-2.github.io/markdown2wechat/">https://achuan-2.github.io/markdown2wechat/</a></p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-04-27_19-04-07-20240427190409-3nqxluz.png"></div></div><h2 id="编辑器2"><a class="markdownIt-Anchor" href="#编辑器2"></a> 编辑器2</h2><p>Github：<a href="https://github.com/Achuan-2/wechat-mdeditor">https://github.com/Achuan-2/wechat-mdeditor</a></p><p>在线使用：<a href="https://achuan-2.github.io/wechat-mdeditor/">https://achuan-2.github.io/wechat-mdeditor/</a></p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-04-27_19-05-58-20240427190601-23fa31i.png"></div></div><p>‍</p>]]></content>
    
    
    <summary type="html">折腾一下午魔改别人的编辑器，使其支持Markdown的图片title可以变为图注（为什么大家都这么喜欢用anchor text呢，叹气）</summary>
    
    
    
    <category term="其他笔记" scheme="http://achuan-2.top/categories/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="折腾" scheme="http://achuan-2.top/tags/%E6%8A%98%E8%85%BE/"/>
    
    <category term="博客" scheme="http://achuan-2.top/tags/%E5%8D%9A%E5%AE%A2/"/>
    
    <category term="编程" scheme="http://achuan-2.top/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="前端" scheme="http://achuan-2.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="微信公众号" scheme="http://achuan-2.top/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/"/>
    
  </entry>
  
  <entry>
    <title>Hexo stellar主题更新 v1.28.0 及个性化修改</title>
    <link href="http://achuan-2.top/post/20240427-stellar-theme-update-v1280-and-decoration-zanvt4.html"/>
    <id>http://achuan-2.top/post/20240427-stellar-theme-update-v1280-and-decoration-zanvt4.html</id>
    <published>2024-04-27T04:33:25.000Z</published>
    <updated>2024-04-27T10:36:29.000Z</updated>
    
    <content type="html"><![CDATA[<p>Hexo stellar 主题有段时间大改样式，当时没时间更新主题。感觉现在主题比较稳定了，终于找到时间把主题更新一下。由于stellar经过作者大改，我之前写的很多自定义样式都失效了。所以折腾了一上午，重新美化了一下。希望自己以后坚持每周都写一篇博客吧🐦。</p><h2 id="博客界面"><a class="markdownIt-Anchor" href="#博客界面"></a> 博客界面</h2><h3 id="目前的博客样式"><a class="markdownIt-Anchor" href="#目前的博客样式"></a> 目前的博客样式</h3><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-04-27_12-14-58-20240427121503-vlzsk3v.png" alt="主页"></div><div class="image-meta"><span class="image-caption center">主页</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-04-27_11-19-05-20240427111907-krckfdm.png" alt="文章内"></div><div class="image-meta"><span class="image-caption center">文章内</span></div></div><h3 id="之前的历史快照"><a class="markdownIt-Anchor" href="#之前的历史快照"></a> 之前的历史快照</h3><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20230926104442-ig83unh.png" alt="2023.09.26"></div><div class="image-meta"><span class="image-caption center">2023.09.26</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20231105162526-h0wksqr.png" alt="2023.11.05"></div><div class="image-meta"><span class="image-caption center">2023.11.05</span></div></div><h2 id="目前我是怎么发hexo博客的"><a class="markdownIt-Anchor" href="#目前我是怎么发hexo博客的"></a> 目前我是怎么发Hexo博客的</h2><p>现在我基本是使用「<a href="https://github.com/siyuan-note/siyuan">思源笔记</a>」来管理笔记和写博客，这是一个管理和编辑体验很好的双链笔记软件。思源笔记有一个「<a href="https://github.com/terwer/siyuan-plugin-publisher">发布工具</a>」插件，可以很便捷的把思源笔记里的文章上传到各个平台，非常省心，再结合思源笔记的数据库功能可以很方便的管理发布的文章。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-04-27_12-43-28-20240427124338-tlz4y8f.png" alt="发布工具"></div><div class="image-meta"><span class="image-caption center">发布工具</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-04-27_13-02-42-20240427130249-xfw7ivx.png" alt="用思源笔记的数据库来管理博客文章"></div><div class="image-meta"><span class="image-caption center">用思源笔记的数据库来管理博客文章</span></div></div><h2 id="代码更改记录"><a class="markdownIt-Anchor" href="#代码更改记录"></a> 代码更改记录</h2><h3 id="markdown图片title标题失效"><a class="markdownIt-Anchor" href="#markdown图片title标题失效"></a> Markdown图片title标题失效</h3><p>Markdown 的完整图片语法是 <code>![anchor text](img_src &quot;title&quot;)</code>，一些笔记软件像语雀、思源笔记目前都是支持解析title作为图片标题的，一些hexo主题如butterfly应该也是支持的（也是我提的建议）。</p><p>stellar之前是接受了我的<a href="https://github.com/xaoxuu/hexo-theme-stellar/commit/4be3e6e123b7d22f00d5a4d419c954bb2557cf67">pull request</a>，可以解析Markdown的图片title语法作为图片标题，</p><p>但现在直接把解析Markdown标题的删掉了（见<a href="https://github.com/xaoxuu/hexo-theme-stellar/issues/340">issue讨论</a>，<a href="https://github.com/xaoxuu/hexo-theme-stellar/commit/e92cb81296e34e85d54bf26f35b6eda83d78b534">代码改动</a>）。</p><p>作为基本只用Markdown语法写博客的人来说，实在太不友好了，所以又把删掉的代码给加了回来。</p><p>并且改进了下 <code>themes\stellar\scripts\filters\index.js</code>，减少误替换的情况发生。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_render:html&#x27;</span>, <span class="built_in">require</span>(<span class="string">&#x27;./lib/img_lazyload&#x27;</span>).<span class="property">processSite</span>);</span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_render:html&#x27;</span>, <span class="built_in">require</span>(<span class="string">&#x27;./lib/img_onerror&#x27;</span>).<span class="property">processSite</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">change_image</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">theme</span>.<span class="property">config</span>.<span class="property">tag_plugins</span>.<span class="property">image</span>.<span class="property">parse_markdown</span>) &#123;</span><br><span class="line">        <span class="comment">// Step 1: 删除所有零宽空格字符</span></span><br><span class="line">        data.<span class="property">content</span> = data.<span class="property">content</span>.<span class="title function_">replace</span>(<span class="regexp">/\u200B/g</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Step 2: 修改正则表达式，只在行首或前面只有空格和缩进时替换图片链接</span></span><br><span class="line">        data.<span class="property">content</span> = data.<span class="property">content</span>.<span class="title function_">replace</span>(</span><br><span class="line">            <span class="regexp">/^(?:\s*)!\[(.*?)\]\((.*?)\s*(?:&quot;(.*?)&quot;)?\)/gm</span>,</span><br><span class="line">            <span class="string">&#x27;&#123;% image $2 $3 %&#125;&#x27;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;before_post_render&#x27;</span>, change_image, <span class="number">9</span>);</span><br></pre></td></tr></table></figure><h3 id="添加分类-widget"><a class="markdownIt-Anchor" href="#添加分类-widget"></a> 添加分类 widget</h3><p>这样在主页就知道自己文章有多少分类了</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/image-20240427141259-4ro3r3w.png"></div></div><p>‍</p><p>在 <code>/themes/stellar/layout/_partial/widgets/</code> 下新建 <code>categories.ejs</code>，填入以下内容：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">function</span> <span class="title function_">layoutCategoriesDiv</span>(<span class="params"></span>) &#123; <span class="keyword">var</span> el=<span class="string">&#x27;&#x27;</span> ; <span class="keyword">if</span> (site.<span class="property">categories</span>===<span class="literal">undefined</span> || site.<span class="property">categories</span>.<span class="property">length</span>===<span class="number">0</span>) &#123; <span class="keyword">return</span></span><br><span class="line">    el; &#125; <span class="keyword">var</span> opts=<span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, item); <span class="keyword">delete</span> opts[<span class="string">&#x27;title&#x27;</span>]; <span class="keyword">delete</span> opts[<span class="string">&#x27;layout&#x27;</span>]; opts.<span class="property">class</span>=<span class="string">&#x27;category &#x27;</span> ;</span><br><span class="line">    el+=<span class="string">`&lt;widget class=&quot;widget-wrapper<span class="subst">$&#123;scrollreveal(<span class="string">&#x27; &#x27;</span>)&#125;</span> categories-widget&quot;&gt;`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (item.<span class="property">title</span>) &#123;</span><br><span class="line">    el += <span class="string">&#x27;&lt;div class=&quot;widget-header categories-header dis-select&quot;&gt;&#x27;</span>;</span><br><span class="line">        el += <span class="string">&#x27;&lt;span class=&quot;name&quot;&gt;&#x27;</span> + item.<span class="property">title</span> + <span class="string">&#x27;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">        el += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    el += <span class="string">&#x27;&lt;div class=&quot;widget-body&quot;&gt;&#x27;</span>;</span><br><span class="line">        <span class="comment">// Generate categories list</span></span><br><span class="line">        site.<span class="property">categories</span>.<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params">category</span>) &#123;</span><br><span class="line">        el += <span class="string">`&lt;div class=&quot;<span class="subst">$&#123;opts.<span class="keyword">class</span>&#125;</span>&quot;&gt;`</span>;</span><br><span class="line">            el += <span class="string">`&lt;svg class=&quot;category-icon&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;16&quot; height=&quot;16&quot;</span></span><br><span class="line"><span class="string">                viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;1.5&quot; stroke-linecap=&quot;round&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;path d=&quot;M18 10h-5&quot; opacity=&quot;.5&quot; /&gt;</span></span><br><span class="line"><span class="string">                &lt;path d=&quot;M10 3h6.5c.464 0 .697 0 .892.026a3 3 0 0 1 2.582 2.582c.026.195.026.428.026.892&quot;</span></span><br><span class="line"><span class="string">                    opacity=&quot;.5&quot; /&gt;</span></span><br><span class="line"><span class="string">                &lt;path</span></span><br><span class="line"><span class="string">                    d=&quot;M2 6.95c0-.883 0-1.324.07-1.692A4 4 0 0 1 5.257 2.07C5.626 2 6.068 2 6.95 2c.386 0 .58 0 .766.017a4 4 0 0 1 2.18.904c.144.119.28.255.554.529L11 4c.816.816 1.224 1.224 1.712 1.495a4 4 0 0 0 .848.352C14.098 6 14.675 6 15.828 6h.374c2.632 0 3.949 0 4.804.77c.079.07.154.145.224.224c.77.855.77 2.172.77 4.804V14c0 3.771 0 5.657-1.172 6.828C19.657 22 17.771 22 14 22h-4c-3.771 0-5.657 0-6.828-1.172C2 19.657 2 17.771 2 14z&quot; /&gt;</span></span><br><span class="line"><span class="string">            &lt;/svg&gt;`</span>;</span><br><span class="line">            el += <span class="string">`&lt;a href=&quot;<span class="subst">$&#123;url_for(category.path)&#125;</span>&quot;&gt;<span class="subst">$&#123;category.name&#125;</span> (<span class="subst">$&#123;category.length&#125;</span>)&lt;/a&gt;`</span>;</span><br><span class="line">            el += <span class="string">`&lt;/div&gt;`</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        el += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    el += <span class="string">&#x27;&lt;/widget&gt;&#x27;</span>; <span class="comment">// Close widget-wrapper</span></span><br><span class="line">    <span class="keyword">return</span> el;</span><br><span class="line">    &#125;</span><br><span class="line">    %&gt;</span><br><span class="line">    &lt;%- <span class="title function_">layoutCategoriesDiv</span>() %&gt;</span><br></pre></td></tr></table></figure><p>在 <code>themes/stellar/source/css/_layout/widgets/</code> 下新建 <code>categories.styl</code> 文件，填入以下内容：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">// categories widget 样式</span><br><span class="line"><span class="selector-class">.widget-wrapper</span><span class="selector-class">.categories-widget</span> <span class="selector-class">.widget-body</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: $border-card;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--alpha50); // 这里设置背景</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">2px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>); // 添加阴影效果</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">// 每个分类的样式</span><br><span class="line"><span class="selector-class">.category</span></span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span></span><br><span class="line">  margin: <span class="number">8px</span> <span class="number">0</span></span><br><span class="line">  display: flex // 使用flex布局来确保图标和文本在同一行</span><br><span class="line">  align-items: center // 垂直居中对齐</span><br><span class="line"></span><br><span class="line">.category-icon</span><br><span class="line">  width: <span class="number">16px</span></span><br><span class="line">  height: <span class="number">16px</span></span><br><span class="line">  vertical-align: middle</span><br><span class="line">  margin-right: <span class="number">8px</span></span><br><span class="line"></span><br><span class="line">.category a</span><br><span class="line">  display: inline-block // 链接以行内块方式显示</span><br><span class="line">  word-break: break-word</span><br><span class="line">  color: <span class="built_in">var</span>(--text-p2)</span><br><span class="line">  font-family: system-ui</span><br><span class="line">  font-weight: <span class="number">300</span></span><br><span class="line">  font-size: <span class="number">16px</span></span><br><span class="line">  text-decoration: none</span><br><span class="line">  &amp;:hover</span><br><span class="line">    color: $color-hover</span><br><span class="line">    text-decoration: underline</span><br><span class="line"></span><br><span class="line">// Variables</span><br><span class="line">$color-hover = <span class="number">#0366d6</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>参考：<a href="https://www.flyalready.cn/Stellar%20%E4%B8%BB%E9%A2%98%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%88%86%E7%B1%BB%E7%B4%A2%E5%BC%95%20Widget">Stellar 主题中添加分类索引 Widget - 宇宙尽头的餐馆</a></p></blockquote><h3 id="随机文章按钮"><a class="markdownIt-Anchor" href="#随机文章按钮"></a> 随机文章按钮</h3><p>创建 <code>themes/stellar/scripts/helpers/random.js</code> ，增加以下代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_render:html&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> posts = []</span><br><span class="line">    hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;posts&#x27;</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">post</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (post.<span class="property">random</span> !== <span class="literal">false</span>) posts.<span class="title function_">push</span>(post.<span class="property">path</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    data += <span class="string">`&lt;script&gt;var posts=<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(posts)&#125;</span>;function toRandomPost()&#123; var randomPath = posts[Math.floor(Math.random()*posts.length)]; var encodedPath = encodeURIComponent(randomPath); window.open(&#x27;/&#x27; + encodedPath, &quot;_self&quot;); &#125;;&lt;/script&gt;`</span></span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>参考：<a href="https://www.flyalready.cn/Hexo%20Stellar%20%E4%B8%BB%E9%A2%98%E8%A3%85%E4%BF%AE%E7%AC%94%E8%AE%B0/#%E9%9A%8F%E6%9C%BA%E6%96%87%E7%AB%A0%E8%B7%B3%E8%BD%AC">Hexo Stellar 主题装修笔记 - 宇宙尽头的餐馆：随机文章按钮</a></p><p>备注：文章路径需要用<code>encodeURIComponent</code>来编码，否则如果文章路径里有连字符，没有在前面加上域名地址，导致打开失败。</p></blockquote><h3 id="增强标签显示"><a class="markdownIt-Anchor" href="#增强标签显示"></a> 增强标签显示</h3><p>现在相比于分类我可能会更喜欢用标签，因为一篇文章可以打多个标签。我在思源笔记里管理笔记也是用管理链接的方式而弃用了文档树分类，所以标签更符合我管理笔记的习惯。stellar默认在文章列表只显示分类，对我来说就有点难受了。</p><h4 id="主页文章列表添加标签"><a class="markdownIt-Anchor" href="#主页文章列表添加标签"></a> 主页文章列表添加标签</h4><p>修改<code>themes/stellar/layout/_partial/main/post_list/post_card.ejs</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cat</span></span><br><span class="line"><span class="keyword">if</span> (post.<span class="property">categories</span> &amp;&amp; post.<span class="property">categories</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (post.<span class="property">layout</span> === <span class="string">&#x27;post&#x27;</span> &amp;&amp; post.<span class="property">categories</span> &amp;&amp; post.<span class="property">categories</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> cats = [];</span><br><span class="line">    <span class="keyword">if</span> (post.<span class="property">categories</span>) &#123;</span><br><span class="line">      post.<span class="property">categories</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">cat, i</span>) =&gt;</span> &#123;</span><br><span class="line">        cats.<span class="title function_">push</span>(cat.<span class="property">name</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cats.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> cat = cats.<span class="title function_">shift</span>();</span><br><span class="line">      el += <span class="string">&#x27;&lt;span class=&quot;cap breadcrumb&quot;&#x27;</span> + <span class="title function_">category_color</span>(cat) + <span class="string">&#x27;&gt;&#x27;</span>;</span><br><span class="line">      el += <span class="title function_">icon</span>(<span class="string">&#x27;default:category&#x27;</span>)</span><br><span class="line">      el += <span class="string">`&lt;span&gt;<span class="subst">$&#123;cat&#125;</span>&lt;/span&gt;`</span></span><br><span class="line">      el += <span class="string">&#x27;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">  <span class="keyword">if</span> (post.<span class="property">sticky</span>) &#123;</span><br><span class="line">  el += <span class="string">`&lt;span class=&quot;pin&quot;&gt;<span class="subst">$&#123;icon(<span class="string">&#x27;default:pin&#x27;</span>)&#125;</span>&lt;/span&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line">el += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">// cat tags</span></span><br><span class="line">el += <span class="string">&#x27;&lt;div style=&quot;margin: 4px 0px;&quot;&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span> (post.<span class="property">tags</span> &amp;&amp; post.<span class="property">tags</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  el += <span class="string">&#x27;&lt;span class=&quot;cap tags&quot;&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  el += post.<span class="property">tags</span>.<span class="title function_">map</span>(<span class="function"><span class="params">tag</span> =&gt;</span> <span class="string">`&lt;span style=&quot;background-color: var(--tag-bg-color); padding: 0px 6px; margin: 0px 5px 0px 0px;border-radius: 5px; color: var(--tag-text-color); line-height: 1.5;&quot;&gt;#&lt;span&gt;<span class="subst">$&#123;tag.name&#125;</span>&lt;/span&gt;&lt;/span&gt;`</span>).<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  el += <span class="string">&#x27;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">el += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">el += <span class="string">&#x27;&lt;/article&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">return</span> el;</span><br></pre></td></tr></table></figure><p>自定义样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 默认的浅色模式颜色 */</span></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attr">--tag-bg-color</span>: <span class="number">#F2EEFD</span>;</span><br><span class="line">    <span class="attr">--tag-text-color</span>: <span class="number">#835EEC</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/* 暗黑模式下的颜色 */</span></span><br><span class="line">  <span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme</span>: dark) &#123;</span><br><span class="line">    <span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">      <span class="attr">--tag-bg-color</span>: <span class="number">#282433</span>;</span><br><span class="line">      <span class="attr">--tag-text-color</span>: <span class="number">#A28BF2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="selector-id">#post-meta</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>; </span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--text-p4); <span class="comment">/* 或 --text-p2，设置为灰色 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="在文章页面添加标签显示"><a class="markdownIt-Anchor" href="#在文章页面添加标签显示"></a> 在文章页面添加标签显示</h4><p>在 <code>layout/_partial/main/navbar/article_banner.ejs</code> 文件中，找到</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3.left.top: 面包屑导航</span></span><br><span class="line">  el += <span class="string">`&lt;div class=&quot;flex-row&quot; id=&quot;breadcrumb&quot;&gt;`</span></span><br><span class="line">    <span class="comment">// 首页</span></span><br><span class="line">    el += <span class="string">`&lt;a class=&quot;cap breadcrumb&quot; href=&quot;<span class="subst">$&#123;url_for(config.root)&#125;</span>&quot;&gt;<span class="subst">$&#123;__(<span class="string">&quot;btn.home&quot;</span>)&#125;</span>&lt;/a&gt;`</span></span><br><span class="line">    <span class="keyword">if</span> (theme.<span class="property">wiki</span>.<span class="property">tree</span>[page.<span class="property">wiki</span>]) &#123;</span><br><span class="line">      el += <span class="title function_">partial</span>(<span class="string">&#x27;breadcrumb/wiki&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (page.<span class="property">layout</span> == <span class="string">&#x27;post&#x27;</span>) &#123;</span><br><span class="line">      el += <span class="title function_">partial</span>(<span class="string">&#x27;breadcrumb/blog&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      el += <span class="title function_">partial</span>(<span class="string">&#x27;breadcrumb/page&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">// end 3.left.top</span></span><br><span class="line">  el += <span class="string">`&lt;/div&gt;`</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>并在后面添加：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在这里添加标签代码</span></span><br><span class="line"> <span class="keyword">if</span> (page.<span class="property">layout</span> == <span class="string">&quot;post&quot;</span> &amp;&amp; page.<span class="property">tags</span> &amp;&amp; page.<span class="property">tags</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">   el += <span class="string">&#x27;&lt;div id=&quot;tag&quot;&gt;&#x27;</span>; <span class="comment">// 将标签容器的创建移动到条件内部</span></span><br><span class="line">   el += <span class="string">&#x27; &lt;span&gt;&amp;nbsp标签：&lt;/span&gt;&#x27;</span>;</span><br><span class="line">   el += <span class="title function_">list_categories</span>(page.<span class="property">tags</span>, &#123;</span><br><span class="line">     <span class="attr">class</span>: <span class="string">&quot;cap breadcrumb&quot;</span>,</span><br><span class="line">     <span class="attr">show_count</span>: <span class="literal">false</span>,</span><br><span class="line">     <span class="attr">separator</span>: <span class="string">&#x27;&amp;nbsp; &#x27;</span>,</span><br><span class="line">     <span class="attr">style</span>: <span class="string">&quot;none&quot;</span></span><br><span class="line">   &#125;);</span><br><span class="line">   el += <span class="string">&#x27;&amp;nbsp&lt;/div&gt;&#x27;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><blockquote><p>参考：<a href="https://www.flyalready.cn/Hexo%20Stellar%20%E4%B8%BB%E9%A2%98%E8%A3%85%E4%BF%AE%E7%AC%94%E8%AE%B0/#%E5%9C%A8%E6%96%87%E7%AB%A0%E9%A1%B5%E9%9D%A2%E6%B7%BB%E5%8A%A0%E6%A0%87%E7%AD%BE%E6%98%BE%E7%A4%BA">Hexo Stellar 主题装修笔记 - 宇宙尽头的餐馆：在文章页面添加标签显示</a></p></blockquote><h3 id="自定义css"><a class="markdownIt-Anchor" href="#自定义css"></a> 自定义css</h3><h4 id="文章内更新日期始终显示"><a class="markdownIt-Anchor" href="#文章内更新日期始终显示"></a> 文章内更新日期始终显示</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 文章内更新日期始终显示 */</span></span><br><span class="line"><span class="selector-class">.bread-nav</span> <span class="selector-tag">div</span><span class="selector-id">#post-meta</span> <span class="selector-tag">span</span><span class="selector-class">.updated</span> &#123;</span><br><span class="line">    <span class="attribute">visibility</span>: visible <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="自定义滚动条样式"><a class="markdownIt-Anchor" href="#自定义滚动条样式"></a> 自定义滚动条样式</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* from https: //github.com/weekdaycare/weekdaycare.github.io/blob/main/css/scrollbar.css */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 滚动条 */</span></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">200</span>, <span class="number">155</span>, <span class="number">155</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#c3c0c1</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="comment">/* background-image: -webkit-linear-gradient(45deg,</span></span><br><span class="line"><span class="comment">            rgba(255, 255, 255, 0.4) 25%,</span></span><br><span class="line"><span class="comment">            transparent 25%,</span></span><br><span class="line"><span class="comment">            transparent 50%,</span></span><br><span class="line"><span class="comment">            rgba(255, 255, 255, 0.4) 50%,</span></span><br><span class="line"><span class="comment">            rgba(255, 255, 255, 0.4) 75%,</span></span><br><span class="line"><span class="comment">            transparent 75%,</span></span><br><span class="line"><span class="comment">            transparent) !important; */</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-corner &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> ::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#1f1f1f</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="限制代码块的最大高度"><a class="markdownIt-Anchor" href="#限制代码块的最大高度"></a> 限制代码块的最大高度</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.md-text</span> <span class="selector-class">.highlight</span> &#123;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">800px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="链接样式优化"><a class="markdownIt-Anchor" href="#链接样式优化"></a> 链接样式优化</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 文章内链接：为链接使用荧光笔下划线效果 */</span></span><br><span class="line"><span class="comment">/* 文章内链接 */</span></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[class]</span>) <span class="selector-tag">a</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[class]</span>),</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[class]</span>) <span class="selector-tag">a</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[class]</span>),</span><br><span class="line"><span class="selector-tag">table</span> <span class="selector-tag">a</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[class]</span>) &#123;</span><br><span class="line">  <span class="comment">/*color: var(--theme-link);*/</span></span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">3px</span>; <span class="comment">/* 增加底部padding */</span></span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">2px</span>;</span><br><span class="line"> <span class="attribute">color</span>: <span class="built_in">var</span>(--theme-link);</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">0</span>, <span class="built_in">var</span>(--theme-link), <span class="built_in">var</span>(--theme-link)) no-repeat center bottom / <span class="number">100%</span> <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>参考：<a href="https://www.flyalready.cn/Hexo%20Stellar%20%E4%B8%BB%E9%A2%98%E8%A3%85%E4%BF%AE%E7%AC%94%E8%AE%B0/#%E8%B6%85%E9%93%BE%E6%8E%A5%E6%A0%B7%E5%BC%8F%E8%B0%83%E6%95%B4">Hexo Stellar 主题装修笔记 - 宇宙尽头的餐馆：超链接样式调整</a></p></blockquote><h3 id="添加最新评论组件"><a class="markdownIt-Anchor" href="#添加最新评论组件"></a> 添加最新评论组件</h3><p>参考：<a href="https://weekdaycare.cn/posts/twikoo-new/#giscus">Stellar展示最新评论 - 星日语 (weekdaycare.cn)</a></p><p><strong>vercel app准备</strong></p><ol><li><p>部署 repo 至 Vercel：<a href="https://github.com/Achuan-2/recent-comment">Achuan-2/recent-comment (github.com)</a></p></li><li><p>需要在vercel中设置环境变量</p><table><thead><tr><th style="text-align:left">name</th><th style="text-align:left">description</th></tr></thead><tbody><tr><td style="text-align:left"><code>LIMIT</code></td><td style="text-align:left">获取数量</td></tr><tr><td style="text-align:left"><code>GITHUB_REPO_OWNER</code></td><td style="text-align:left">Github用户名</td></tr><tr><td style="text-align:left"><code>GITHUB_REPO_NAME</code></td><td style="text-align:left">仓库名</td></tr><tr><td style="text-align:left"><code>GITHUB_CATEGORY_ID</code></td><td style="text-align:left">Discussions分类名称</td></tr><tr><td style="text-align:left"><code>GITHUB_TOKEN</code></td><td style="text-align:left">Github Access Token</td></tr></tbody></table></li><li><p>配置完成后请redeploy！</p></li><li><p>查看是否能正确输出最新评论的json数据</p></li></ol><p><strong>stellar主题修改</strong></p><ol><li><p>在 <code>theme/source/js/services/</code> 下新建 giscus_new.js</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">utils.<span class="title function_">jq</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> els = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;ds-giscus&#x27;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; els.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">const</span> el = els[i];</span><br><span class="line">            <span class="keyword">const</span> api = el.<span class="title function_">getAttribute</span>(<span class="string">&#x27;api&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (api == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">const</span> default_avatar = def.<span class="property">avatar</span>;</span><br><span class="line">            <span class="comment">// layout</span></span><br><span class="line">            utils.<span class="title function_">request</span>(el, api, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">                <span class="keyword">const</span> limit = el.<span class="title function_">getAttribute</span>(<span class="string">&#x27;limit&#x27;</span>);</span><br><span class="line">                data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, i</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (limit &amp;&amp; i &gt;= limit) &#123;</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    comment = item.<span class="property">body</span>.<span class="property">length</span> &gt; <span class="number">50</span> ? item.<span class="property">body</span>.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">50</span>) + <span class="string">&#x27;...&#x27;</span> : item.<span class="property">body</span>;</span><br><span class="line">                    <span class="keyword">var</span> cell = <span class="string">&#x27;&lt;div class=&quot;timenode&quot; index=&quot;&#x27;</span> + i + <span class="string">&#x27;&quot;&gt;&#x27;</span>;</span><br><span class="line">                    cell += <span class="string">&#x27;&lt;div class=&quot;header&quot;&gt;&#x27;</span>;</span><br><span class="line">                    cell += <span class="string">&#x27;&lt;div class=&quot;user-info&quot;&gt;&#x27;</span>;</span><br><span class="line">                    cell += <span class="string">&#x27;&lt;img src=&quot; + (item.author.avatarUrl || default_avatar) + &quot; onerror=&quot;javascript:this.src=\\&quot; + default_avatar + &quot;\\&quot;;&quot;&gt;&#x27;</span>;</span><br><span class="line">                    cell += <span class="string">&#x27;&lt;span&gt;&#x27;</span> + item.<span class="property">author</span>.<span class="property">login</span> + <span class="string">&#x27;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">                    cell += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">                    cell += <span class="string">&#x27;&lt;span&gt;&#x27;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>(item.<span class="property">createdAt</span>).<span class="title function_">toLocaleString</span>() + <span class="string">&#x27;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">                    cell += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">                    cell += <span class="string">&#x27;&lt;a class=&quot;body&quot; href=&quot;&#x27;</span> + item.<span class="property">url</span> + <span class="string">&#x27;&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noopener noreferrer&quot;&gt;&#x27;</span>;</span><br><span class="line">                    cell += comment;</span><br><span class="line">                    cell += <span class="string">&#x27;&lt;/a&gt;&#x27;</span>;</span><br><span class="line">                    cell += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">                    $(el).<span class="title function_">append</span>(cell);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><code>_config.stellar.yml</code>主题配置中引入</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data_services:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">giscus:</span></span><br><span class="line">    <span class="attr">js:</span> <span class="string">/js/services/giscus_new.js</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>在 <code>_data/widgets.yml</code> 中创建小组件，并在<code>_config.stellar.yml</code>中选择在哪里展示</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">new_comment:</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="string">timeline</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">最新评论</span></span><br><span class="line">  <span class="attr">api:</span> <span class="string">https://xxx.vercel.app</span> <span class="comment"># 你的 vercel 函数地址</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">giscus</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">16</span> <span class="comment"># 限制获取数量，这是客户端，刚刚是服务端</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><p><strong>成果展示</strong></p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/Picbed/pic/assets/Clip_2024-04-28_01-36-04-20240428013606-bqbi3ns.png"></div></div><h3 id="fix-使用搜索功能搜到的部分文章无法打开"><a class="markdownIt-Anchor" href="#fix-使用搜索功能搜到的部分文章无法打开"></a> Fix 使用搜索功能搜到的部分文章无法打开</h3><p>我目前使用思源笔记这个笔记软件的「发布工具」插件把笔记发布到hexo<br>发布工具支持在yaml里放永久链接</p><p>由于永久链接是<code>/post/id.html</code>形式，而使用local search搜索的时候，这些文档则会打开为<code>https://post/id.html</code>,导致失败<br>所以需要对data.path进行检测，如果以’//'开头，则path字符串只取第二位到最后一位，使其能正常打开</p><p>在<code>themes\stellar\source\js\search\local-search.js</code>进行修改</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- var dataUrl = data.path;</span></span><br><span class="line"><span class="addition">+ var dataUrl = data.path.startsWith(&#x27;//&#x27;) ? data.path.slice(1) : data.path;</span></span><br></pre></td></tr></table></figure><p>已提交Pull request：<a href="https://github.com/xaoxuu/hexo-theme-stellar/pull/450">https://github.com/xaoxuu/hexo-theme-stellar/pull/450</a></p><p>‍</p>]]></content>
    
    
    <summary type="html">stellar 主题有段时间大改样式，当时没时间更新主题。感觉现在主题比较稳定了，终于找到时间把主题更新一下。由于stellar经过作者大改，我之前的很多的自定义样式都失效了。所以又折腾了一上午，重新美化了一下。</summary>
    
    
    
    <category term="其他笔记" scheme="http://achuan-2.top/categories/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="折腾" scheme="http://achuan-2.top/tags/%E6%8A%98%E8%85%BE/"/>
    
    <category term="Hexo" scheme="http://achuan-2.top/tags/Hexo/"/>
    
    <category term="博客" scheme="http://achuan-2.top/tags/%E5%8D%9A%E5%AE%A2/"/>
    
    <category term="编程" scheme="http://achuan-2.top/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="前端" scheme="http://achuan-2.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>统计分析丨T检验</title>
    <link href="http://achuan-2.top/post/T%20Test.html"/>
    <id>http://achuan-2.top/post/T%20Test.html</id>
    <published>2024-04-25T03:19:54.000Z</published>
    <updated>2024-07-29T08:36:28.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2><p>T检验是一种用于比较数据集均值差异的统计方法，包括单样本t检验、配对样本t检验和独立样本t检验。可通过MATLAB、Python和R等工具实现t检验。如果数据不符合正态分布，可考虑使用非参数分析。多余两组数据时，可采用多重比较方法。</p><h2 id="什么是t检验"><a class="markdownIt-Anchor" href="#什么是t检验"></a> 什么是T检验</h2><p>T检验是由威廉·戈塞特（William Sealy Gosset）在20世纪初提出的，他使用“学生”（Student）这一化名，因此T检验又常被称为“学生T检验”。T检验的基本思想是通过计算两个独立样本的平均值差异的统计显著性，来判断这两个样本是否来自具有相同均值的两个总体。</p><h3 id="t检验的分类"><a class="markdownIt-Anchor" href="#t检验的分类"></a> T检验的分类</h3><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/image-20240728133646-11lq28m.png"></div></div><p>T检验根据使用场景可以分为三类：</p><ol><li><p>单样本t检验(One-sample t-test)</p><ol><li><p><strong>用途</strong>：比较单个样本的均值与已知总体均值的差异。</p></li><li><p><strong>假设</strong>：样本来自正态分布的总体。</p></li><li><p><strong>例子</strong>：</p><ul><li>从某厂生产的零件中随机抽取若干件，检验其某种规格的均值是否与要求的规格相等（双侧检验）</li><li>在某偏远地区随机抽取若干健康男子，检验其脉搏均数是否高于全体健康男子平均水平（单侧检验）</li><li>检验某一线城市全体高三学生视力水平是否比全国全体高三学生视力水平低（单侧检验）</li><li>检验睁眼和闭眼的静息态脑电信号功率间的差值均值是否为零。</li></ul></li><li><p><strong>公式</strong>：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>t</mi><mo>=</mo><mfrac><mrow><mover accent="true"><mi>X</mi><mo>ˉ</mo></mover><mo>−</mo><msub><mi>μ</mi><mn>0</mn></msub></mrow><mrow><mi>s</mi><mi mathvariant="normal">/</mi><msqrt><mi>n</mi></msqrt></mrow></mfrac></mrow><annotation encoding="application/x-tex">t = \frac{\bar{X} - \mu_0}{s / \sqrt{n}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.4373899999999997em;vertical-align:-0.9402800000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4971099999999997em;"><span style="top:-2.30972em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="mord">/</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201099999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9402800000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>X</mi><mo>ˉ</mo></mover></mrow><annotation encoding="application/x-tex">\bar{X}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8201099999999999em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201099999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;"><span class="mord">ˉ</span></span></span></span></span></span></span></span></span></span>是样本均值，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">\mu_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是已知总体均值，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span>是样本标准差，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>是样本大小。</p></li></ol></li><li><p>配对样本t检验(Paired Samplest-test)</p><ol><li><p><strong>用途</strong>：用于比较同一组样本在两个不同条件下的均值是否显著不同</p></li><li><p><strong>假设</strong>：假设两个条件下的数据是成对的，即每个观察值在两个条件下都有对应。另外，假设<strong>成对差值符合正态分布</strong>。</p></li><li><p><strong>例子</strong>：</p><ul><li>同一受试对象的两个部分接受不同的处理（如对于一批血清样本，将其分为两个部分，利用不同的方法接受某种化合物的检验，检验结果的差异）</li><li>同一受试对象的自身前后对照（如检验癌症患者术前、术后的某种指标的差异）</li><li>同一受试者睁眼条件下静息态脑电信号功率的均值与闭眼条件下脑电信号的功率的均值是否具有显著的差异</li></ul></li><li><p><strong>公式</strong>：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>t</mi><mo>=</mo><mfrac><mover accent="true"><mi>d</mi><mo>ˉ</mo></mover><mrow><msub><mi>s</mi><mi>d</mi></msub><mi mathvariant="normal">/</mi><msqrt><mi>n</mi></msqrt></mrow></mfrac></mrow><annotation encoding="application/x-tex">t = \frac{\bar{d}}{s_d / \sqrt{n}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.4485em;vertical-align:-0.9402800000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.50822em;"><span style="top:-2.30972em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8312199999999998em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.08332999999999999em;"><span class="mord">ˉ</span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9402800000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>d</mi><mo>ˉ</mo></mover></mrow><annotation encoding="application/x-tex">\bar{d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8312199999999998em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8312199999999998em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.08332999999999999em;"><span class="mord">ˉ</span></span></span></span></span></span></span></span></span></span>是配对差值的均值，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">s_d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是配对差值的标准差，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>是配对数。</p></li></ol></li><li><p>独立样本t检验(Independent Samples t-test)</p><ol><li><p><strong>用途</strong>：比较两个独立样本的均值是否显著不同</p></li><li><p><strong>假设</strong>：假设两组数据是独立的，即一个组的观察值不会受到另一个组的影响。，另外，假设两组数据符合<strong>正态分布</strong>和<strong>方差齐性</strong>。</p></li><li><p><strong>例子</strong></p><ul><li>检验两工厂生产同种零件的规格是否相等（双侧检验）</li><li>为研究某种治疗儿童贫血新药的疗效，以常规药作为对照，治疗一段时间后，检验施</li><li>以新药的儿童血红蛋白的增加量是否比常规药的大（单侧检验）</li><li>检验两种药物对治疗高血压的效果，检验两组药物的降压水平是否相等（双侧检验）</li><li>检验男性被试和女性被试（或者正常人和病人）在睁眼条件下静息态脑电信号功率的均值是否具有显著差异（双侧检验）</li></ul></li><li><p><strong>公式</strong>：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>t</mi><mo>=</mo><mfrac><mrow><msub><mover accent="true"><mi>X</mi><mo>ˉ</mo></mover><mn>1</mn></msub><mo>−</mo><msub><mover accent="true"><mi>X</mi><mo>ˉ</mo></mover><mn>2</mn></msub></mrow><mrow><msub><mi>s</mi><mi>p</mi></msub><msqrt><mrow><mfrac><mn>1</mn><msub><mi>n</mi><mn>1</mn></msub></mfrac><mo>+</mo><mfrac><mn>1</mn><msub><mi>n</mi><mn>2</mn></msub></mfrac></mrow></msqrt></mrow></mfrac></mrow><annotation encoding="application/x-tex">t = \frac{\bar{X}_1 - \bar{X}_2}{s_p \sqrt{\frac{1}{n_1} + \frac{1}{n_2}}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.2271100000000006em;vertical-align:-1.7300000000000004em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.49711em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.185004em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1850040000000002em;"><span class="svg-align" style="top:-3.8em;"><span class="pstrut" style="height:3.8em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.1450039999999997em;"><span class="pstrut" style="height:3.8em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.8800000000000001em;"><svg width="400em" height="1.8800000000000001em" viewbox="0 0 400000 1944" preserveaspectratio="xMinYMin slice"><path d="M983 90l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5c53.7,-170.3,84.5,-266.8,92.5,-289.5zM1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.654996em;"><span></span></span></span></span></span></span></span><span style="top:-3.415004em;"><span class="pstrut" style="height:3.185004em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.862004em;"><span class="pstrut" style="height:3.185004em;"></span><span class="mord"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201099999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201099999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.7300000000000004em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>X</mi><mo>ˉ</mo></mover><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\bar{X}_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9701099999999999em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201099999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>X</mi><mo>ˉ</mo></mover><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\bar{X}_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9701099999999999em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201099999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是两个样本的均值，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">s_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>是合并标准差，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">n_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">n_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是两个样本的大小。</p></li></ol></li></ol><p>‍</p><h3 id="如果数据不符合正态分布该怎么办"><a class="markdownIt-Anchor" href="#如果数据不符合正态分布该怎么办"></a> 如果数据不符合正态分布，该怎么办？</h3><p><strong>如果样本量很小，就难以检验正态性</strong>。在这种情况下，您需要对所分析的数据有一定的理解。比如，对于考试分数数据，如果清楚分数差异的潜在分布是符合正态分布的。即使是很小的样本量，讲师也可能会采用 <em>t</em> 检验并做出正态性假设。</p><p>如果您知道潜在测量值不是正态分布的，该怎么办？或者，如果样本量较大并且正态性检验被拒绝，该怎么办？在这种情况下，您可以使用非参数分析。这种类型的分析不需要假设数据来自特定的分布。</p><ul><li>对于单样本 <em>t</em>­ 检验和配对 <em>t</em>­ 检验，可以使用Wilcoxon 符号秩检验替代。</li><li>对于独立双样本 <em>t</em>­ 检验，可以使用Wilcoxon 秩和检验替代。</li></ul><h3 id="如果有两个以上的组该怎么办"><a class="markdownIt-Anchor" href="#如果有两个以上的组该怎么办"></a> 如果有两个以上的组，该怎么办？</h3><p>请使用多重比较方法。 多重比较方法包括：<strong>方差分析 (ANOVA)</strong> ，用于检验所有配对差异的 <strong>Tukey-Kramer 检验</strong>，用于将组间均值与总体均值进行比较的<strong>均值分析 (ANOM)</strong> ，或用于将每组均值与对照均值进行比较的 <strong>Dunnett’s 检验</strong>。</p><h2 id="用代码实现t检验"><a class="markdownIt-Anchor" href="#用代码实现t检验"></a> 用代码实现t检验</h2><ul><li><p>Matlab</p><ul><li><p><strong>单一样本t检验</strong>：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[h, p, ci, stats] = ttest(data, mu);</span><br></pre></td></tr></table></figure></li><li><p><strong>配对样本t检验</strong>：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[h, p, ci, stats] = ttest(data1, data2);</span><br></pre></td></tr></table></figure></li><li><p><strong>独立样本t检验</strong>：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[h, p, ci, stats] = ttest2(data1, data2);</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Python</p><ul><li><p><strong>单一样本t检验</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> ttest_1samp</span><br><span class="line">t_stat, p_value = ttest_1samp(data, mu)</span><br></pre></td></tr></table></figure></li><li><p><strong>独立样本t检验</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> ttest_ind</span><br><span class="line">t_stat, p_value = ttest_ind(data1, data2)</span><br></pre></td></tr></table></figure></li><li><p><strong>配对样本t检验</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> ttest_rel</span><br><span class="line">t_stat, p_value = ttest_rel(data1, data2)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>R</p><ul><li><p><strong>单一样本t检验</strong>：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t_test <span class="operator">&lt;-</span> t.test<span class="punctuation">(</span>data<span class="punctuation">,</span> mu <span class="operator">=</span> mu<span class="punctuation">)</span></span><br></pre></td></tr></table></figure></li><li><p><strong>配对样本t检验</strong>：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t_test <span class="operator">&lt;-</span> t.test<span class="punctuation">(</span>data1<span class="punctuation">,</span> data2<span class="punctuation">,</span> paired <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure></li><li><p><strong>独立样本t检验</strong>：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t_test <span class="operator">&lt;-</span> t.test<span class="punctuation">(</span>data1<span class="punctuation">,</span> data2<span class="punctuation">)</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="单一样本t检验"><a class="markdownIt-Anchor" href="#单一样本t检验"></a> 单一样本t检验</h3><p>假设我们有一组学生的期末考试成绩，并且学校规定的平均成绩为90分。我们想知道这组学生的成绩是否显著高于或低于学校的平均水平。</p><h4 id="matlab"><a class="markdownIt-Anchor" href="#matlab"></a> MATLAB</h4><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 生成模拟数据：学生期末考试成绩</span></span><br><span class="line"><span class="comment">% 这些数据代表一组学生在期末考试中的成绩，学校规定的平均成绩是90分</span></span><br><span class="line">data = [<span class="number">85</span>, <span class="number">88</span>, <span class="number">90</span>, <span class="number">87</span>, <span class="number">93</span>, <span class="number">86</span>, <span class="number">88</span>]; <span class="comment">% 样本数据</span></span><br><span class="line">mu = <span class="number">90</span>; <span class="comment">% 学校规定的平均成绩</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 执行单一样本t检验</span></span><br><span class="line">[h, p, ci, stats] = ttest(data, mu);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 显示结果</span></span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;t-statistic: &#x27;</span>, num2str(stats.tstat)]);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;p-value: &#x27;</span>, num2str(p)]);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 根据p值判断检验结果</span></span><br><span class="line"><span class="keyword">if</span> p &lt; <span class="number">0.05</span></span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;样本均值与总体均值有显著差异&#x27;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;样本均值与总体均值无显著差异&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h4 id="python"><a class="markdownIt-Anchor" href="#python"></a> Python</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scipy.stats <span class="keyword">as</span> stats</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成模拟数据：学生期末考试成绩</span></span><br><span class="line"><span class="comment"># 这些数据代表一组学生在期末考试中的成绩，学校规定的平均成绩是90分</span></span><br><span class="line">data = [<span class="number">85</span>, <span class="number">88</span>, <span class="number">90</span>, <span class="number">87</span>, <span class="number">93</span>, <span class="number">86</span>, <span class="number">88</span>]  <span class="comment"># 样本数据</span></span><br><span class="line">mu = <span class="number">90</span>  <span class="comment"># 学校规定的平均成绩</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行单一样本t检验</span></span><br><span class="line">t_stat, p_value = stats.ttest_1samp(data, mu)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示结果</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;t-statistic: <span class="subst">&#123;t_stat&#125;</span>, p-value: <span class="subst">&#123;p_value&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据p值判断检验结果</span></span><br><span class="line"><span class="keyword">if</span> p_value &lt; <span class="number">0.05</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;样本均值与总体均值有显著差异&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;样本均值与总体均值无显著差异&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="r"><a class="markdownIt-Anchor" href="#r"></a> R</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成模拟数据：学生期末考试成绩</span></span><br><span class="line"><span class="comment"># 这些数据代表一组学生在期末考试中的成绩，学校规定的平均成绩是90分</span></span><br><span class="line">data <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">85</span><span class="punctuation">,</span> <span class="number">88</span><span class="punctuation">,</span> <span class="number">90</span><span class="punctuation">,</span> <span class="number">87</span><span class="punctuation">,</span> <span class="number">93</span><span class="punctuation">,</span> <span class="number">86</span><span class="punctuation">,</span> <span class="number">88</span><span class="punctuation">)</span> <span class="comment"># 样本数据</span></span><br><span class="line">mu <span class="operator">&lt;-</span> 90 <span class="comment"># 学校规定的平均成绩</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行单一样本t检验</span></span><br><span class="line">t_test <span class="operator">&lt;-</span> t.test<span class="punctuation">(</span>data<span class="punctuation">,</span> mu <span class="operator">=</span> mu<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示结果</span></span><br><span class="line">print<span class="punctuation">(</span>t_test<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据p值判断检验结果</span></span><br><span class="line"><span class="keyword">if</span> <span class="punctuation">(</span>t_test<span class="operator">$</span>p.value <span class="operator">&lt;</span> <span class="number">0.05</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line">    print<span class="punctuation">(</span><span class="string">&#x27;样本均值与总体均值有显著差异&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span> <span class="keyword">else</span> <span class="punctuation">&#123;</span></span><br><span class="line">    print<span class="punctuation">(</span><span class="string">&#x27;样本均值与总体均值无显著差异&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="配对样本t检验"><a class="markdownIt-Anchor" href="#配对样本t检验"></a> 配对样本t检验</h3><p>假设我们有一组学生的期中和期末考试成绩，我们想比较这些学生在两个时间点的成绩是否有显著差异。</p><h4 id="matlab-2"><a class="markdownIt-Anchor" href="#matlab-2"></a> MATLAB</h4><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 生成模拟数据：学生期中与期末考试成绩</span></span><br><span class="line"><span class="comment">% 这些数据代表一组学生在期中和期末考试中的成绩</span></span><br><span class="line">data1 = [<span class="number">85</span>, <span class="number">88</span>, <span class="number">90</span>, <span class="number">87</span>, <span class="number">93</span>, <span class="number">86</span>, <span class="number">88</span>]; <span class="comment">% 期中考试成绩</span></span><br><span class="line">data2 = [<span class="number">88</span>, <span class="number">90</span>, <span class="number">91</span>, <span class="number">89</span>, <span class="number">94</span>, <span class="number">87</span>, <span class="number">90</span>]; <span class="comment">% 期末考试成绩</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 执行配对样本t检验</span></span><br><span class="line">[h, p, ci, stats] = ttest(data1, data2);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 显示结果</span></span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;t-statistic: &#x27;</span>, num2str(stats.tstat)]);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;p-value: &#x27;</span>, num2str(p)]);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 根据p值判断检验结果</span></span><br><span class="line"><span class="keyword">if</span> p &lt; <span class="number">0.05</span></span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;期中和期末考试成绩有显著差异&#x27;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;期中和期末考试成绩无显著差异&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h4 id="python-2"><a class="markdownIt-Anchor" href="#python-2"></a> Python</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scipy.stats <span class="keyword">as</span> stats</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成模拟数据：学生期中与期末考试成绩</span></span><br><span class="line"><span class="comment"># 这些数据代表一组学生在期中和期末考试中的成绩</span></span><br><span class="line">data1 = [<span class="number">85</span>, <span class="number">88</span>, <span class="number">90</span>, <span class="number">87</span>, <span class="number">93</span>, <span class="number">86</span>, <span class="number">88</span>]  <span class="comment"># 期中考试成绩</span></span><br><span class="line">data2 = [<span class="number">88</span>, <span class="number">90</span>, <span class="number">91</span>, <span class="number">89</span>, <span class="number">94</span>, <span class="number">87</span>, <span class="number">90</span>]  <span class="comment"># 期末考试成绩</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行配对样本t检验</span></span><br><span class="line">t_stat, p_value = stats.ttest_rel(data1, data2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示结果</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;t-statistic: <span class="subst">&#123;t_stat&#125;</span>, p-value: <span class="subst">&#123;p_value&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据p值判断检验结果</span></span><br><span class="line"><span class="keyword">if</span> p_value &lt; <span class="number">0.05</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;期中和期末考试成绩有显著差异&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;期中和期末考试成绩无显著差异&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="r-2"><a class="markdownIt-Anchor" href="#r-2"></a> R</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成模拟数据：学生期中与期末考试成绩</span></span><br><span class="line"><span class="comment"># 这些数据代表一组学生在期中和期末考试中的成绩</span></span><br><span class="line">data1 <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">85</span><span class="punctuation">,</span> <span class="number">88</span><span class="punctuation">,</span> <span class="number">90</span><span class="punctuation">,</span> <span class="number">87</span><span class="punctuation">,</span> <span class="number">93</span><span class="punctuation">,</span> <span class="number">86</span><span class="punctuation">,</span> <span class="number">88</span><span class="punctuation">)</span> <span class="comment"># 期中考试成绩</span></span><br><span class="line">data2 <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">88</span><span class="punctuation">,</span> <span class="number">90</span><span class="punctuation">,</span> <span class="number">91</span><span class="punctuation">,</span> <span class="number">89</span><span class="punctuation">,</span> <span class="number">94</span><span class="punctuation">,</span> <span class="number">87</span><span class="punctuation">,</span> <span class="number">90</span><span class="punctuation">)</span> <span class="comment"># 期末考试成绩</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行配对样本t检验</span></span><br><span class="line">t_test <span class="operator">&lt;-</span> t.test<span class="punctuation">(</span>data1<span class="punctuation">,</span> data2<span class="punctuation">,</span> paired <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示结果</span></span><br><span class="line">print<span class="punctuation">(</span>t_test<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据p值判断检验结果</span></span><br><span class="line"><span class="keyword">if</span> <span class="punctuation">(</span>t_test<span class="operator">$</span>p.value <span class="operator">&lt;</span> <span class="number">0.05</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line">    print<span class="punctuation">(</span><span class="string">&#x27;期中和期末考试成绩有显著差异&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span> <span class="keyword">else</span> <span class="punctuation">&#123;</span></span><br><span class="line">    print<span class="punctuation">(</span><span class="string">&#x27;期中和期末考试成绩无显著差异&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="独立样本t检验"><a class="markdownIt-Anchor" href="#独立样本t检验"></a> 独立样本t检验</h3><p><strong>进行独立双样本t检验之前，应该进行方差齐性检验（homogeneity of variance test），即检查两组样本的总体方差是否相同</strong>。方差齐性检验本身也是一种假设检验，通用的方法有Hartley检验、Bartlett检验和Leyene检验。</p><p>假设我们有两班学生的期末考试成绩，我们想比较这两班学生的成绩是否有显著差异。</p><h4 id="matlab-3"><a class="markdownIt-Anchor" href="#matlab-3"></a> MATLAB</h4><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 生成模拟数据：两班学生期末考试成绩</span></span><br><span class="line"><span class="comment">% 班级1的成绩</span></span><br><span class="line">data1 = [<span class="number">85</span>, <span class="number">88</span>, <span class="number">90</span>, <span class="number">87</span>, <span class="number">93</span>, <span class="number">86</span>, <span class="number">88</span>];</span><br><span class="line"><span class="comment">% 班级2的成绩</span></span><br><span class="line">data2 = [<span class="number">78</span>, <span class="number">82</span>, <span class="number">84</span>, <span class="number">80</span>, <span class="number">85</span>, <span class="number">81</span>, <span class="number">79</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">% 执行独立样本t检验</span></span><br><span class="line">[h, p, ci, stats] = ttest2(data1, data2);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 显示结果</span></span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;t-statistic: &#x27;</span>, num2str(stats.tstat)]);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;p-value: &#x27;</span>, num2str(p)]);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 根据p值判断检验结果</span></span><br><span class="line"><span class="keyword">if</span> p &lt; <span class="number">0.05</span></span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;两班学生的成绩有显著差异&#x27;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;两班学生的成绩无显著差异&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>补充：方差检验</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">clc;clear;close all;</span><br><span class="line">[num,txt,raw] = xlsread(<span class="string">&#x27;Resting State.xlsx&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">%% indenpendent two sample ttest</span></span><br><span class="line">idx=num(:,<span class="number">5</span>);</span><br><span class="line">x=num(:,<span class="number">1</span>);</span><br><span class="line">x_M=x(idx==<span class="number">1</span>);</span><br><span class="line">x_F=x(idx==<span class="number">0</span>);</span><br><span class="line"><span class="comment">% 方差齐性检验，即检验两组样本的总体方差是否相同</span></span><br><span class="line">[p3,stats3] = vartestn(x,idx,...</span><br><span class="line">    <span class="string">&#x27;TestType&#x27;</span>,<span class="string">&#x27;LeveneAbsolute&#x27;</span>,<span class="string">&#x27;Display&#x27;</span>,<span class="string">&#x27;off&#x27;</span>);</span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;Independent t-test with Eyes open:&#x27;</span>);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;Levene’s test: p = &#x27;</span>,num2str(p3,<span class="string">&#x27;%0.2f&#x27;</span>)]);<span class="comment">%方差检验方法：Levene检验</span></span><br><span class="line"><span class="keyword">if</span> p3&lt;<span class="number">0.05</span></span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;Equal variances not assumed&#x27;</span>) <span class="comment">%方差不相同</span></span><br><span class="line">    [h4,p4,ci4,stats4]=ttest2(x_M,x_F,...</span><br><span class="line">        <span class="string">&#x27;Vartype&#x27;</span>,<span class="string">&#x27;unequal&#x27;</span>);                               </span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;Equal variances assumed&#x27;</span>); <span class="comment">%方差相同</span></span><br><span class="line">    [h4,p4,ci4,stats4]=ttest2(x_M,x_F);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;t = &#x27;</span>,num2str(stats4.tstat,<span class="string">&#x27;%0.2f&#x27;</span>)]);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;df = &#x27;</span>,num2str(stats4.df,<span class="string">&#x27;%0.2f&#x27;</span>)]);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;p = &#x27;</span>,num2str(p4,<span class="string">&#x27;%0.2f&#x27;</span>)]);</span><br></pre></td></tr></table></figure><h4 id="python-3"><a class="markdownIt-Anchor" href="#python-3"></a> Python</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scipy.stats <span class="keyword">as</span> stats</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成模拟数据：两班学生期末考试成绩</span></span><br><span class="line"><span class="comment"># 班级1的成绩</span></span><br><span class="line">data1 = [<span class="number">85</span>, <span class="number">88</span>, <span class="number">90</span>, <span class="number">87</span>, <span class="number">93</span>, <span class="number">86</span>, <span class="number">88</span>]</span><br><span class="line"><span class="comment"># 班级2的成绩</span></span><br><span class="line">data2 = [<span class="number">78</span>, <span class="number">82</span>, <span class="number">84</span>, <span class="number">80</span>, <span class="number">85</span>, <span class="number">81</span>, <span class="number">79</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行独立样本t检验</span></span><br><span class="line">t_stat, p_value = stats.ttest_ind(data1, data2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示结果</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;t-statistic: <span class="subst">&#123;t_stat&#125;</span>, p-value: <span class="subst">&#123;p_value&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据p值判断检验结果</span></span><br><span class="line"><span class="keyword">if</span> p_value &lt; <span class="number">0.05</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;两班学生的成绩有显著差异&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;两班学生的成绩无显著差异&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="r-3"><a class="markdownIt-Anchor" href="#r-3"></a> R</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成模拟数据：两班学生期末考试成绩</span></span><br><span class="line"><span class="comment"># 班级1的成绩</span></span><br><span class="line">data1 <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">85</span><span class="punctuation">,</span> <span class="number">88</span><span class="punctuation">,</span> <span class="number">90</span><span class="punctuation">,</span> <span class="number">87</span><span class="punctuation">,</span> <span class="number">93</span><span class="punctuation">,</span> <span class="number">86</span><span class="punctuation">,</span> <span class="number">88</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 班级2的成绩</span></span><br><span class="line">data2 <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">78</span><span class="punctuation">,</span> <span class="number">82</span><span class="punctuation">,</span> <span class="number">84</span><span class="punctuation">,</span> <span class="number">80</span><span class="punctuation">,</span> <span class="number">85</span><span class="punctuation">,</span> <span class="number">81</span><span class="punctuation">,</span> <span class="number">79</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行独立样本t检验</span></span><br><span class="line">t_test <span class="operator">&lt;-</span> t.test<span class="punctuation">(</span>data1<span class="punctuation">,</span> data2<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示结果</span></span><br><span class="line">print<span class="punctuation">(</span>t_test<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据p值判断检验结果</span></span><br><span class="line"><span class="keyword">if</span> <span class="punctuation">(</span>t_test<span class="operator">$</span>p.value <span class="operator">&lt;</span> <span class="number">0.05</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line">    print<span class="punctuation">(</span><span class="string">&#x27;两班学生的成绩有显著差异&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span> <span class="keyword">else</span> <span class="punctuation">&#123;</span></span><br><span class="line">    print<span class="punctuation">(</span><span class="string">&#x27;两班学生的成绩无显著差异&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="问题笔记"><a class="markdownIt-Anchor" href="#问题笔记"></a> 问题笔记</h2><ul><li><p>独立样本t检验和配对样本t检验的区别</p><ul><li><strong>独立样本t检验</strong>：用于比较两个独立样本的均值是否存在显著差异。这两个样本来自两个不同的群体，且样本之间互不相关。</li><li><strong>配对样本t检验</strong>：用于比较两个相关样本的均值是否存在显著差异。这两个样本来自同一个群体，但在不同条件或时间点下进行测试。</li></ul></li><li><p><strong>独立样本t检验</strong>的条件为什么需要均值的分布符合正态分布</p><p>独立样本t检验的公式依赖于<strong>t分布</strong>，该分布是假设样本均值的分布接近正态分布时推导出来的。如果样本均值的分布不符合正态分布，那么t分布的应用就不再有效，进而影响检验的准确性。正因为此，在使用t检验时，我们通常希望样本均值的分布符合正态分布。</p><p>对于小样本量（通常指<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>&lt;</mo><mn>30</mn></mrow><annotation encoding="application/x-tex">n &lt; 30</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">0</span></span></span></span>），样本均值的分布可能不能很好地近似正态分布，因此我们需要原始数据本身来自正态分布。在这种情况下，我们通常需要进行正态性检验（如Shapiro-Wilk检验）来确保数据符合要求。</p><p><strong>当样本量较大时（通常n≥30），</strong> 根据中心极限定理，<strong>即使原始数据不完全符合正态分布，样本均值的抽样分布会近似服从正态分布，所以t检验仍然可以得到相对可靠的结果</strong>。</p></li><li><p>t检验与u检验、卡方检验的区别</p><table><thead><tr><th>检验类型</th><th>用途</th><th>假设条件</th><th>数据类型</th></tr></thead><tbody><tr><td>T检验</td><td>比较均值</td><td>正态分布，方差相等</td><td>连续变量</td></tr><tr><td>U检验 <strong>(Mann-Whitney U Test)</strong></td><td>比较分布</td><td>无需正态分布</td><td>连续/有序变量</td></tr><tr><td>卡方检验</td><td>检验独立性和适配性</td><td>预期频数&gt;5</td><td>分类变量</td></tr></tbody></table></li></ul><h2 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h2><ul><li><a href="https://en.wikipedia.org/wiki/Student%27s_t-test">Student's t-test - Wikipedia</a></li><li><a href="https://www.jmp.com/zh_cn/statistics-knowledge-portal/t-test/paired-t-test.html">配对 t 检验 | 统计学简介 | JMP</a></li><li><a href="https://www.jmp.com/zh_cn/statistics-knowledge-portal/t-test/two-sample-t-test.html">双样本 t 检验 | 统计学简介 | JMP</a></li><li><a href="https://www.jmp.com/zh_cn/statistics-knowledge-portal/t-test/one-sample-t-test.html">单样本 t 检验 | 统计学简介 | JMP</a></li></ul><p>‍</p>]]></content>
    
    
    <summary type="html">T检验是一种用于比较数据集均值差异的统计方法，包括单样本t检验、配对样本t检验和独立样本t检验。可通过MATLAB、Python和R等工具实现t检验。如果数据不符合正态分布，可考虑使用非参数分析。多余两组数据时，可采用多重比较方法。</summary>
    
    
    
    <category term="统计分析" scheme="http://achuan-2.top/categories/%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90/"/>
    
    
    <category term="Matlab" scheme="http://achuan-2.top/tags/Matlab/"/>
    
  </entry>
  
  <entry>
    <title>书籍推荐——《自学是门手艺》</title>
    <link href="http://achuan-2.top/post/book-recommendation-self-study-is-the-door-craft-zja4yb.html"/>
    <id>http://achuan-2.top/post/book-recommendation-self-study-is-the-door-craft-zja4yb.html</id>
    <published>2024-03-23T08:51:19.000Z</published>
    <updated>2024-03-23T12:52:52.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>我的出发点是把编程当作一个自学的例子，重点在于学会如何自学，并且通过实践真的习得一个起初你觉得不是刚需，学会之后发现干脆离不开的、不可或缺的技能。另外，这本书的目标里有更重要的另外一个：“让你有能力靠自己能够理解所有的官方文档” —— 书里不用讲官方标准库里的每个模块、每个函数究竟如何使用，因为那些在官方文档里定义得非常清楚……</p></blockquote><p>李笑来的《自学是门手艺》是我非常推荐的一本书。本书在 Github 开源，见 <a href="https://github.com/selfteaching/the-craft-of-selfteaching">selfteaching/the-craft-of-selfteaching</a>。为了方便阅读，我制作了思源笔记版本，可以下载导入进思源笔记。</p><blockquote><p>链接：<a href="https://pan.baidu.com/s/1R4B50NDZttwmvoBGmLSw4A?pwd=suuv">https://pan.baidu.com/s/1R4B50NDZttwmvoBGmLSw4A?pwd=suuv</a><br>提取码：suuv</p></blockquote><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202403232053487.png"></div></div><h2 id="推荐理由"><a class="markdownIt-Anchor" href="#推荐理由"></a> 推荐理由</h2><ol><li><p>这是我认为最适合入门 Python 的书籍之一：</p><ul><li>告诉你编程的本质是布尔运算和流程控制</li><li>在讲 Python 的时候，李笑来其实不会太侧重讲基础知识，不会把所有基础函数和模块怎么用给你罗列出来，而是告诉你编程领域最好的教程是官方文档，一步步教你如何读懂官方文档。要知道其实很多编程语言的书籍和网络教程就只是把官方文档 copy 加以改编，学会读官方文档后，你大可以自己去检索学习不必靠别人，有助于编程能力的进阶。还告诉你当一个优秀调包侠的做法是，先粗略知道文档有什么内容，遇到什么需求再去读具体的文档。就好像用一个产品的时候，没必要把说明书就读完，读也读不懂，记也记不住，当需要用哪个功能的时候再翻到那一页去仔细读读怎么用。</li><li>每一章进入 Python 教学前，都会有鸡汤文，给你拨乱反正下，告诉你编程不难、自学不难。文笔还很好，助力你读下去。</li><li>教你如何上 Github、用 Git、用 Jupyter notebook、用搜索引擎搜索遇到的 bug</li></ul></li><li><p>本书不仅仅讲了 Python，它更是讲如何自学的一本书，如果你对编程不感兴趣，完全可以跳过 Python 的部分，只读关于如何自学的部分：</p><ul><li>把自学拆解为“学”、“练”、“用”，“造”，强调学习就是一门手艺活，得要刻意重复练习、刻意思考，并且要想方设法去用学到的东西；</li><li>“过早引用”无处不在，生活不是考试，每张试卷里都是课堂讲过的知识点，面对“过早引用”，要学会——就算读不懂也要读完、就算不明白也要先记住、反复做整理归纳总结、先关注使用再研究原理；</li><li>读一本书，应该先 “囫囵吞枣”，然后 “重复重复再重复”，于是就能深刻理解 “读书百遍其义自见”；</li><li>遇到难题要拆解学习，你最擅长的技能之一应该要是拆解拆解再拆解；</li><li>做个自驱动的人而非被外部驱动的被动的人，要学会主动去学习自己认为重要的东西，自上而下规划学习目标。绝大多数人一生都是被动者，终生只是被外界驱动而已。所以，他们会在某一时刻，“发现” 某个技能是刚需，然后再去学，但可惜却肯定的是，到那时候预算总是并不充裕，总是捉襟见肘。</li><li>避免注意力漂移，抵抗诱惑，做重要且紧急的事情，别在不重要的事情上花太多时间、轻重不分；</li><li>互联网，应该是你最喜欢的 “书”，而 Google 应该是你最好的朋友 —— 他总是能帮你找到更好的老师；</li><li>……</li></ul></li></ol><p>‍</p><h2 id="一些摘抄"><a class="markdownIt-Anchor" href="#一些摘抄"></a> 一些摘抄</h2><blockquote><p>绝大多数人，终其一生都没有自学过什么。他们也不是没学过，也不是没辛苦过，但事实却是：他们在有人教、有人带、有人逼的情况下都没真学明白那些基础知识…… 更可怕的是，他们学的那些东西中，绝大多数终其一生只有一个用处：考试。于是，考试过后，那些东西就 “考过即弃” 了…… 不得不承认，应试教育的确是磨灭自学能力的最有效方法。</p><p>在随后的生活里，尽管能意识到自己应该学点什么，常有 “要是我也会这个东西就好了” 的想法，但基本上百分之百以无奈结束 —— 再也没有人教、再也没有人带、再也没有人逼…… 于是，每次 “决心重新做人” 都默默地改成 “继续做人” 而后逢年过节再次许愿 “重新做人”……</p></blockquote><blockquote><p>自学没有什么 “秘诀”。<span style="font-weight: bold;" class="bold">它是一门手艺</span>，并且，严格意义上来讲，它<span style="font-weight: bold;" class="bold">只是</span>一门手艺。</p><p>手艺的特点就是<span style="font-weight: bold;" class="bold">无需天分</span>。手艺的特点就是<span style="font-weight: bold;" class="bold">熟练程度决定一切</span>。从这一点上来看，自学这门手艺和擀饺子皮没什么区别 —— 就那点事，刚开始谁都笨手笨脚，但熟练了之后，就那么回事…… 而已。</p><p>做什么事都有技巧，这不可否认。</p></blockquote><blockquote><p>PK 掉百分之七八十的人的方法真的很简单很简单啊：把买来的书都真真切切地认真读过就可以了。</p></blockquote><blockquote><p>学校里的课本，都很严谨 —— 任何概念，未经声明就禁止使用。所以，学完一章，就能学下一章；跳到某一章遇到不熟悉的概念，往前翻肯定能找到……</p><p>在学校里习惯了这种知识体系的人，离开学校之后马上抓瞎 —— <span style="font-weight: bold;" class="bold">社会的知识结构不仅不是这样的，而且几乎全都不是这样的</span>。工作中、生活里，充满了各式各样的 “过早引用”。为什么总是要到多年以后你才明白父母曾经说过的话那么有道理？为什么总要到孩子已经长大之后才反应过来当初自己对孩子做错过很多事情？为什么在自己成为领导之前总是以为他们只不过是在忽悠你？为什么那么多人创业失败了之后才反应过来当初投资人提醒的一些观念其实是千真万确的？—— 因为很多概念很多观念是 “过早引用”，在当时就是非常难以理解……</p><p>自学编程在这方面的好处在于，在自学的过程中，其实你相当于过了一遍 “模拟人生” —— 于是，面对同样的 “过早引用”，你不会觉得那么莫名其妙，你有一套你早已在 “模拟人生” 中练就的方法论去应对。</p></blockquote><blockquote><p>习得自学能力的终极目标就是：有能力<span style="font-weight: bold;" class="bold">只靠阅读</span>就能习得新技能。</p></blockquote><blockquote><p>“不是什么东西都可以从书本里学到的……” 这话听起来那么有道理，只不过是因为自己读书<span style="font-weight: bold;" class="bold">不够多</span>、<span style="font-weight: bold;" class="bold">不够对</span>而已。</p><p>过了 25 岁，我放弃了读小说，虚构类作品，我只选择看电影；而非虚构类作品，我选择尽量只读英文书，虽然那时候买起来很贵也很费劲，但我觉得值 —— 英文世界和中文世界的文化风格略有不同。在英文世界里，你看到的正常作者好像更多地把 “通俗易懂”、“逻辑严谨” 当作最基本的素养；而在中文世界里，好像 “故弄玄虚”、“偷梁换柱” 更常见一些；在英文世界里，遇到读不懂的东西可以很平静地接受自己暂时的愚笨，心平气和地继续努力就好；在中文世界里，遇到装神弄鬼欺世盗名的，弄不好最初根本没认出来，到最后跟 “认贼作父” 一样令人羞辱难当不堪回首。</p></blockquote><blockquote><p><span style="font-weight: bold;" class="bold">读不懂也要读完，然后重复很多遍。</span></p><p>这是最重要的起点。听起来简单，甚至有点莫名其妙 —— 但以后你就会越来越深刻地体会到，这么简单的策略，绝大多数人竟然不懂，也因此吃了很多很多亏。</p></blockquote><blockquote><p>有经验的读书者，拿来一本书开始自学技能的时候，他会先翻翻目录（Table Of Contents），看看其中有没有自己完全没有接触过的概念；然后再翻翻术语表（Glossary），看看是否可以尽量理解；而后会看看索引（Index），根据页码提示，直接翻到相关页面进一步查找…… 在通读书籍之前，还会看看书后的参考文献（References），看看此书都引用了哪些大牛的书籍，弄不好会顺手多买几本。</p><p>这样做，显然是老到 —— 这么做的最大好处是 “尽力消解了大量的过早引用”，为自己减少了极大的理解负担。</p></blockquote><blockquote><p>囫囵吞枣从一开始就是贬义词。但在当前这个特殊的情况下，它是最好的策略。那些只习惯于一上来就仔细认真的人，在这里很吃亏，<span style="font-weight: bold;" class="bold">因为他们越是仔细认真，越是容易被各种过早引用搞得灰心丧气；相应地，他们的挫败感积累得越快</span>；到最后弄不好最先放弃的是他们 —— 失败的原因竟然是因为 “太仔细了”……</p><p>第一遍囫囵吞枣，用个正面一点的描述，就是 “<span style="font-weight: bold;" class="bold">为探索未知领域先画个潦草的地图</span>”。地图这东西，有总比没有好；虽然说它最好精确，但即便是 “不精确的地图” 也比 “完全没地图” 好一万倍，对吧？更何况，这地图总是可以不断校正的，不是吗？世界上哪个地图不是一点一点校正过来才变成今天这般精确的呢？</p></blockquote><blockquote><p>那些靠阅读机器算法推送的内容而杀时间的人，恰恰就是因为他们有阅读能力才去不断地读，读啊读，像是那只被打了兴奋剂后来死在滚轮上的小白鼠。如果这些人哪怕有一点点自学能力，那么他们很快就会分辨出自己正在阅读的东西不会刺激自己的产出，只会消磨自己的时间；那么，他们就会主动放弃阅读那些杀时间的内容，把那时间和精力自然而然地用在筛选有繁殖能力的内容，让自己进步，让自己习得更多技能上去了。</p></blockquote><blockquote><p>不管怎么样，先用起来，反正，研究透原理，不可能马上做到，需要时间漫漫。</p><p>用错了没关系，改正就好。用得不好没关系，用多了就会好。只要开始用起来，理解速度就会加快 —— 实践出真知，不是空话。</p></blockquote><blockquote><p>自学是门手艺，编程很大程度上也是一门手艺，掌握它在绝大多数情况下与天分智商全无关系 —— 很多人是在十来岁的时候学会编程的基本技能的。所有的手艺，最基本特征就是：</p><p><span style="font-weight: bold;" class="bold">主要靠时间</span></p></blockquote><blockquote><p>真正开始自学且不断自学之后，刚开始总是觉得时间不够用 —— 因为当时的自己和其他人没什么太大区别。</p><p>随着时间的推移，不仅差异会出现，自我认知差异也开始越来越明显：别人的时间都白过了，自己的时间都有产出……</p><p>到了下一个阶段，在其他人不断焦虑的情况下，自己却开始越来越淡定：因为早已习惯了投入大量时间换取新技能……</p><p>等后来真的开始用这些技能做事，不断地做其他人因为时间白过了或者因为投入的 “预算” 不够而学不会做不到的事情 —— 并且还能充分明白，这并不是自己聪明、有天分的结果；只不过是做了该做的事情，投入了该投入的 “成本” 和 “预算” 而已……</p></blockquote><blockquote><p>我当过很长时间的英语老师。异常苦于一件事：最有用的道理最没人听。</p><p>学英语根本就不应该那么难，学了十六年也学不明白 —— 至于嘛！然而，最简单的道理，人们就是听不进去。他们之所以不行，就是因为从未刻意练习。学英语最简单的刻意练习就是朗读。每天朗读一小时，一百天下来就会超越绝大多数人，也会超越自己原本可能永远跨不过去的那个坎 —— 神奇的是，朗读什么无所谓，反正现在有声书那么多…… 更神奇的是，刚开始朗读得好不好听，甚至好不好都无所谓，反正没几天就能体会到大幅进步…… 最神奇的是，这么简单的事，99.99% 的人不做 —— 你身在中国，能理解这个比例真的没有夸张。</p></blockquote><blockquote><p>很多人学了却没怎么练，有一个很现实的原因 —— 没什么地方用得上。</p><p>这也怪我们的应试教育，大学前上 12 年学，“学”（更多是被逼的）的绝大多数东西，只有一个能够切实体会到的用处，考试 —— 中考、高考，以及以它们为目标的无数 “模考”…… 于是，反过来，不管学什么东西，除了考试之外，<span style="font-weight: bold;" class="bold">几乎无法想象其他的用处</span>。</p><p>一旦我们启动了对某项技能的自学之后，在那过程中，最具价值的刻意思考就是，时时刻刻琢磨 “这东西能用在哪儿呢？”</p></blockquote><blockquote><p>无论学什么，都有难点。所谓的 “学习曲线陡峭”，无非就是难点靠前、难点很多、难点貌似很难而已。</p><p>然而，相信我，所有的难点，事实上都可以被拆解成更小的单元，而后在逐一突破的时候，就没那么难了。逐一突破全部完成之后，再拼起来重新审视的时候就会发现那所谓的难常常只不过是错觉、幻觉而已 —— 我把它称为<span style="font-weight: bold;" class="bold">困难幻觉</span>。</p><p>把一切都当作手艺看的好处之一就是心态平和，因为你知道那不靠天分和智商，它靠的是另外几件事：不混时间，刻意思考，以及刻意练习 —— 其实吧，老祖宗早就有总结：</p><p>天下无难事，只怕<span style="font-weight: bold;" class="bold">有心人</span>……</p><p>大家都是人，咋可能没 “心” 呢？</p><p>想成为有心人，其实无非就是学会拆解之后逐一突破，就这么简单。</p></blockquote><blockquote><p>刚识字、刚上学的时候，由于理解能力有限，又由于年龄的关系于是耐心有限，所以，那时需要老师耐心陪伴、悉心引导。这就好像小朋友刚出生的时候，没有牙齿，所以只能喝奶差不多…… 然而，到了一定程度之后一定要断奶，是不是？可绝大多数人的实际情况却是，小学的时候爱上了 “奶嘴”（有人带着阅读），而后<span style="font-weight: bold;" class="bold">一生没有奶嘴就吃不下任何东西</span>。</p><p>他们必须去 “上课”，需要有人给他们讲书。不仅如此，讲得 “不生动”、“不幽默” 还不行；就算那职业提供奶嘴的人（这是非常令人遗憾的真相：很多的时候，所谓的 “老师” 本质上只不过就是奶妈而已）帅气漂亮、生动幽默、尽职尽力…… 最终还是一样的结果 —— 绝大多数人依然没有完整掌握所有应该掌握的细节。</p><p>开始 “自学” 的活动，本质上来看，和<span style="font-weight: bold;" class="bold">断奶</span>其实是一回事。</p></blockquote><blockquote><p>在学习编程的过程中，你会不由自主地学会一个重要技能：</p><p><span style="font-weight: bold;" class="bold">拆解</span></p><p>这么简单的两个字，在人生中的作用重大到不可想像…… 而且它也的确是自学能力中最重要的底层能力之一。</p></blockquote><blockquote><p>以后你会越来越清楚的：写程序的主要工作量，往往并非来自于在编辑器里敲代码那个阶段。</p><p>更多的工作量，其实在于如何才能在脑子里<span style="font-weight: bold;" class="bold">把整个流程拆解清楚</span>，考虑到各个方面……</p><p>所以，编程，更多是拿着纸笔梳理细节的工作。一旦所有的细节都想明白了，落实成代码其实是飞快的 —— 越是工程量大的项目越是如此。</p><p>这个道理在哪里都是相同、相通的。不说编程，说写书，也是一样的。</p></blockquote><blockquote><p>进而，想要把一门手艺搞到真正 “精湛” 的地步，最有效的方法就是尽早进入 “造” 的阶段 —— 所谓的 “造”，就是不断<span style="font-weight: bold;" class="bold">创造</span>的 “造”。</p><p>自学这门手艺，很简单，就是不断地学：</p></blockquote><blockquote><p><span style="font-weight: bold;" class="bold">地球上有效社交密度最高的地方，是</span> <span style="font-weight: bold;" class="bold"><a href="https://github.com">Github</a></span>。</p></blockquote><blockquote><p><span style="font-weight: bold;" class="bold">做个自驱动的人</span>，而非被外部驱动的被动的人。</p><p>这基本上是个越早建立越好的习惯。绝大多数人一生都是被动者，终生只是被外界驱动而已。所以，他们会在某一时刻，“发现” 某个技能是刚需，然后再去学，但可惜却肯定的是，到那时候预算总是并不充裕，总是捉襟见肘。</p></blockquote><blockquote><p>在古代，拜师学艺的确是很难的事情。首先，真正的好老师确实难寻；其次，高手也没空当老师；再次，就算是肯收徒授艺的老师也总是时间精力极其有限…… 更为重要的是，那时候想自学也真不行 —— 根本就没有什么称得上是文献的东西可供阅读或检索，很多重要信息甚至干脆只存在于某些人的脑中，就算它们被落实成了文献，也相当有限，且散落深藏在各处 —— 就算凑齐了，也没有 <a href="https://www.google.com/ncr">Google</a>！</p><p>对，最关键的是那时候没有 Google……</p></blockquote><blockquote><p><span style="font-weight: bold;" class="bold">注意力漂移</span>，是我杜撰的一个词，用来作为 “注意力集中” 的反义词 —— 因为更多的时候，我们并不是 “注意力不集中”，而是…… 而是更令人恼火的一个现象：</p><p>“注意力所集中的焦点总是不断被自己偷偷换掉……”</p><p>比如，你本来只不过就想着去 Google 一个编程错误信息的解读，结果不知道怎么就 “注意到” 了另外一个东西，比如，“某编辑器的皮肤”，然后你就 “顺手” 把它下载下来，然后 “很自然地顺手把它装上”，而后又看了看，觉得有点必要于是 “顺手做了点定制”…… 然后欣赏了一会儿，并自我得意一番之后 “突然发现” 自己还没有解决两小时之前要解决的问题！</p></blockquote><blockquote><p>早些年，我跟很多人一样痴迷于电脑这个东西，也跟很多人那样，用 Windows 惯出来了坏毛病 —— 动不动就重装系统…… 重装系统很浪费时间的，但那时也不知道为什么总是忍不住去干那事，哪怕有些小毛病，马上就受不了，弄的好像重装一个干净的操作系统会让自己的世界焕然一新一样。</p><p>再后来就明白了，这绝对就是<span style="font-weight: bold;" class="bold">自己的毛病 —— 做事不分轻重</span>。</p><p>说实话，这也不是自己想明白的 —— 我没那么聪明。是因为遇到了一个高人。他的电脑桌面上，乱七八糟摆满了各种图标，从不整理。我问他这不影响效率吗？他说，明明有搜索你不用，<span style="font-weight: bold;" class="bold">到底是谁效率低下</span>？我被问愣了，无言以对。</p><p>我又发现他根本没有装杀毒软件…… 我问为什么？他说，“养几个虫子玩玩也没什么不好……” 不过，他转念又告诉了我他的思考。他说，只要平时习惯好，病毒进来了也没啥可偷的，但更为关键的是，他用电脑是干活的，而不是干杀毒的活的…… 脑子如此清楚，让我自愧不如。</p><p>但学到了。</p><p>虽然我还是做不到桌面上图标很乱，虽然我是因为改用了 Mac OS，所以不装杀毒软件，但<span style="font-weight: bold;" class="bold">注意力要放到应该放的地方</span>，这事我记住了，牢牢记住，从此之后许多年，从未忘过。每次发现自己轻重不分的时候，就会想起他，然后就改过自新。</p></blockquote><blockquote><p>非常遗憾，绝大多数人对沟通能力的重视远远不够 —— 他们也不是不重视，就是重视的程度实际上太差了。别说双向沟通了，即便是单向沟通，向别人问个问题这么 “简单” 的事，其实也需要 “学” 与 “练”</p></blockquote>]]></content>
    
    
    <summary type="html">我的出发点是把编程当作一个自学的例子，重点在于学会如何自学，并且通过实践真的习得一个起初你觉得不是刚需，学会之后发现干脆离不开的、不可或缺的技能。另外，这本书的目标里有更重要的另外一个：“让你有能力靠自己能够理解所有的官方文档” —— 书里不用讲官方标准库里的每个模块、每个函数究竟如何使用，因为那些在官方文档里定义得非常清楚……</summary>
    
    
    
    <category term="其他笔记" scheme="http://achuan-2.top/categories/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="思源笔记" scheme="http://achuan-2.top/tags/%E6%80%9D%E6%BA%90%E7%AC%94%E8%AE%B0/"/>
    
    <category term="读书" scheme="http://achuan-2.top/tags/%E8%AF%BB%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>用Python批量给扫描pdf添加书签</title>
    <link href="http://achuan-2.top/post/scan-the-pdf-batch-with-python-batch-to-add-bookmarks-zn2z7s.html"/>
    <id>http://achuan-2.top/post/scan-the-pdf-batch-with-python-batch-to-add-bookmarks-zn2z7s.html</id>
    <published>2024-03-06T13:31:53.000Z</published>
    <updated>2024-03-06T13:50:36.000Z</updated>
    
    <content type="html"><![CDATA[<p>我在Zlibrary下载了《神经科学：探索脑》第四版的中文电子版。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202403062209704.png"></div></div><p>本来这个版本是有书签的，但是我想用ABBYY进行OCR识别，由于书有986页，全部一起OCR到中途会提示内存不足，我拆分为两份，分别进行OCR，然后再进行合并，但是后面就发现一个问题——原来的书签不见了！</p><p>那当然不可能再一个个敲！那怎么办？</p><p>于是在GPT的帮助下，用python写了一个代码，可以批量把原先pdf的书签导出到另一个pdf去</p><p>提问过程：</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202403062154322.png"></div></div><p>代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fitz  <span class="comment"># PyMuPDF:pip install pymupdf</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">copy_bookmarks</span>(<span class="params">source_pdf_path, target_pdf_path, output_pdf_path</span>):</span><br><span class="line">    <span class="comment"># 打开源PDF和目标PDF文件</span></span><br><span class="line">    source_pdf = fitz.<span class="built_in">open</span>(source_pdf_path)</span><br><span class="line">    target_pdf = fitz.<span class="built_in">open</span>(target_pdf_path)</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 从源PDF读取书签（大纲）</span></span><br><span class="line">    bookmarks = source_pdf.get_toc(simple=<span class="literal">False</span>)</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 将书签（大纲）添加到目标PDF</span></span><br><span class="line">    target_pdf.set_toc(bookmarks)</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 保存更改到新的PDF文件</span></span><br><span class="line">    target_pdf.save(output_pdf_path)</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 关闭PDF文件</span></span><br><span class="line">    source_pdf.close()</span><br><span class="line">    target_pdf.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 源PDF路径（书签来源）</span></span><br><span class="line">source_pdf_path = <span class="string">&#x27;source.pdf&#x27;</span></span><br><span class="line"><span class="comment"># 目标PDF路径（需要添加书签的PDF）</span></span><br><span class="line">target_pdf_path = <span class="string">&#x27;target.pdf&#x27;</span></span><br><span class="line"><span class="comment"># 输出的PDF路径</span></span><br><span class="line">output_pdf_path = <span class="string">&#x27;output_with_bookmarks.pdf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">copy_bookmarks(source_pdf_path, target_pdf_path, output_pdf_path)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;书签导入完成。&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>成果展示</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202403062207870.png"></div></div><p>事情到这里本来就结束了，但是我又突然有一个idea，如果一个本来没有书签的pdf，我该如何快速的添加书签呢。</p><p>我的想法是，大多数书籍都会提供目录，我可以根据书上的目录快速整理出一个目录列表，然后再用程序把这个列表变为书签，导入的pdf里去</p><p>比如基于《探索脑》这本书的目录</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202403062150471.png"></div></div><p>我整理得到了这样一个列表</p><ul><li><p>第 I 篇 基础@3</p><ul><li>第 1 章 神经科学：过去、现在和未来@3</li><li>第 2 章 神经元和神经胶质细胞@23</li><li>第 3 章 静息状态下的神经元膜@57</li><li>第 4 章 动作电位@83</li><li>第 5 章 突触传递@111</li><li>第 6 章 神经递质系统@145</li><li>第 7 章 神经系统的结构@181</li><li>第 7 章附录  人体神经解剖学图解指南@221</li></ul></li><li><p>第 II 篇 感觉和运动系统@267</p><ul><li>第 8 章 化学感觉@267</li><li>第 9 章 眼睛@295</li><li>第 10 章 中枢视觉系统@333</li><li>第 11 章 听觉和前庭系统@371</li><li>第 12 章 躯体感觉系统@417</li><li>第 13 章 运动的脊髓控制@455</li><li>第 14 章 运动的脑控制@487</li></ul></li><li><p>第 III 篇  脑和行为@525</p><ul><li>第 15 章 脑和行为的化学调控@525</li><li>第 16 章 动机@555</li><li>第 17 章 性与脑@585</li><li>第 18 章 情绪的脑机制@621</li><li>第 19 章 脑的节律和睡眠@651</li><li>第 20 章 语言@691</li><li>第 21 章 静息态的脑、注意及意识@725</li><li>第 22 章 精神疾病@757</li></ul></li><li><p>第 IV 篇  变化的脑@789</p><ul><li>第 23 章 脑连接的形成@789</li><li>第 24 章 记忆系统@827</li><li>第 25 章 学习和记忆的分子机制@869</li></ul></li><li><p>术语表@905</p></li><li><p>参考文献@927</p></li></ul><p>然后将这个列表放进一个txt文件，运行代码，即可将书签导入到pdf！</p><p>代码如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fitz  <span class="comment"># PyMuPDF:pip install pymupdf</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_bookmarks_from_txt</span>(<span class="params">txt_path,offset</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    解析txt文件中的书签信息。</span></span><br><span class="line"><span class="string">    txt文件的书签信息格式为markdown多级列表，根据缩进来确定层级。</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    bookmarks = []</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(txt_path, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> file:</span><br><span class="line">            <span class="keyword">if</span> line.strip():  <span class="comment"># 跳过空行</span></span><br><span class="line">                <span class="comment"># 计算行前的空格数来确定层级</span></span><br><span class="line">                <span class="comment"># 假设每个层级的缩进是2个空格，可以根据实际情况调整</span></span><br><span class="line">                indent = <span class="built_in">len</span>(line) - <span class="built_in">len</span>(line.lstrip())</span><br><span class="line">                level = indent // <span class="number">2</span> + <span class="number">1</span>  <span class="comment"># 计算层级，假定每2个空格代表一级缩进</span></span><br><span class="line">                <span class="comment"># 移除星号和空格，然后分割标题和页码</span></span><br><span class="line">                title, page = line.strip().removeprefix(<span class="string">&#x27;*&#x27;</span>).strip().split(<span class="string">&#x27;@&#x27;</span>)</span><br><span class="line">                bookmarks.append([level, title.strip(), <span class="built_in">int</span>(page)+offset])</span><br><span class="line">    <span class="keyword">return</span> bookmarks</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_bookmarks_to_pdf</span>(<span class="params">pdf_path, output_pdf_path,bookmarks</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    将格式化后的书签信息添加到指定的PDF文件中。</span></span><br><span class="line"><span class="string">    :param pdf_path: PDF文件的路径</span></span><br><span class="line"><span class="string">    :param bookmarks: 要添加的书签列表，格式为[[level, title, page], ...]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 打开PDF文件</span></span><br><span class="line">    doc = fitz.<span class="built_in">open</span>(pdf_path)</span><br><span class="line">  </span><br><span class="line">    doc.set_toc(bookmarks)</span><br><span class="line">    <span class="comment"># 保存更改到新的PDF文件中，以防覆盖原文件</span></span><br><span class="line">    doc.save(output_pdf_path)</span><br><span class="line">    doc.close()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;书签已添加到新的PDF文件中：<span class="subst">&#123;output_pdf_path&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.将书签从txt文件解析并转换为pymupdf格式</span></span><br><span class="line">txt_path = <span class="string">&#x27;bookmarks.txt&#x27;</span>  <span class="comment"># 假设书签信息存储在bookmarks.txt文件中</span></span><br><span class="line">bookmarks = parse_bookmarks_from_txt(txt_path,offset=<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.添加书签到PDF</span></span><br><span class="line">pdf_path = <span class="string">r&quot;C:\Users\Achuan-2\Downloads\神经科学：探索脑（第四版）OCR.pdf&quot;</span> <span class="comment"># 替换为目标PDF文件的路径</span></span><br><span class="line">output_pdf_path = <span class="string">r&quot;C:\Users\Achuan-2\Downloads\神经科学：探索脑（第四版）test.pdf&quot;</span></span><br><span class="line">add_bookmarks_to_pdf(pdf_path, output_pdf_path,bookmarks)</span><br></pre></td></tr></table></figure><blockquote><p>注意：因为目录和实际的pdf页码有差别，需要考虑offset，比如这本书目录和实际pdf页码差距为32，需要给目录的页码都加上32.</p></blockquote><p>感慨：编程真的能提高效率！有了GPT之后，真的是无脑编程，只要有想法，敢去做！</p><p>‍</p>]]></content>
    
    
    <summary type="html">本文介绍了如何利用Python编写代码，实现将一个PDF文件中的书签导出到另一个PDF文件中的功能。同时，还展示了如何通过整理书籍目录，并将其转化为书签列表，快速添加书签到PDF文件中。通过这些方法，可以有效管理和导航大型PDF文件内容。</summary>
    
    
    
    <category term="其他笔记" scheme="http://achuan-2.top/categories/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="编程" scheme="http://achuan-2.top/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="电脑技巧" scheme="http://achuan-2.top/tags/%E7%94%B5%E8%84%91%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>思源笔记|用quicker动作与zotero进行无缝联动</title>
    <link href="http://achuan-2.top/post/siyuan-note-use-quicker-action-to-seamlessly-link-with-zotero-zejypu.html"/>
    <id>http://achuan-2.top/post/siyuan-note-use-quicker-action-to-seamlessly-link-with-zotero-zejypu.html</id>
    <published>2024-01-01T08:39:56.000Z</published>
    <updated>2024-01-01T10:46:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>开发者写的文档：<a href="https://www.yuque.com/chentaotao-cf9fr/gthfy4/zd1m20wi0y27whla">Siyuan 文献管理插件，实现与 Zotero 无缝对接 (yuque.com)</a></p><p>相关 quicker 动作</p><ul><li><a href="https://getquicker.net/Sharedaction?code=c864bb72-b1dc-447e-594d-08db837051fc&amp;fromMyShare=true">插入引用 - by ttChen - 动作信息 - Quicker (getquicker.net)</a></li><li><a href="https://getquicker.net/Sharedaction?code=c064a200-45d1-4ad1-594e-08db837051fc&amp;fromMyShare=true">文献列表 - by ttChen - 动作信息 - Quicker (getquicker.net)</a></li><li><a href="https://getquicker.net/Sharedaction?code=451c8146-9948-419f-1267-08db84706690&amp;fromMyShare=true">格式化 - by ttChen - 动作信息 - Quicker (getquicker.net)</a></li></ul><h2 id="功能简介"><a class="markdownIt-Anchor" href="#功能简介"></a> 功能简介</h2><p>优点</p><ul><li>引用文献插入的是 Zotero URL，<span style="font-weight: bold;" data-type="strong">不需要导入文档进思源</span></li><li>导出 word 之后<span style="font-weight: bold;" data-type="strong">可以把 Zotero URL 变为 Zotero 引注</span>，实现与原生 Zotero 插件格式兼容，就可以愉快在思源写文章，然后直接导出 word 了，再搭配设计好的 word 模板，导出后基本就不需要怎么改了！</li></ul><p>缺点：</p><ul><li>插入文献不方便，需要在zotero先选中文献才能插入，选择多篇文献不方便，要是能弹出zotero内置的添加引注面板就好了</li></ul><h2 id="配置笔记"><a class="markdownIt-Anchor" href="#配置笔记"></a> 配置笔记</h2><ol><li>需要安装 debug-bridge 插件，具体见 <a href="https://www.yuque.com/chentaotao-cf9fr/gthfy4/clqahv57w5ugmdev?utm_source=ld246.com">Run Javascript in Zotero by Quicker (yuque.com)</a></li><li>CSL 文献样式要求选择 Author+Year 样式，我是根据作者录屏所示选择的 Field Crops Research 样式，不知道其他样式行不行</li></ol><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202401011847128.png"></div></div><h2 id="使用笔记"><a class="markdownIt-Anchor" href="#使用笔记"></a> 使用笔记</h2><ul><li><p><span style="font-weight: bold;" data-type="strong">插入文献</span>：</p><ul><li>需要打开 Zotero，先在 Zotero 主窗口中选择单条或多条，再点击 quicker 的「<span style="font-weight: bold;" data-type="strong">插入引用</span>」按钮</li><li>⚠ 警告：点击 quicker 的「<span style="font-weight: bold;" data-type="strong">插入引用</span>」按钮，鼠标需要先聚焦在思源笔记的文字内</li></ul></li><li><p><span style="font-weight: bold;" data-type="strong">导出 word 之后格式化 word 文档，使其与 Zotero 的 word 引用插件兼容</span>：</p><ul><li>将思源笔记的文档导出为 word 之后，打开 word 文档，点击 quicker 的「<span style="font-weight: bold;" data-type="strong">格式化</span>」按钮，将弹出选择 CSL 央视，选择完成后将自动格式化，将 Zotero URL 转换为 Zotero 引注格式</li></ul></li><li><p><span style="font-weight: bold;" data-type="strong">思源笔记插入文献列表</span></p><ul><li>点击 quicker 的「<span style="font-weight: bold;" data-type="strong">文献列表</span>」按钮，就可以在文档末尾插入文献列表，不过我觉得这个功能暂时并没有用，因为导出 word 后的格式化功能是不能将思源笔记的文献列表自动生成为 Zotero 的文献列表的</li></ul></li></ul><h2 id="使用效果"><a class="markdownIt-Anchor" href="#使用效果"></a> 使用效果</h2><p>思源笔记内的笔记样式</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202401011847399.png"></div></div><p>直接导出word无处理的样式</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202401011847448.png"></div></div><p>word格式化之后的样式</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202401011847378.png"></div></div><h2 id="使用的疑问"><a class="markdownIt-Anchor" href="#使用的疑问"></a> 使用的疑问</h2><ul><li><p><span style="font-weight: bold;" data-type="strong">现在引用格式主要支持 Author+year 样式，支持编号样式不？</span></p><ul><li>目前只支持(Author,year)样式，编号样式，建议导出 word 后，用格式化转换实现。</li></ul></li><li><p><span style="font-weight: bold;" data-type="strong">如果前面添加完一个引用，还想在同一句话再添加一个引用，有什么方便的方式吗？</span></p><ul><li><p>解决方式1：一个个添加，再手动更改</p><p>(<a href="zotero://select/items/1_YACNJ4QB">Cramer et al., 2021</a>) → (<a href="zotero://select/items/1_YACNJ4QB">Cramer et al., 2021</a>;<a href="zotero://select/items/1_GEWY7DEN">Dana et al., 2019</a>)</p></li><li><p>解决方式2：用高级搜索，使用匹配任意条件模式，就可以搜索多个，然后选中，再插入</p></li></ul></li></ul><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202401011847944.png"></div></div><h2 id="ref"><a class="markdownIt-Anchor" href="#ref"></a> Ref</h2><ul><li><a href="https://www.yuque.com/chentaotao-cf9fr/gthfy4/zd1m20wi0y27whla">Siyuan 文献管理插件，实现与 Zotero 无缝对接 (yuque.com)</a></li><li><a href="https://ld246.com/article/1689296953335">Siyuan 文献管理插件，实现与 Zotero 无缝对接 - 链滴 (ld246.com)</a></li></ul>]]></content>
    
    
    <summary type="html">导出 word 之后使用该动作可以把 Zotero URL 变为 Zotero 引注，实现与原生 Zotero 插件格式兼容，就可以愉快在思源写文章，然后直接导出 word 了，再搭配设计好的 word 模板，导出后基本就不需要怎么改了！</summary>
    
    
    
    <category term="其他笔记" scheme="http://achuan-2.top/categories/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="思源笔记" scheme="http://achuan-2.top/tags/%E6%80%9D%E6%BA%90%E7%AC%94%E8%AE%B0/"/>
    
    <category term="Zotero" scheme="http://achuan-2.top/tags/Zotero/"/>
    
  </entry>
  
  <entry>
    <title>Matlab 2024a 尝鲜：函数编写体验大升级</title>
    <link href="http://achuan-2.top/post/matlab-2024a-everbright-functional-writing-experience-big-upgrade-eao4i.html"/>
    <id>http://achuan-2.top/post/matlab-2024a-everbright-functional-writing-experience-big-upgrade-eao4i.html</id>
    <published>2023-12-23T18:35:31.000Z</published>
    <updated>2023-12-24T14:12:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>旧电脑坏了买了台新电脑顶上，正打算装上 MATLAB，突然发现已经有 R2024a 预览版了。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202312242213996.png"></div></div><p>简单看了下介绍我就迫不及待地下载试用了，因为 R2024a 更新了一个非常重要的特性，函数可以在脚本文件的任意位置了！</p><p>在R2024a之前：脚本中的本地函数必须定义在文件末尾，在最后一行脚本代码之后。而2024a开始，Matlab终于对这一点进行了改进，可以在运行函数代码前面或后面添加函数！2024a把这类函数叫做local functions，即局部函数。</p><p>个人认为Matlab 现在改进这一点，更多是为了推广实时脚本（对标 python 的 jupyter notebook）而改进。实时脚本尽管加了很多UI控件，由于之前函数只能写在最后，对于要新建函数的代码编写和测试不是特别好用，要写函数要么新建一个函数文件要么把函数放在最后，代码写的不流畅。有了这一功能后，可以直接在块内新建一个函数并调用，这coding体验简直上了一个台阶！真的得夸夸！</p><p>此外，Matlab 还优化了函数 arguments 语法的编写体验，现在会自动填充输入参数变量，不需要再手动一个个填写，我个人觉得Matlab虽然目前不上python的函数编写体验（python 可以很方便的自定义函数参数默认值，键值对传参），arguments也比较繁琐，但 arguments 参数块的引入还是很大程度提高了 MATLAB 的函数编写体验，可以对输入参数进行类型验证和类型转换、设置参数默认值、键值对传参等功能，很建议没接触的朋友们学一学arguments 怎么使用，国内这块Matlab相关书籍和博客还是比较少提到的，直接查阅 MATLAB 文档就好了。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202312242213754.png"></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/Achuan-2/PicBed/pic/assets/202312242213979.png"></div></div><h2 id="ref"><a class="markdownIt-Anchor" href="#ref"></a> Ref</h2><ul><li><a href="https://ww2.mathworks.cn/help/releases/R2024a/matlab/release-notes.html">2024a 更新内容</a></li><li><a href="https://ww2.mathworks.cn/help/releases/R2024a/matlab/matlab_prog/local-functions-in-scripts.html">Add Functions to Scripts</a></li></ul>]]></content>
    
    
    <summary type="html">在R2024a之前：脚本中的本地函数必须定义在文件末尾，在最后一行脚本代码之后。而2024a开始，Matlab终于对这一点进行了改进，可以在运行函数代码前面或后面添加函数！2024a把这类函数叫做local functions，即局部函数。</summary>
    
    
    
    <category term="其他笔记" scheme="http://achuan-2.top/categories/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="编程" scheme="http://achuan-2.top/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="Matlab" scheme="http://achuan-2.top/tags/Matlab/"/>
    
  </entry>
  
</feed>
